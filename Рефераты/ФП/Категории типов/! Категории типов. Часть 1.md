
# Введение

Есть не мало популярных публикаций, знакомящих программистов с теорией категорий. Пожалуй, самой объемлющей работой является книга Бартоша Милевски [Category Theory for Programmers](https://bartoszmilewski.com/2014/10/28/category-theory-for-programmers-the-preface/). Переводы нескольких глав этой книги даже [опубликованы на Хабре](https://habr.com/ru/articles/305018/).

Большинство таких работ достаточно «математичны» — в них сперва объявляется какая-то абстракция, а затем (и то не всегда) демонстрируется её польза в приложении к программированию. А чего в них практически невозможно найти, так это *вывод **необходимости** этих самых абстракций как самых оптимальных инструментов для решения реальных задач* (программирования).

Данный обзор задуман для демонстрации того, что стремление к повышению качества программ неизбежно приводит к абстракциям, известным в теории категорий под названиями, собственно, «категория», «функтор», «монада» и проч.

Само собой, речь пойдёт именно о статически-типизированном функциональном программировании. Именно оно предлагает наилучшие инструменты для написания надёжных программ, простых и безопасных для дальнейших модификаций. В настоящее время это уже не является какой-то экзотикой. Элементы функционального программирования повсеместно вводятся в популярные объектно-ориентированные языки и различные паттерны и «лучше практики» потихоньку переписываются под их использование.

Для примеров кода здесь будет использоваться язык Scala. Это, пожалуй, самый компромиссный язык, одной из целью которого является упрощение переучивания программистов с популярных Java-подобных языков на функциональное программирование. На Scala можно программировать как по старинке, чисто в стиле «better Java», так и в самых продвинутых функциональных стилях.

К сожалению, эта особенyость Scala является её же минусом. Синтаксис языка, помимо относительно лёгких «функциональных» возможностей, несёт и более громоздкое ООП-шное наследие. Программы, написанные на Scala, работают в объектно-ориентированной среде JVM, да и вообще вся «функциональщина» тут реализована через ООПу. В последних версиях языка есть очень крутые возможности, отсутствующие даже в Haskell, но всё же многие из них имеют мелкие досадные недоработки. Но, несмотря на моё рефлексирование по поводу любимого языка, на мой взгляд, именно синтаксис Scala лучше всего подходит для демонстрации применения элементов теории категорий в программировании!))

Этот обзор является продолжением цикла публикаций по теории типов. Другие обзоры цикла можно найти здесь:
- [Теория типов](https://habr.com/ru/articles/758542/).
- [Обобщённые типы](https://habr.com/ru/articles/807467/).
- [Рекурсивные типы](https://habr.com/ru/articles/863304/).

Предыдущие обзоры, даже будучи разбитыми на части, публиковались сразу, когда были закончены полностью. В этот раз решено публиковать части по-отдельности, по мере их готовности. В данной части обзора будет рассмотрено само понятие «*категория*»:
- покажем, почему можно захотеть такую абстракцию и из чего она состоит;
- рассмотрим некоторые примеры категорий:
	- категории значений с морфизмами-*парами*,
	- категория типов и её подкатегории с морфизмами-*функциями*,
	- категория категорий с морфизмами-*функторами*,
	- категория функторов, морфизмы которой называются «*естественные преобразования*»;
- операции над категориями — *произведения* и *дуальные* категории;
- категория *профункторов*, морфизмы которой называются «*диестественные преобразования*».


# Что такое категория


# Категории значений

```scala
type Hom = (Any, Any)

extension (f: Hom)
  infix def ∘(g: Hom): Hom = 
    if g._2 == f._1
      then g._1 -> f._2
      else throw Exception()
  def ap(a: Any): Any = 
    if f._1 == a
      then f._2
      else throw Exception()

val id: Any => Hom =
  a => a -> a
```

```scala
val f1: Hom = (2, 4)
val f2: Hom = (4, 42)
val f3: Hom = f2 ∘ f1 ∘ id(2)

f3.ap(2) // 42
f3.ap(3) // Exception
```

# Категории типов

## Подкатегории типов


# Категория категорий

## Функторы
## Эдофункторы


# Категория функторов

## Естественные преобразования


# Операции над категориями

## Двойственная (дуальная) категория

## Категориальное произведение


# Категория профункторов






