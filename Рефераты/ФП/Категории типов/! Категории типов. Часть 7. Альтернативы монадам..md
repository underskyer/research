
# Наивные варианты


# Стрелки

Профункторы представляют функциональные отношения в категории типов. И технически они могут быть морфизмами, но для этого нужно предоставить для них законопослушную композицию и тождественный морфизм. Если для некого `Pro[-_, +_]` есть экземпляры классов типов `Profunctor[Pro]` и `Category[Pro]` (см. **предыдущую часть обзора**), то такой профунктор называется **стрелкой**.

```scala
type Arrow[==>[_, _]] = Profunctor[==>] × Category[==>]
```

В предыдущей части обзора упоминался hom-тип категории Клейсли
```scala
type Kleisli[F[+_]] = [A, B] =>> A => F[B]
```
Такие морфизмы описывают вычисления «с эффектами»,  определёнными конструктором типов `F[+_]`. Класс типов `Category[Kleisli[F]]` даст удобные средства для построения цепочки эффективных вычислений, а, в свою очередь, `Profunctor[Kleisli[F]]` позволит встраивать в эту цепочку простые (типа, «чистые») функции вида `A => B`. В этом и заключается идея объединения возможностей `Profunctor` и `Category` в один класс типов `Arrow`.

Стрелки отвечают за композицию вычислений, поэтому их зачастую снабжают дополнительными возможностями. В библиотеке Cats класс типов [Arrow](https://www.javadoc.io/doc/org.typelevel/cats-core_3/latest/cats/arrow/Arrow.html) наследует не просто профунктор, но так называемы «сильный профунктор» [Strong](https://www.javadoc.io/doc/org.typelevel/cats-core_3/latest/cats/arrow/Strong.html), который позволяет стрелке `Pro[_, _]` коммутировать с произведением типов, расщепляя путь вычисления на два *параллельных* (независимых). В той же библиотеке есть [ArrowChoice](https://www.javadoc.io/doc/org.typelevel/cats-core_3/latest/cats/arrow/ArrowChoice.html) который, помимо прочего, позволяет стрелке коммутировать с суммой типов, расщепляя путь вычисления на два *альтернативных*.

Стрелки [рассматривались в одном из моих предыдущих обзоров](https://habr.com/ru/articles/807495/#arrows) и, возможно, мы вернёмся к этой теме под конец данного.



# Алгебраические эффекты

Kyo
https://koka-lang.github.io/koka/doc/book.html#sec-effect-types


# Монадные трансформеры


# Императивный стиль


[Direct-style Effects Explained](https://noelwelsh.com/posts/direct-style/)

# Возможности (Capabilities)


# Теории Лавера




