![[–ü—Ä–∏–∑—ã–≤–∞—Ç–µ–ª–∏.png|–°–∫–∞–ª–∏—Å—Ç—ã-–ø—Ä–∏–∑—ã–≤–∞—Ç–µ–ª–∏, —Å–ª—É—á–∞–π–Ω–æ –ø–æ–π–º–∞–Ω–Ω—ã–µ –æ–±—ä–µ–∫—Ç–∏–≤–æ–º –≤–æ –≤—Ä–µ–º—è —Ä–∞–±–æ—Ç—ã. –ü—Ä–∏–∑—ã–≤—ã –Ω–µ—è–≤–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π –ø–æ —Ç–∏–ø—É ‚Äì –æ–¥–∏–Ω –∏–∑ –æ—Å–Ω–æ–≤–Ω—ã—Ö –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ —Ä–∞–±–æ—Ç—ã —Å –∫–ª–∞—Å—Å–∞–º–∏ —Ç–∏–ø–æ–≤ –≤ Scala 3.|800]]


<anchor>type_classes</anchor>
## –ö–ª–∞—Å—Å—ã —Ç–∏–ø–æ–≤

<anchor>no_type_of_class</anchor>
### –≠—Ç–æ –Ω–µ —Ç–∏–ø—ã –∫–ª–∞—Å—Å–æ–≤!

–ï—Å–ª–∏ ‚Äú—Ç–∏–ø—ã –∫–ª–∞—Å—Å–æ–≤‚Äù ‚Äì —ç—Ç–æ, –±—É–∫–≤–∞–ª—å–Ω–æ, —Ç–∏–ø—ã, –∞—Å—Å–æ—Ü–∏–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å –∫–ª–∞—Å—Å–∞–º–∏, —Ç–æ –ø–µ—Ä–µ—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å–ª–æ–≤ –æ–±–ª–∞–¥–∞–µ—Ç —Å–æ–≤–µ—Ä—à–µ–Ω–Ω–æ –∏–Ω–æ–π —Å–µ–º–∞–Ω—Ç–∏–∫–æ–π. –î–∞–≤–∞–π—Ç–µ —Ä–∞–∑–±–µ—Ä—ë–º—Å—è, –∫–∞–∫–æ–π —Å–º—ã—Å–ª –∏–º–µ–µ—Ç —Å–ª–æ–≤–æ—Å–æ—á–µ—Ç–∞–Ω–∏–µ ‚Äú–∫–ª–∞—Å—Å—ã —Ç–∏–ø–æ–≤‚Äù.

–†–∞—Å—Å–º–æ—Ç—Ä–∏–º —Ç–∞–∫–æ–π –∫–æ–¥:
```scala
case class Context[A](meta: String)  
def enrichWithMeta[A](a: A, context: Context[A]) = (a, context.meta)  
//                (1)   (?)            (2)  (3)  

val contextForInt = Context[Int]("—Ü–µ–ª—ã–µ —á–∏—Å–ª–∞")  
enrichWithMeta[Int](42, contextForInt) // (42, "—Ü–µ–ª—ã–µ —á–∏—Å–ª–∞")
```
–ù–µ—Ç, –Ω–∏–∫–∞–∫–æ–π –æ—Å–æ–±–æ–π –º–∞–≥–∏–∏ —Ç—É—Ç –∏—Å–∫–∞—Ç—å –Ω–µ –Ω—É–∂–Ω–æ, —Å–µ–π—á–∞—Å –≤–∞–∂–Ω–∞ –ª–∏—à—å –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–∞—è —Ç—Ä–∞–∫—Ç–æ–≤–∫–∞ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ —ç—Ç–æ–≥–æ –∫–æ–¥–∞. –û–±–æ–±—â—ë–Ω–Ω—ã–π –º–µ—Ç–æ–¥ `enrichWithMeta` –ø–∞—Ä–∞–º–µ—Ç—Ä–∏–∑–∏—Ä–æ–≤–∞–Ω –Ω–µ–∫–∏–º —Ç–∏–ø–æ–º `A`, –∏ –≤ –∫–∞—á–µ—Å—Ç–≤–µ –æ–¥–Ω–æ–≥–æ –∏–∑ –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ `Context[A]`, —Ç–æ –µ—Å—Ç—å, –æ–±–æ–±—â—ë–Ω–Ω–æ–≥–æ —Ç–∏–ø–∞, –ø–∞—Ä–∞–º–µ—Ç—Ä–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ —Ç–µ–º –∂–µ —Ç–∏–ø–æ–º-–ø–∞—Ä–∞–º–µ—Ç—Ä–æ–º `A`. –ö–ª—é—á–µ–≤–æ–π –≤–æ–ø—Ä–æ—Å —Ç—É—Ç ‚Äì –∫–∞–∫–∏–µ —Ç–∏–ø—ã –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø—Ä–∏ –≤—ã–∑–æ–≤–µ –º–µ—Ç–æ–¥–∞ `enrichWithMeta`? –° –ø–µ—Ä–≤–æ–≥–æ –≤–∑–≥–ª—è–¥–∞ –∫–∞–∂–µ—Ç—Å—è –æ—á–µ–≤–∏–¥–Ω—ã–º, —á—Ç–æ —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π –ø–æ–ª–∏–º–æ—Ä—Ñ–∏–∑–º –ø–æ–∑–≤–æ–ª—è–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å *–ª—é–±–æ–π —Ç–∏–ø* –≤ –∫–∞—á–µ—Å—Ç–≤–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞.

–û–¥–Ω–∞–∫–æ, –µ—Å–ª–∏ —Ä–∞—Å—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å –∞—Ä–≥—É–º–µ–Ω—Ç `context: Context[A]` –∫–∞–∫ *–≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–π* (–≤ –ª—é–±–æ–º —Å–º—ã—Å–ª–µ!), —Ç–æ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º –º–æ–∂–µ—Ç —Å—Ç–∞—Ç—å –∏ —Ç–∞–∫–æ–π –æ—Ç–≤–µ—Ç: –ø—Ä–∏ –≤—ã–∑–æ–≤–µ –º–µ—Ç–æ–¥–∞ `enrichWithMeta` –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –Ω–µ –ª—é–±—ã–µ —Ç–∏–ø—ã, –∞ —Ç–æ–ª—å–∫–æ —Ç–µ `SomeType`, –¥–ª—è –∫–æ—Ç–æ—Ä—ã—Ö *—Å—É—â–µ—Å—Ç–≤—É–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ —Ç–∏–ø–∞* `Context[SomeType]` (—Å —Ç–µ–º, —á—Ç–æ–±—ã –µ–≥–æ –ø–µ—Ä–µ–¥–∞—Ç—å –≤ –º–µ—Ç–æ–¥, –∫–∞–∫ –∞—Ä–≥—É–º–µ–Ω—Ç). –ï—Å–ª–∏ –∂–µ –∑–Ω–∞—á–µ–Ω–∏–µ —Ç–∏–ø–∞ `Context[SomeType]` –Ω–µ –¥–æ—Å—Ç—É–ø–Ω–æ, —Ç–æ –≤—ã–∑–≤–∞—Ç—å –º–µ—Ç–æ–¥ `enrichWithMeta` –Ω–µ –ø–æ–ª—É—á–∏—Ç—Å—è.

–¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, —Å–∞–º–æ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–µ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–∏—è –∑–Ω–∞—á–µ–Ω–∏—è –æ–±–æ–±—â—ë–Ω–Ω–æ–≥–æ —Ç–∏–ø–∞, –∫–æ–Ω–∫—Ä–µ—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ —Ç–∏–ø–æ–º-–ø–∞—Ä–∞–º–µ—Ç—Ä–æ–º –º–µ—Ç–æ–¥–∞, –Ω–∞–∫–ª–∞–¥—ã–≤–∞–µ—Ç –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –Ω–∞ —ç—Ç–æ—Ç —Ç–∏–ø-–ø–∞—Ä–∞–º–µ—Ç—Ä. –ü—Ä–∏—á—ë–º, –≤–∞–∂–µ–Ω –Ω–µ *–∑–Ω–∞—á–µ–Ω–∏–µ* –∞—Ä–≥—É–º–µ–Ω—Ç–∞ –º–µ—Ç–æ–¥–∞, –∞ —Ç–æ–ª—å–∫–æ –µ–≥–æ *—Ç–∏–ø*, —Å–≤—è–∑–∞–Ω–Ω—ã–µ —Å –Ω–∏–º –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏-—Ñ—É–Ω–∫—Ü–∏–∏. –ë–æ–ª–µ–µ —Ç–æ–≥–æ, —Ç–∞–∫ –∫–∞–∫ —Ç–∏–ø-–ø–∞—Ä–∞–º–µ—Ç—Ä –º–æ–∂–µ—Ç –±—ã—Ç—å –ª—é–±–æ–π, —Ç–æ –∑–∞ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –æ—Ç–≤–µ—á–∞–µ—Ç –Ω–µ –ø—Ä–æ—Å—Ç–æ–π —Ç–∏–ø `Context[A]`, –∞ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä —Ç–∏–ø–æ–≤ `Context`. –í–æ —Ñ—Ä–∞–≥–º–µ–Ω—Ç–µ –∫–æ–¥–∞ –≤—ã—à–µ –∫–ª—é—á–µ–≤—ã–µ –º–æ–º–µ–Ω—Ç—ã –æ—Ç–º–µ—á–µ–Ω—ã —Ü–∏—Ñ—Ä–∞–º–∏: —Ç–∏–ø-–ø–∞—Ä–∞–º–µ—Ç—Ä –º–µ—Ç–æ–¥–∞ (1), —Ç–∏–ø –∞—Ä–≥—É–º–µ–Ω—Ç–∞ –º–µ—Ç–æ–¥–∞, –ø–æ–ª—É—á–µ–Ω–Ω—ã–π –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ–º –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–∞ —Ç–∏–ø–∞ (2) –∫ —Ç–∏–ø—É-–ø–∞—Ä–∞–º–µ—Ç—Ä—É –º–µ—Ç–æ–¥–∞ (3). –ü—Ä–æ —ç—Ç–æ –±—É–¥–µ—Ç —Å–∫–∞–∑–∞–Ω–æ –¥–∞–ª–µ–µ, –Ω–æ –ø–æ–∫–∞ –ø—Ä–µ–¥–ª–∞–≥–∞—é –∑–∞–¥—É–º–∞—Ç—å—Å—è, –º–æ–∂–Ω–æ –ª–∏ —Å—á–∏—Ç–∞—Ç—å —Å—Ö–æ–∂–∏–º –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ–º —Ç–∏–ø –ø–µ—Ä–≤–æ–≥–æ –∞—Ä–≥—É–º–µ–Ω—Ç–∞ (?)?

–í –º–∞—Ç–µ–º–∞—Ç–∏–∫–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ, –ø–æ–∑–≤–æ–ª—è—é—â–µ–µ –∫–ª–∞—Å—Å–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å –Ω–µ–∫—É—é —Å–æ–≤–æ–∫—É–ø–Ω–æ—Å—Ç—å –Ω–∞ ‚Äú–ø–æ–¥—Ö–æ–¥—è—â–µ–µ‚Äù —Å—É—â–Ω–æ—Å—Ç–∏ –∏–ª–∏ ‚Äú–Ω–µ–ø–æ–¥—Ö–æ–¥—è—â–µ–µ‚Äù, –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è *–∫–ª–∞—Å—Å–æ–º*. –ü—Ä–∏–≤—ã—á–Ω—ã–µ –¥–ª—è –ø—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç–æ–≤ –∫–ª–∞—Å—Å—ã —Ñ–∏–ª—å—Ç—Ä—É—é—Ç –∑–Ω–∞—á–µ–Ω–∏—è ‚Äì –æ–Ω–∏ —è–≤–ª—è—é—Ç—Å—è *–∫–ª–∞—Å—Å–∞–º–∏ –∑–Ω–∞—á–µ–Ω–∏–π*. –í —Ç–æ –∂–µ –≤—Ä–µ–º—è, –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–Ω—ã–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–Ω—ã–º –≤—ã—à–µ —Å–ø–æ—Å–æ–±–æ–º –æ–±–æ–±—â—ë–Ω–Ω—ã–µ —Ç–∏–ø—ã –∫–ª–∞—Å—Å–∏—Ñ–∏—Ü–∏—Ä—É—é—Ç –¥—Ä—É–≥–∏–µ —Ç–∏–ø—ã, —Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ, –∏—Ö –º–æ–∂–Ω–æ —Ç—Ä–∞–∫—Ç–æ–≤–∞—Ç—å –∫–∞–∫ **–∫–ª–∞—Å—Å—ã —Ç–∏–ø–æ–≤**.

–í —Ö–∞–±—Ä-—Å—Ç–∞—Ç—å–µ [–ß—Ç–æ —Ç–∞–∫–æ–µ –∫–ª–∞—Å—Å —Ç–∏–ø–æ–≤?](https://habr.com/ru/articles/771896/) –≥–æ–≤–æ—Ä–∏—Ç—å—Å—è, —á—Ç–æ –¥–ª—è —Ç–æ—á–Ω–æ–≥–æ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –∫–ª–∞—Å—Å–∞ —Ç–∏–ø–æ–≤ –º–æ–≥—É—Ç –ø–æ—Ç—Ä–µ–±–æ–≤–∞—Ç—å—Å—è –Ω–µ–∫–∏–µ *–∑–∞–∫–æ–Ω—ã* ‚Äì –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –Ω–∞ —Ç–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏, —á—Ç–æ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –∫–ª–∞—Å—Å —Ç–∏–ø–æ–≤. –ó–∞–∫–æ–Ω—ã (–∫–∞–∫ –ø—Ä–∞–≤–∏–ª–æ, –Ω–µ–∫–∏–µ –æ—Ç–Ω–æ—à–µ–Ω–∏—è, –≤ —á–∞—Å—Ç–Ω–æ—Å—Ç–∏, —Ä–∞–≤–µ–Ω—Å—Ç–≤–∞) –Ω—É–∂–Ω—ã –¥–ª—è *–º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö –∞–±—Å—Ç—Ä–∞–∫—Ü–∏–π*, –∫–æ—Ç–æ—Ä—ã–µ —Ñ–æ—Ä–º—É–ª–∏—Ä—É—é—Ç—Å—è –≤ –≤–∏–¥–µ –∫–ª–∞—Å—Å–æ–≤ —Ç–∏–ø–æ–≤, –Ω–æ –¥–ª—è —Ç–æ–≥–æ, —á—Ç–æ–±—ã –ø—Ä–æ—Å—Ç–æ –æ–±–æ–±—â—ë–Ω–Ω—ã–π —Ç–∏–ø —Å—á–∏—Ç–∞—Ç—å –∫–ª–∞—Å—Å–æ–º —Ç–∏–ø–æ–≤ –Ω–∏–∫–∞–∫–∏–µ –∑–∞–∫–æ–Ω—ã –Ω–µ —Ç—Ä–µ–±—É—é—Ç—Å—è. –í —Ç–æ–π —Å—Ç–∞—Ç—å–µ –∫–∞–∫ —Ä–∞–∑ —Å—Ç–∞–≤–∏—Ç—Å—è –æ—Ç–∫—Ä—ã—Ç—ã–π –≤–æ–ø—Ä–æ—Å, –º–æ–∂–Ω–æ –ª–∏ –Ω–µ–∫–∏–π –æ–±–æ–±—â—ë–Ω–Ω—ã–π –∫–ª–∞—Å—Å –Ω–∞–∑—ã–≤–∞—Ç—å –∫–ª–∞—Å—Å–æ–º —Ç–∏–ø–æ–≤?

–¢—É—Ç –≤–∞–∂–Ω–æ –∑–∞–º–µ—Ç–∏—Ç—å, —á—Ç–æ –∫–ª–∞—Å—Å—ã —Ç–∏–ø–æ–≤ –∏ –æ–±–æ–±—â—ë–Ω–Ω—ã–µ —Ç–∏–ø—ã ‚Äì —ç—Ç–æ *—Ä–∞–∑–Ω—ã–µ –ø–æ–Ω—è—Ç–∏—è*. –°—É—â–µ—Å—Ç–≤—É—é—Ç —Ç–∞–∫ –Ω–∞–∑—ã–≤–∞–µ–º—ã–µ *—Ñ–∞–Ω—Ç–æ–º–Ω—ã–µ –æ–±–æ–±—â—ë–Ω–Ω—ã–µ —Ç–∏–ø—ã*, –¥–ª—è –∫–æ—Ç–æ—Ä—ã—Ö –≤–æ–æ–±—â–µ –Ω–µ–ª—å–∑—è —Å–∫–æ–Ω—Å—Ç—Ä—É–∏—Ä–æ–≤–∞—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ, —Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ, –∏—Ö –Ω–µ –ø–æ–ª—É—á–∏—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤ –∫–∞—á–µ—Å—Ç–≤–µ –∫–ª–∞—Å—Å–æ–≤ —Ç–∏–ø–æ–≤. –ü—Ä–æ—á–∏–µ *–æ–±–æ–±—â—ë–Ω–Ω—ã–µ —Ç–∏–ø—ã –º–æ–∂–Ω–æ —Ç—Ä–∞–∫—Ç–æ–≤–∞—Ç—å –∫–∞–∫ –æ–ø–∏—Å–∞–Ω–∏—è –∫–ª–∞—Å—Å–æ–≤ —Ç–∏–ø–æ–≤*, –Ω–æ –≤—Å—ë –∂–µ —ç—Ç–æ –ø–æ–¥—Ä–∞–∑—É–º–µ–≤–∞–µ—Ç *–æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã–π —Å–ø–æ—Å–æ–± –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è* —Ç–∞–∫–∏—Ö —Ç–∏–ø–æ–≤.

–í—ã—à–µ –ø—Ä–∏–≤–µ–¥—ë–Ω –ø—Ä–∏–º–µ—Ä –æ—á–µ–Ω—å –ø—Ä–æ—Å—Ç–æ–≥–æ –æ–±–æ–±—â—ë–Ω–Ω–æ–≥–æ –∫–ª–∞—Å—Å–∞ `Context[A]`, –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—é—â–µ–≥–æ –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π –ø—Ä–æ–µ–∫—Ç–æ—Ä —Ç–∏–ø–∞ `String`, –∏ —Å–æ–≤—Å–µ–º –Ω–µ –∏—Å–ø–æ–ª—å–∑—É—é—â–∏–π –ø–∞—Ä–∞–º–µ—Ç—Ä `A`. –ë–ª–∏–∂–µ –∫ –∫–æ–Ω—Ü—É —Ä–∞–∑–¥–µ–ª–∞ –±—É–¥—É—Ç —Ä–∞—Å—Å–º–æ—Ç—Ä–µ–Ω–Ω—ã–µ –±–æ–ª–µ–µ –ø–æ–ª–µ–∑–Ω—ã–µ –ø—Ä–∏–º–µ—Ä—ã –∫–ª–∞—Å—Å–æ–≤ —Ç–∏–ø–æ–≤, –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—é—â–∏–µ —Ä–∞–∑–ª–∏—á–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏, –∑–∞–¥–µ–π—Å—Ç–≤—É—é—â–∏–µ —Ç–∏–ø-–ø–∞—Ä–∞–º–µ—Ç—Ä. –ü—Ä–∏–º–µ—Ä `Context[A]` –ø—Ä–∏–∑–≤–∞–Ω –ø–æ–¥—á–µ—Ä–∫–Ω—É—Ç—å, —á—Ç–æ –∫–ª–∞—Å—Å—ã —Ç–∏–ø–æ–≤ –º–æ–≥—É—Ç –±—ã—Ç—å –æ–ø–∏—Å–∞–Ω—ã *–ª—é–±—ã–º–∏* –æ–±–∏—Ç–∞–µ–º—ã–º–∏ –æ–±–æ–±—â—ë–Ω–Ω—ã–º–∏ —Ç–∏–ø–∞–º–∏.

–¢–∞–∫–∂–µ –¥–∞–ª–µ–µ –±—É–¥–µ—Ç —Ä–∞—Å—Å–∫–∞–∑–∞–Ω–æ, —á—Ç–æ –∏–º–µ–Ω–Ω–æ –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç Scala –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –∫–ª–∞—Å—Å–∞–º–∏ —Ç–∏–ø–æ–≤, –Ω–æ —Å–ø–µ—Ä–≤–∞ —Å—Ç–æ–∏—Ç –æ–±—Ä–∞—Ç–∏—Ç—å –≤–Ω–∏–º–∞–Ω–∏–µ –Ω–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–Ω—É—é —Ñ–æ—Ä–º—É–ª–∏—Ä–æ–≤–∫—É –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –Ω–∞ —Ç–∏–ø-–ø–∞—Ä–∞–º–µ—Ç—Ä `enrichWithMeta[A]`: *—Å—É—â–µ—Å—Ç–≤—É—é—Ç —Ç–∞–∫–∏–µ —Ç–∏–ø—ã `A`, –¥–ª—è –∫–æ—Ç–æ—Ä—ã—Ö –¥–æ—Å—Ç—É–ø–Ω–æ –∑–Ω–∞—á–µ–Ω–∏–µ `Context[A]`*. –¢–∞–∫–æ–≥–æ —Ä–æ–¥–∞ –ª–æ–≥–∏—á–µ—Å–∫–∏–µ —É—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –ø—Ä–∏ –ø–µ—Ä–µ–Ω–æ—Å–µ –≤ —Ç–µ–æ—Ä–∏—é —Ç–∏–ø–æ–≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—Ç –ø–æ–Ω—è—Ç–∏—é ‚Äú*—ç–∫–∑–∏—Å—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ —Ç–∏–ø—ã*‚Äù.

<anchor>existential_types</anchor>
### –≠–∫–∑–∏—Å—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ —Ç–∏–ø—ã

–ò–Ω–æ–≥–¥–∞ –Ω–∞–º –ø—Ä–æ—Å—Ç–æ –Ω–µ –∏–Ω—Ç–µ—Ä–µ—Å–µ–Ω –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —Ç–∏–ø, –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–π –≤ –≤—ã—Ä–∞–∂–µ–Ω–∏–∏ —Ç–∏–ø–∞. –ù–∞–ø—Ä–∏–º–µ—Ä, –º–æ–∂–Ω–æ –ø—Ä–µ–¥—Å—Ç–∞–≤–∏—Ç—å —Ç–∞–∫—É—é —Ñ—É–Ω–∫—Ü–∏—é:
```scala
def getLenght(l: List[_]) = l.lenght
//               ‚Üë‚Üë‚Üë‚Üë‚Üë‚Üë‚Üë –≤–ø–æ–ª–Ω–µ —Å–µ–±–µ –∫–æ—Ä—Ä–µ–∫–Ω–æ–µ –≤—ã—Ä–∞–∂–µ–Ω–∏–µ –≤ Scala
```
–¢–∏–ø —ç–ª–µ–º–µ–Ω—Ç–æ–≤ —Å–ø–∏—Å–∫–∞ –Ω–µ –≤–∞–∂–µ–Ω, –µ—Å–ª–∏ –Ω–∞–º —Ç—Ä–µ–±—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –µ–≥–æ –¥–ª–∏–Ω–Ω–∞. –û–¥–Ω–∞–∫–æ, —Å–∞–º–æ *—Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏–µ* —Ç–∞–∫–æ–≥–æ —Ç–∏–ø–∞ –ø—Ä–µ–¥–ø–æ–ª–∞–≥–∞–µ—Ç—Å—è, —Ç–∞–∫ –∫–∞–∫ —Å–ø–∏—Å–æ–∫ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –±–µ–∑ —Ç–∏–ø–∞ –ø–æ–ø—Ä–æ—Å—Ç—É –Ω–µ –≤–æ–∑–º–æ–∂–µ–Ω. Scala —Ç–∞–∫–∂–µ –ø–æ–∑–≤–æ–ª—è–µ—Ç —É–∫–∞–∑—ã–≤–∞—Ç—å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –¥–ª—è –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω–æ–≥–æ —Ç–∏–ø–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞, –≤–ø—Ä–æ—á–µ–º, –≤–≤–∏–¥—É –∫–æ–≤–∞—Ä–∏–∞–Ω—Ç–Ω–æ—Å—Ç–∏ `List`, –≤—ã—Ä–∞–∂–µ–Ω–∏–µ `l: List[_ <: SomeType]` –º–æ–∂–Ω–æ –ø–µ—Ä–µ–ø–∏—Å–∞—Ç—å –ø—Ä–æ—â–µ: `l: List[SomeType]`. –ù–æ —Å–ª—É—á–∞–µ—Ç—Å—è, —á—Ç–æ —Å—Ç–æ–ª—å —à–∏—Ä–æ–∫–æ–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –Ω–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–∞ —Ç–∏–ø–æ–≤ –æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –Ω–µ —Ç–µ–º, —á—Ç–æ –Ω—É–∂–Ω–æ. –î–∞–≤–∞–π—Ç–µ –ª—É—á—à–µ –ø–æ–ø—Ä–æ–±—É–µ–º –ø–æ–¥–æ–π—Ç–∏ –∫ —ç–∫–∑–∏—Å—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–º —Ç–∏–ø–∞–º –æ—Ç —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã—Ö, –≤–æ—Å–ø–æ–ª—å–∑–æ–≤–∞–≤—à–∏—Å—å –∏—Ö *–¥—É–∞–ª—å–Ω–æ—Å—Ç—å—é*.

–†–∞—Å—Å–º–æ—Ç—Ä–∏–º –≤—ã—Ä–∞–∂–µ–Ω–∏–µ `A Either String`, –æ–ø—Ä–µ–¥–µ–ª—è—é—â–µ–µ —Å—É–º–º—É —Ç–∏–ø–æ–≤ `A` –∏ `String`. –ó–¥–µ—Å—å `A` ‚Äì —Å–≤–æ–±–æ–¥–Ω–∞—è –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è, –∏ –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤—ã—Ä–∞–∂–µ–Ω–∏—è —ç—Ç—É –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –Ω—É–∂–Ω–æ —Å–≤—è–∑–∞—Ç—å –∫–∞–∫–∏–º-–ª–∏–±–æ –∫–≤–∞–Ω—Ç–æ—Ä–æ–º. –†–∞–Ω–µ–µ –¥–ª—è –º—ã –ø–æ–ª—å–∑–æ–≤–∞–ª–∏—Å—å —Ç–æ–ª—å–∫–æ –∫–≤–∞–Ω—Ç–æ—Ä–æ–º $\lambda$ (–∏–ª–∏ –∞–Ω–∞–ª–æ–≥–∏—á–Ω—ã–º $\forall$), –∫–æ—Ç–æ—Ä—ã–π –º–æ–∂–Ω–æ —á–∏—Ç–∞—Ç—å –∫–∞–∫ "–¥–ª—è –ª—é–±–æ–≥–æ":
```scala
//   OrStringA = ŒªA.     A   +    String
type OrStringA = [A] =>> A Either String
```
"–î–ª—è –ª—é–±–æ–≥–æ —Ç–∏–ø–∞ `A` –µ—Å—Ç—å —Ç–∏–ø-—Å—É–º–º–∞ `A` –∏ `String`".

–î—É–∞–ª—å–Ω—ã–º –∫ —É—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—é "–¥–ª—è –ª—é–±–æ–≥–æ `A`" —è–≤–ª—è–µ—Ç—Å—è —É—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ "—Å—É—â–µ—Å—Ç–≤—É–µ—Ç —Ç–∞–∫–æ–π `A`, —á—Ç–æ". –í –º–∞—Ç–µ–º–∞—Ç–∏–∫–µ, –≤ —Ç–æ–º —á–∏—Å–ª–µ –∏ –≤ —Ç–µ–æ—Ä–∏–∏ —Ç–∏–ø–æ–≤, –¥–ª—è —Ç–∞–∫–∏—Ö —Å–ª—É—á–∞–µ–≤ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–≤–∞–Ω—Ç–æ—Ä $\exists$ (exists). –ï—Å–ª–∏ —ç—Ç–æ—Ç –∫–≤–∞–Ω—Ç–æ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å –≤—ã—Ä–∞–∂–µ–Ω–∏–µ–º –∏–∑ –ø—Ä–∏–º–µ—Ä–∞ –≤—ã—à–µ, —Ç–æ –ø–æ–ª—É—á–∏—Ç—Å—è —Ç–∞–∫–æ–π —Ç–∏–ø: $OrStringE = \exists A.\; A + String$.

>–î—É–∞–ª—å–Ω–æ—Å—Ç—å –∫–≤–∞–Ω—Ç–æ—Ä–æ–≤ $\forall$ –∏ $\exists$ –≤ –ª–æ–≥–∏–∫–µ –ø—Ä–æ—è–≤–ª—è–µ—Ç—Å—è –ø–æ –æ—Ç–Ω–æ—à–µ–Ω–∏—é –∫ –æ—Ç—Ä–∏—Ü–∞–Ω–∏—é:
>- —É—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ *‚Äú**–Ω–µ** –¥–ª—è –ª—é–±–æ–≥–æ `A` –≤–µ—Ä–Ω–æ `B`‚Äù* —Ä–∞–≤–Ω–æ—Å–∏–ª—å–Ω–æ *‚Äú—Å—É—â–µ—Å—Ç–≤—É–µ—Ç —Ç–∞–∫–æ–µ `A`, —á—Ç–æ **–Ω–µ** –≤–µ—Ä–Ω–æ `B`‚Äù*;
>- —É—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ  *‚Äú**–Ω–µ** —Å—É—â–µ—Å—Ç–≤—É–µ—Ç —Ç–∞–∫–æ–≥–æ `A`, —á—Ç–æ –≤–µ—Ä–Ω–æ `B`‚Äù* —Ä–∞–≤–Ω–æ—Å–∏–ª—å–Ω–æ *‚Äú–¥–ª—è –ª—é–±–æ–≥–æ `A` **–Ω–µ** –≤–µ—Ä–Ω–æ `B`‚Äù*.

–ß—Ç–æ –º–æ–∂–µ—Ç –±—ã—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ–º —Ç–∞–∫–æ–≥–æ —Ç–∏–ø–∞? –ü—Ä–∏ —Ç—Ä–∞–∫—Ç–æ–≤–∫–µ —Ç–∏–ø–æ–≤ –∫–∞–∫ —É—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–π (–∏–∑–æ–º–æ—Ä—Ñ–∏–∑–º –ö–∞—Ä—Ä–∏-–•–æ–≤–∞—Ä–¥–∞) –¥–æ–∫–∞–∑–∞—Ç–µ–ª—å—Å—Ç–≤–æ–º –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç–∏ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Ç–∏–ø–∞ —è–≤–ª—è–µ—Ç—Å—è –µ–≥–æ –æ–±–∏—Ç–∞–µ–º–æ—Å—Ç—å, *—Å–≤–∏–¥–µ—Ç–µ–ª—å—Å—Ç–≤–æ–º* –∫–æ—Ç–æ—Ä–æ–π —è–≤–ª—è–µ—Ç—Å—è –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –ª—é–±–æ–≥–æ "–∑–Ω–∞—á–µ–Ω–∏—è" —ç—Ç–æ–≥–æ —Ç–∏–ø–∞. –î–ª—è –ø–æ–ª–∏–º–æ—Ä—Ñ–Ω–æ–≥–æ —Ç–∏–ø–∞ $OrStringA = \lambda A.\;A + String$ –µ–≥–æ "—Ä–µ–∞–ª–∏–∑–∞—Ü–∏–µ–π" —è–≤–ª—è–µ—Ç—Å—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ `[A] =>> A Either String`, –æ—Ç—Ä–∞–∂–∞—é—â–µ–µ "—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π" —Ö–∞—Ä–∞–∫—Ç–µ—Ä –∫–≤–∞–Ω—Ç–æ—Ä–∞ $\lambda$ ("–¥–ª—è –ª—é–±–æ–≥–æ") ‚Äì –ø—Ä–∏ *–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏* —ç—Ç–æ–≥–æ —Ç–∏–ø–∞ –º—ã —Å–∞–º–∏ –¥–æ–ª–∂–Ω—ã *–ø—Ä–µ–¥–æ—Å—Ç–∞–≤–∏—Ç—å* –ø—Ä–æ—Å—Ç–æ–π —Ç–∏–ø, —á—Ç–æ–±—ã –ø–æ–¥—Å—Ç–∞–Ω–æ–≤–∫–æ–π –µ–≥–æ –≤–º–µ—Å—Ç–æ `A` –±—ã–ª –ø–æ—Å—Ç—Ä–æ–µ–Ω –Ω–æ–≤—ã–π —Ç–∏–ø. –í —Å–ª—É—á–∞–µ —Ç–∏–ø–∞ $OrStringE$ –Ω–µ–∫–∏–π –ø—Ä–æ—Å—Ç–æ–π —Ç–∏–ø *—É–∂–µ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω* –≤ –∫–∞—á–µ—Å—Ç–≤–µ —Å–≤–∏–¥–µ—Ç–µ–ª—å—Å—Ç–≤–∞ –µ–≥–æ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è, –∏ –≤–º–µ—Å—Ç–µ —Å –Ω–∏–º –∑–Ω–∞—á–µ–Ω–∏–µ –≤—ã—Ä–∞–∂–µ–Ω–∏—è —Ç–∏–ø–∞, –≤ –∫–æ—Ç–æ—Ä–æ–º —Å–≤–æ–±–æ–¥–Ω—ã–π –ø–∞—Ä–∞–º–µ—Ç—Ä –∑–∞–º–µ–Ω—ë–Ω –Ω–∞ "—Ç–æ—Ç —Å–∞–º—ã–π" —Ç–∏–ø (–≤ –Ω–∞—à–µ–º —Å–ª—É—á–∞–µ, `Int Either String`. –¢–æ –µ—Å—Ç—å, –≤ –∏—Ç–æ–≥–µ –ø–æ–ª—É—á–∞–µ–º —Ç–∞–∫–æ–π [—ç–∫–∑–∏—Å—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–π —Ç–∏–ø](https://en.wikipedia.org/wiki/Type_system#Existential_types):
```scala
trait OrStringE:
  type A
  val value: A Either String
```

–ï—Å–ª–∏ —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π —Ç–∏–ø `OrStringA` –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–ª —Å–æ–±–æ–π **—Ñ—É–Ω–∫—Ü–∏—é** –æ—Ç *–ª—é–±–æ–≥–æ* —Ç–∏–ø–∞ `A` –≤ —Ç–∏–ø –∑–Ω–∞—á–µ–Ω–∏—è, –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–Ω—ã–π –≤—ã—Ä–∞–∂–µ–Ω–∏–µ–º, —Ç–æ —ç–∫–∑–∏—Å—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–π —Ç–∏–ø `OrStringE` –æ–ø–∏—Å—ã–≤–∞–µ—Ç **–ø–∞—Ä—É** –∏–∑ *–Ω–µ–∫–æ–≥–æ* —Ç–∏–ø–∞ `A` –∏ –∑–Ω–∞—á–µ–Ω–∏—è —Ç–∏–ø–∞, –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–Ω–æ–≥–æ –≤—ã—Ä–∞–∂–µ–Ω–∏–µ–º. –í–≤–∏–¥—É —ç—Ç–æ–≥–æ, –∏–Ω–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É—é—Ç –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–æ–µ –æ–±–æ–∑–Ω–∞—á–µ–Ω–∏–µ –¥–ª—è —ç–∫–∑–∏—Å—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã—Ö —Ç–∏–ø–æ–≤ –≤ –≤–∏–¥–µ –ø–∞—Ä—ã $\{\exists A,\; ExprA\}$, –≥–¥–µ `ExprA` ‚Äì –Ω–µ–∫–æ–µ –≤—ã—Ä–∞–∂–µ–Ω–∏–µ, –Ω–∞–ø—Ä–∏–º–µ—Ä, `A Either Strig`. –ü–µ—Ä–≤—ã–π —ç–ª–µ–º–µ–Ω—Ç —Ç–∞–∫–æ–π –ø–∞—Ä—ã –Ω–∞–∑—ã–≤–∞—é—Ç *—Å–∫—Ä—ã—Ç—ã–º —Ç–∏–ø–æ–º-—Å–≤–∏–¥–µ—Ç–µ–ª–µ–º*, –≤ —Ç–æ–º —Å–º—ã—Å–ª–µ, —á—Ç–æ –µ–≥–æ –Ω–∞–ª–∏—á–∏–µ –Ω—É–∂–Ω–æ –ª–∏—à—å —á—Ç–æ–±—ã ‚Äú–∑–∞—Å–≤–∏–¥–µ—Ç–µ–ª—å—Å—Ç–≤–æ–≤–∞—Ç—å‚Äù —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏–µ –ø–æ–¥—Ö–æ–¥—è—â–µ–≥–æ —Ç–∏–ø–∞. –ü—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ –∑–Ω–∞—á–µ–Ω–∏–π —ç–∫–∑–∏—Å—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–æ–≥–æ —Ç–∏–ø–∞ –∑–∞—á–∞—Ç—É—é —Ç—Ä–µ–±—É–µ—Ç—Å—è –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –Ω–µ —Ç–æ–ª—å–∫–æ —Å–∞–º–æ –∑–Ω–∞—á–µ–Ω–∏–µ –≤—ã—Ä–∞–∂–µ–Ω–∏—è, –Ω–æ –∏ –∫–∞–∫-—Ç–æ —É—á–µ—Å—Ç—å —Ç–∏–ø-—Å–≤–∏–¥–µ—Ç–µ–ª—å.

–¢—Ä–µ–π—Ç `OrStringE` –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–µ—Ç –º–µ—Ö–∞–Ω–∏–∑–º *–∑–∞–≤–∏—Å–∏–º—ã—Ö ([–æ—Ç –ø—É—Ç–∏](https://www.baeldung.com/scala/path-dependent-types)) —Ç–∏–ø–æ–≤* –≤ Scala. –¢–∞–∫–∏–µ —Ç–∏–ø—ã —Ä–µ–∞–ª–∏–∑—É—é—Ç –º–µ—Ö–∞–Ω–∏–∑–º –ø–æ–∑–¥–Ω–µ–≥–æ —Å–≤—è–∑—ã–≤–∞–Ω–∏—è, –∫–æ–≥–¥–∞ —Ç–∏–ø –∑–Ω–∞—á–µ–Ω–∏—è –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è *–¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏*, –≤–æ –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –º–µ—Ç–∞-–∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏, –Ω–∞ –∫–æ—Ç–æ—Ä—É—é —Å—Å—ã–ª–∞–µ—Ç—Å—è —ç—Ç–æ –∑–Ω–∞—á–µ–Ω–∏–µ. –ù–∞ —ç—Ç–∞–ø–µ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏ –Ω–µ –ø–æ–ª—É—á–∏—Ç—Å—è –≤—ã—è—Å–Ω–∏—Ç—å, –∫–∞–∫–æ–≥–æ —Ç–∏–ø–∞ –±—É–¥–µ—Ç –≤—ã—Ä–∞–∂–µ–Ω–∏–µ `(a: OrStringE).value`.

–ù–æ, —É—á–∏—Ç—ã–≤–∞—è, —á—Ç–æ —ç–ª–µ–º–µ–Ω—Ç —ç–∫–∑–∏—Å—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–æ–≥–æ —Ç–∏–ø–∞ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π *–ø–∞—Ä—É* –∏–∑ —Ç–∏–ø–∞ –∏ –∑–Ω–∞—á–µ–Ω–∏—è, —Ç–æ –º–æ–∂–Ω–æ –ø—Ä–∏–º–µ–Ω–∏—Ç—å –∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ –ß—ë—Ä—á—É, –¥–æ–ø—É—Å–∫–∞—é—â–µ–µ —Å—Ç–∞—Ç–∏—á–µ—Å–∫—É—é —Ç–∏–ø–∏–∑–∞—Ü–∏—é (—Ä–∞–Ω–Ω–µ–µ —Å–≤—è–∑—ã–≤–∞–Ω–∏–µ). –í —Å–ª—É—á–∞–µ –æ–±—ã—á–Ω–æ–≥–æ –ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è —Ç–∏–ø–æ–≤ –∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ –ß—ë—Ä—á–∞ –¥–∞—ë—Ç $PairAB = \forall X.\; (A \rightarrow B \rightarrow X) \rightarrow X$. –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ, –¥–ª—è —ç–∫–∑–∏—Å—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–æ–≥–æ —Ç–∏–ø–∞, –ø–æ—Å—Ç—Ä–æ–µ–Ω–Ω–æ–≥–æ –Ω–∞ –≤—ã—Ä–∞–∂–µ–Ω–∏–∏ `Expr`, –ø–æ–ª—É—á–∞–µ—Ç—Å—è —Ç–∞–∫–æ–µ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–æ–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ:
$$\{\exists X,\; Expr\} = \forall Y.\; (\forall X.\; Expr \rightarrow Y) \rightarrow Y$$
–ù–∞ Scala –º–æ–∂–Ω–æ —Ç–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º –∑–∞–ø–∏—Å–∞—Ç—å —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π –∏ —ç–∫–∑–∏—Å—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–π —Ç–∏–ø—ã, –ø–æ—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ –Ω–∞ –æ–¥–Ω–æ–º –∏ —Ç–æ–º –∂–µ –≤—ã—Ä–∞–∂–µ–Ω–∏–∏ `Expr`:
```scala
type Universal   = [Expr[_]] =>> [X] =>> Expr[X] // Universal[F] ‚â° F
type Existential = [Expr[_]] =>> [Y] => ([X] => Expr[X] => Y) => Y

type ListU = [A] =>> Universal[List][A] // List[A]
type ListE = Existential[List] // [Y] => ([X] => List[X] => Y) => Y

val listUInt: ListU[Int] = List(4, 2)
val listEInt: ListE = // {*Int, List[Int]}: {‚àÉX, List[X]}
	[Y] => (continuation: [X] => List[X] => Y) => continuation(listUInt)

listEInt[String]([X] => (_: List[X]).mkString("; ")) // "4; 2"
```
–í –∫–æ–¥–µ Scala —Ö–æ—Ä–æ—à–æ –≤–∏–¥–Ω—ã –≤—Å–µ ‚Äú—Å—Ç—Ä–µ–ª–æ—á–∫–∏‚Äù –∫–æ–¥–∏—Ä–æ–≤–∫–∏ –ß—ë—Ä—á–∞. –í —Ç–∞–∫–æ–º –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–∏ —ç–∫–∑–∏—Å—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–π —Ç–∏–ø –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π *–ø–æ–ª–∏–º–æ—Ä—Ñ–Ω—É—é —Ñ—É–Ω–∫—Ü–∏—é*, –ø—Ä–∏–Ω–∏–º–∞—é—â—É—é –≤ –∫–∞—á–µ—Å—Ç–≤–µ –∞—Ä–≥—É–º–µ–Ω—Ç–∞ –¥—Ä—É–≥—É—é –ø–æ–ª–∏–º–æ—Ä—Ñ–Ω—É—é —Ñ—É–Ω–∫—Ü–∏—é-–ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ `continuation`. –í –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–∏ –∑–Ω–∞—á–µ–Ω–∏—è `listEInt` —ç—Ç–æ–≥–æ —Ç–∏–ø–∞ –≤ —Ñ—É–Ω–∫—Ü–∏—é-–ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ –ø–µ—Ä–µ–¥–∞—ë—Ç—Å—è –∑–Ω–∞—á–µ–Ω–∏–µ `listUInt` –ø—Ä–æ—Å—Ç–æ–≥–æ —Ç–∏–ø–∞, –ø–æ–ª—É—á–µ–Ω–Ω–æ–≥–æ –ø–æ–¥—Å—Ç–∞–Ω–æ–≤–∫–æ–π –≤ —Ç–∏–ø-–≤—ã—Ä–∞–∂–µ–Ω–∏–µ `List[_]` –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Ç–∏–ø–∞ `Int`. –§–∞–∫—Ç —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è ‚Äú–ø–æ–¥—Ö–æ–¥—è—â–µ–≥–æ‚Äù —Ç–∏–ø–∞ `Int` —Å–ø—Ä—è—Ç–∞–Ω –≤ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π `listUInt: List[Int]`, –≤ —Ç–æ –≤—Ä–µ–º—è –∫–∞–∫ —Ä–µ–∑—É–ª—å—Ç–∏—Ä—É—é—â–∏–π —Ç–∏–ø –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π `listEInt` —É–∂–µ –Ω–µ —Å–æ–¥–µ—Ä–∂–∏—Ç —É–ø–æ–º–∏–Ω–∞–Ω–∏—è —Å–∫—Ä—ã—Ç–æ–≥–æ —Ç–∏–ø–∞-—Å–≤–∏–¥–µ—Ç–µ–ª—è. –¢–∞–∫–æ–µ —Å–æ–∫—Ä—ã—Ç–∏–µ –æ—Å—É—â–µ—Å—Ç–≤–ª—è–µ—Ç—Å—è —Å –ø–æ–º–æ—â—å—é —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–æ–π –∫–≤–∞–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –æ–±–æ–±—â—ë–Ω–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–∏ `continuation` ‚Äì –µ—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Ö–æ—á–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ *–Ω–µ–∫–æ–≥–æ* –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω–æ–≥–æ —Ç–∏–ø–∞, —Ç–æ –æ–Ω –¥–æ–ª–∂–µ–Ω –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–∏—Ç—å –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å *–ª—é–±—ã–º–∏* —Ç–∏–ø–∞–º–∏.

–ù–∞–∫–æ–Ω–µ—Ü, –±–µ–∑–æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ –∫–æ–¥–∏—Ä–æ–≤–∫–∏ –ß—ë—Ä—á–∞, —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–µ —Ç–∏–ø—ã —Å–∞–º–∏ –ø–æ —Å–µ–±–µ –º–æ–≥—É—Ç –æ–ø–∏—Å—ã–≤–∞—Ç—å ‚Äú—ç–∫–∑–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å‚Äù —Ç–∏–ø–æ–≤:
```scala 
trait Number[A]:
  def zero: A
¬† def one: A
¬† def sum(x: A, y: A): A
¬† def mul(x: A, y: A): A
```
–ó–Ω–∞—á–µ–Ω–∏—è —Ç—Ä–µ–π—Ç–∞ `Number`, –∫–æ–Ω–∫—Ä–µ—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –ø—Ä–æ—Å—Ç—ã–º —Ç–∏–ø–æ–º, –¥–æ–∫–∞–∑—ã–≤–∞—é—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –ø–µ—Ä–µ—á–∏—Å–ª–µ–Ω–Ω—ã—Ö –≤ —Ç—Ä–µ–π—Ç–µ —Ñ—É–Ω–∫—Ü–∏–π –¥–ª—è —ç—Ç–æ–≥–æ —Ç–∏–ø–∞:
```scala
val boolAsNumber = new Number[Boolean]:
  def zero = false
  def one = true
  def sum = _ || _
  def mul = _ && _
```
–°–æ–≤–æ–∫—É–ø–Ω–æ—Å—Ç—å –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π —Ç–∏–ø–∞ `Number[A]` –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Ç–µ —Ç–∏–ø—ã, –¥–ª—è –∫–æ—Ç–æ—Ä—ã—Ö –¥–æ—Å—Ç—É–ø–Ω—ã –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏, –æ–ø–∏—Å–∞–Ω–Ω—ã–µ —Ç—Ä–µ–π—Ç–µ. –¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π —Ç–∏–ø $\forall A.\; Number[A]$ —Ç—Ä–∞–∫—Ç—É–µ—Ç—Å—è, –∫–∞–∫ –æ–ø–∏—Å–∞–Ω–∏–µ —ç–∫–∑–∏—Å—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–æ–≥–æ —Ç–∏–ø–∞ $\{\exists A,\; Number[A]\}$. –ü—Ä–∏ —ç—Ç–æ–º —Å–∞–º –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä —Ç–∏–ø–æ–≤ `Number[A]` –ø—Ä–∏ —Ç–∞–∫–æ–π —Ç—Ä–∞–∫—Ç–æ–≤–∫–µ –æ–ø–∏—Å—ã–≤–∞–µ—Ç *–∫–ª–∞—Å—Å —Ç–∏–ø–æ–≤*.

–í —Å—Ç–∞—Ç—å–µ –ë–∞—Ä—Ç–æ—à–∞ –ú–∏–ª–µ–≤—Å–∫–∏ [Parametricity: Money for Nothing and Theorems for Free](https://bartoszmilewski.com/2014/09/22/parametricity-money-for-nothing-and-theorems-for-free/) –≥–æ–≤–æ—Ä–∏—Ç—Å—è –æ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞—Ö –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã—Ö —Ç–∏–ø–æ–≤ (—Å–º. —Ç–∞–∫–∂–µ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—É—é —Å—Ç–∞—Ç—å—é –ª—è–º–±–¥–∞-–º–µ–Ω–∞ –§–∏–ª–∏–ø–ø–∞ –í–æ–¥–ª–µ—Ä–∞ [Theorems for free!](https://users.cs.utah.edu/~mflatt/past-courses/cs7520/public_html/s06/wadler89.pdf)). –ù–æ –¥—É–∞–ª—å–Ω—ã–µ —ç–∫–∑–∏—Å—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ —Ç–∏–ø—ã, –≤ —Å–≤–æ—é –æ—á–µ—Ä–µ–¥—å, –Ω–µ –º–æ–≥—É—Ç –ø–æ—Ö–≤–∞—Å—Ç–∞—Ç—å –∞–Ω–∞–ª–æ–≥–∏—á–Ω—ã–º–∏ —Å–≤–æ–π—Å—Ç–≤–∞–º–∏ ‚Äì –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ç–∏–ø–æ–≤ –∞–Ω–∞–ª–æ–≥–∏—á–Ω—ã—Ö –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–Ω–æ–º—É –≤—ã—à–µ —Ç—Ä–µ–π—Ç—É `OrStringE` –æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –Ω–µ—É–¥–æ–±–Ω—ã–º (—Ç—Ä–µ–±—É—é—Ç –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–π –≤–∞–ª–∏–¥–∞—Ü–∏–∏ ‚Äú—Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ‚Äù —Ç–∏–ø–∞ –≤–æ –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è). –ü–æ—ç—Ç–æ–º—É –∏—â—É—Ç—Å—è —Ä–∞–∑–ª–∏—á–Ω—ã–µ —Å–ø–æ—Å–æ–±—ã –∏–∑–±–∞–≤–∏—Ç—Å—è –æ—Ç —è–≤–Ω–æ–π —ç–∫–∑–∏—Å—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏, —Å–≤–µ—Å—Ç–∏ –µ—ë –∫ —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–º —Ç–∏–ø–∞–º. –í –º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –ª–æ–≥–∏–∫–µ —Ç–∞–∫–æ–π —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –∞–ª–≥–æ—Ä–∏—Ç–º –ø—Ä–µ–≤—Ä–∞—â–µ–Ω–∏—è —ç–∫–∑–∏—Å—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã—Ö –≤—ã—Å–∫–∞–∑—ã–≤–∞–Ω–∏–π –≤ —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–µ –∏–∑–≤–µ—Å—Ç–µ–Ω –ø–æ–¥ –Ω–∞–∑–≤–∞–Ω–∏–µ–º ‚Äú[*—Å–∫–æ–ª–µ–º–∏–∑–∞—Ü–∏—è*](https://en.wikipedia.org/wiki/Skolem_normal_form)‚Äú.

>–í Scala 2 [—Å—É—â–µ—Å—Ç–≤–æ–≤–∞–ª](https://www.scala-lang.org/files/archive/spec/2.13/03-types.html#existential-types) —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π —Å–∏–Ω—Ç–∞–∫—Å–∏—Å –¥–ª—è —ç–∫–∑–∏—Å—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã—Ö —Ç–∏–ø–æ–≤ (—Å–º. —Ç–∞–∫–∂–µ [Existential Types in Scala](https://dzone.com/articles/existential-types-in-scala)):
>`type F = SomeClass[A] forSome { type A }`
>–ü–æ–∑–¥–Ω–µ–µ —Ç–∞–∫–æ–π —Å–∏–Ω—Ç–∞–∫—Å–∏—Å [—Ä–µ—à–∏–ª–∏ —É–ø—Ä–∞–∑–¥–Ω–∏—Ç—å](https://docs3.scala-lang.org/scala3/reference/dropped-features/existential-types.html#), —Å—Å—ã–ª–∞—è—Å—å –Ω–∞ —Å–ª–æ–∂–Ω–æ—Å—Ç–∏ –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä–æ–º –∏ –Ω–∞ —Ç–æ, —á—Ç–æ —Å—Ö–æ–∂–∏—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –º–æ–∂–Ω–æ –¥–æ–±–∏—Ç—å—Å—è —Å –ø–æ–º–æ—â—å—é –¥—Ä—É–≥–∏—Ö —Å–∏–Ω—Ç–∞–∫—Å–∏—á–µ—Å–∫–∏—Ö –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏–π.

<anchor>ad_hoc_polymorphism</anchor>
### –°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π –ø–æ–ª–∏–º–æ—Ä—Ñ–∏–∑–º

–£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π –ø–æ–ª–∏–º–æ—Ä—Ñ–∏–∑–º —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –∏–¥–µ–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–∏–∑–∞—Ü–∏–∏ –∞–ª–≥–æ—Ä–∏—Ç–º–∞ —Ç–∏–ø–∞–º–∏, –∫–æ–≥–¥–∞ –æ–¥–∏–Ω –∫–æ–¥ –ø–æ–∑–≤–æ–ª—è–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å —Å *–ª—é–±—ã–º–∏* —Ç–∏–ø–∞–º–∏. –ö–æ–Ω—Ü–µ–ø—Ü–∏—è —ç–∫–∑–∏—Å—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –¥—É–∞–ª—å–Ω–æ–µ –ø–æ–Ω—è—Ç–∏–µ ‚Äì *—Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π –ø–æ–ª–∏–º–æ—Ä—Ñ–∏–∑–º*, –∫–æ–≥–¥–∞ –∫–æ–¥ –ø—Ä–µ–¥–ø–æ–ª–∞–≥–∞–µ—Ç *—Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏–µ –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö* —Ç–∏–ø–æ–≤, –¥–ª—è –∫–æ—Ç–æ—Ä—ã—Ö –æ–Ω –±—É–¥–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–º.

–ü–æ–∂–∞–ª—É–π, —Å–∞–º—ã–π –ø—Ä–æ—Å—Ç–æ–π —Å—Ü–µ–Ω–∞—Ä–∏–π, –∫–æ–≥–¥–∞ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π –ø–æ–ª–∏–º–æ—Ä—Ñ–∏–∑–º ‚Äì —ç—Ç–æ –ø–µ—Ä–µ–≥—Ä—É–∑–∫–∞ —Ñ—É–Ω–∫—Ü–∏–π:
```scala
def add(a: Int,    b: Int)    = a + b      // –ø–µ—Ä–µ–≥—Ä—É–∑–∫–∞ –¥–ª—è Int
def add(a: String, b: String) = a concat b // –ø–µ—Ä–µ–≥—Ä—É–∑–∫–∞ –¥–ª—è String

add( 4,   2 )    // 6
add("4", "2")    // "42"
add(true, false) // –û–®–ò–ë–ö–ê!!! –î–ª—è Boolean –Ω–µ—Ç –ø–µ—Ä–µ–≥—Ä—É–∑–∫–∏ add
```
–í —Ç—Ä—ë—Ö –ø–æ—Å–ª–µ–¥–Ω–∏—Ö —Å—Ç—Ä–æ–∫–∞—Ö –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –æ–¥–Ω–æ –∏ —Ç–æ –∂–µ –∏–º—è —Ñ—É–Ω–∫—Ü–∏–∏ `add` –¥–ª—è –∑–Ω–∞—á–µ–Ω–∏–π —Ä–∞–∑–Ω—ã—Ö —Ç–∏–ø–æ–≤, –Ω–æ –ø—Ä–∏ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏ –≤ –ø–æ—Å–ª–µ–¥–Ω–µ–π —Å—Ç—Ä–æ—á–∫–µ –±—É–¥–µ—Ç –æ—à–∏–±–∫–∞, —Ç–∞–∫ –∫–∞–∫ *—Å—É—â–µ—Å—Ç–≤—É—é—Ç* —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ `add` —Ç–æ–ª—å–∫–æ –¥–ª—è –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤ —Ç–∏–ø–∞ `Int` –∏ `String`, –Ω–æ –Ω–µ –¥–ª—è `Boolean`, –∏–ª–∏ –∫–∞–∫–∏—Ö-–ª–∏–±–æ –¥—Ä—É–≥–∏—Ö —Ç–∏–ø–æ–≤. –ù–∞ —ç—Ç–æ–º –ø—Ä–∏–º–µ—Ä–µ –≤–∏–¥–Ω–æ, –ø–æ—á–µ–º—É —Ç–∞–∫–æ–π –ø–æ–ª–∏–º–æ—Ä—Ñ–∏–∑–º –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è *—Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–º* ‚Äì –æ–Ω —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ –¥–ª—è —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ –æ–ø–∏—Å–∞–Ω–Ω—ã—Ö —Å–ª—É—á–∞–µ–≤ (—Ç–∞–∫–∂–µ –≥–æ–≤–æ—Ä—è—Ç *ad hoc –ø–æ–ª–∏–º–æ—Ä—Ñ–∏–∑–º* –æ—Ç –ª–∞—Ç–∏–Ω—Å–∫–æ–π —Ñ—Ä–∞–∑—ã ‚Äúad hoc‚Äù ‚Äì ‚Äú–¥–ª—è –¥–∞–Ω–Ω–æ–≥–æ —Å–ª—É—á–∞—è‚Äù).

–î—Ä—É–≥–∞—è —Ä–∞–∑–Ω–æ–≤–∏–¥–Ω–æ—Å—Ç—å —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ–≥–æ –ø–æ–ª–∏–º–æ—Ä—Ñ–∏–∑–º–∞ ‚Äì —ç—Ç–æ *–ø–æ–ª–∏–º–æ—Ä—Ñ–∏–∑–º –ø—Ä–∏–≤**–µ**–¥–µ–Ω–∏—è* (–Ω–µ –ø—É—Ç–∞—Ç—å —Å üëª!). –ò–º–µ–µ—Ç—Å—è –≤ –≤–∏–¥—É –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Å–æ–∑–¥–∞–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö —Ñ—É–Ω–∫—Ü–∏–π –Ω–µ—è–≤–Ω–æ–≥–æ –ø—Ä–∏–≤–µ–¥–µ–Ω–∏—è —Ç–∏–ø–æ–≤, —Å—É—â–µ—Å—Ç–≤—É—é—â–∞—è –≤ —Ä–∞–∑–Ω—ã—Ö —è–∑—ã–∫–∞—Ö –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è. –í Scala 3 [–Ω–µ—è–≤–Ω—ã–µ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è —Ä–µ–∞–ª–∏–∑–æ–≤—ã–≤–∞—Ç—å](https://docs.scala-lang.org/ru/scala3/book/ca-implicit-conversions.html) –ø–æ—Å—Ä–µ–¥—Å—Ç–≤–æ–º –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–∏—è *–Ω–µ—è–≤–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π* –æ–±–æ–±—â—ë–Ω–Ω–æ–≥–æ —Ç–∏–ø–∞ `Conversion`:
```scala
given Conversion[Int,     String] = _.toString
given Conversion[Boolean, String] = _.toString

def palindrome(str: String) = str concat str.reverse

palindrome(42)    // "4224"
palindrome(true)  // "trueeurt"
palindrome(4.2)   // –û–®–ò–ë–ö–ê! –∑–Ω–∞—á–µ–Ω–∏—è Double –Ω–µ–ª—å–∑—è —Ç—É–¥–∞, –≥–¥–µ –Ω—É–∂–µ–Ω String
```
–í–∏–¥—è, —á—Ç–æ –≤ —Ñ—É–Ω–∫—Ü–∏—é, –ø—Ä–∏–Ω–∏–º–∞—é—â—É—é `String`, –ø–æ—Å—ã–ª–∞—é—Ç—Å—è –∑–Ω–∞—á–µ–Ω–∏—è –¥—Ä—É–≥–∏—Ö —Ç–∏–ø–æ–≤ *–∫–æ–º–ø–∏–ª—è—Ç–æ—Ä —Å–∞–º –∏—â–µ—Ç* –≤ –æ–±–ª–∞—Å—Ç–∏ –≤–∏–¥–∏–º–æ—Å—Ç–∏ –Ω–µ—è–≤–Ω—ã–µ –Ω—É–∂–Ω—ã–µ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è. –í –ø–æ—Å–ª–µ–¥–Ω–∏—Ö —Å—Ç—Ä–æ—á–∫–∞—Ö —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π –ø–æ–ª–∏–º–æ—Ä—Ñ–∏–∑–º —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –ø—Ä—è–º–æ –ø–µ—Ä–µ–¥ –≤—ã–∑–æ–≤–æ–º `palindrome`, –Ω–µ—è–≤–Ω–æ –ø—Ä–∏–≤–æ–¥—è –ø–µ—Ä–µ–¥–∞–≤–∞–µ–º—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –∫ –Ω—É–∂–Ω–æ–º—É —Ç–∏–ø—É —Å –ø–æ–º–æ—â—å—é —Ñ—É–Ω–∫—Ü–∏–π –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è, –µ—Å–ª–∏ —Ç–∞–∫–æ–≤—ã–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω—ã.

–ö—Å—Ç–∞—Ç–∏, –≤ —Ç–æ—á–Ω–æ—Å—Ç–∏ —Ç–∞–∫–∏–º –∂–µ –æ–±—Ä–∞–∑–æ–º —Ä–∞–±–æ—Ç–∞–µ—Ç –û–û–ü-—à–Ω—ã–π –ø–æ–ª–∏–º–æ—Ä—Ñ–∏–∑–º –ø–æ–¥—Ç–∏–ø–æ–≤, –∫–æ—Ç–æ—Ä—ã–π –æ–±—ã—á–Ω–æ –æ—Ç–Ω–æ—Å—è—Ç, –Ω–∞–æ–±–æ—Ä–æ—Ç, –∫ —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–æ–º—É –ø–æ–ª–∏–º–æ—Ä—Ñ–∏–∑–º—É, –∏–º–µ—è –≤ –≤–∏–¥—É –µ–≥–æ –º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏—é —Å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è–º–∏ –ø–æ–¥—Ç–∏–ø–∏–∑–∞—Ü–∏–∏. –≠—Ç–∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –∏ –µ—Å—Ç—å –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏–µ –Ω–µ—è–≤–Ω–æ–≥–æ –ø—Ä–∏–≤–µ–¥–µ–Ω–∏—è –æ—Ç –ø–æ–¥—Ç–∏–ø–∞ –∫ —Å—É–ø–µ—Ä—Ç–∏–ø—É. –¢–æ–ª—å–∫–æ –≤ —ç—Ç–æ–º —Å–ª—É—á–∞–µ –Ω–µ –Ω—É–∂–Ω–æ –æ–±—ä—è–≤–ª—è—Ç—å –∏—Ö –≤—Ä—É—á–Ω—É—é ‚Äì –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä —Å–¥–µ–ª–∞–µ—Ç —ç—Ç–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏, –∫–∞–∫ —Ç–æ–ª—å–∫–æ –≤—ã –æ–±—ä—è–≤–∏—Ç–µ —Å–≤–æ–π –∫–ª–∞—Å—Å –Ω–∞—Å–ª–µ–¥–Ω–∏–∫–æ–º —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–æ–≥–æ. 
```scala
trait Base  { def method(): Int }
class Child { def method() = 42; val i = 0 } // –ù–µ—Ç –Ω–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è,
given Conversion[Child, Base] = child =>     // –Ω–æ –µ—Å—Ç—å –Ω–µ—è–≤–Ω–æ–µ –ø—Ä–∏–≤–µ–¥–µ–Ω–∏–µ!
  new Base { def method() = child.method() }

val child = new Child
def getInt(producer: Base) = producer.method()
getInt(child) // –ø–æ–ª–∏–º–æ—Ä—Ñ–∏–∑–º –ø—Ä–∏–≤–µ–¥–µ–Ω–∏—è!
```
–¢–æ, —á—Ç–æ –≤ —Å–ª—É—á–∞–µ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏—è –Ω–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è –ø—Ä–∏ –ø—Ä–∏–≤–µ–¥–µ–Ω–∏–∏ —Ç–∏–ø–æ–≤ –ø—Ä–∏—Ö–æ–¥–∏—Ç—Å—è —Å–æ–∑–¥–∞–≤–∞—Ç—å –≤ –ø–∞–º—è—Ç–∏ –Ω–æ–≤—ã–π —ç–∫–∑–µ–º–ø–ª—è—Ä, –Ω–µ —Å—É—â–µ—Å—Ç–≤–µ–Ω–Ω–æ, —Ç–∞–∫ –∫–∞–∫ —Å–µ–π—á–∞—Å –º—ã —Ä–∞—Å—Å–º–∞—Ç—Ä–∏–≤–∞–µ–º —Ç–æ–ª—å–∫–æ –≤–µ—Ä—Ö–Ω–µ—É—Ä–æ–≤–Ω–µ–≤—É—é —Å–µ–º–∞–Ω—Ç–∏–∫—É, –Ω–µ –∑–∞–º–æ—Ä–∞—á–∏–≤–∞—è—Å—å —Å –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–µ–π. –ï—â—ë –æ–¥–Ω–∏–º –æ—Ç–ª–∏—á–∏–µ–º –æ—Ç –Ω–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è —è–≤–ª—è–µ—Ç—Å—è —Ç–æ, —á—Ç–æ —ç–∫–∑–µ–º–ø–ª—è—Ä `Base` ‚Äú–Ω–µ –ø–æ–º–Ω–∏—Ç‚Äù –æ –ø–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω–æ–º —Ç–∏–ø–µ `Child`. –≠—Ç–æ –Ω–µ –ø–æ–∑–≤–æ–ª–∏—Ç –≤—ã–ø–æ–ª–Ω–∏—Ç—å *–ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–µ* –æ–±—Ä–∞—Ç–Ω–æ–µ –ø—Ä–∏–≤–µ–¥–µ–Ω–∏–µ —Ç–∏–ø–æ–≤ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ø—Ä–∏ —Å–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–∏ —Å —à–∞–±–ª–æ–Ω–∞–º–∏), –∫–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–ª–æ —Å –Ω–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ–º, –∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ–ª—è `i`. 

–í–æ–æ–±—â–µ, ‚Äú–ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å‚Äù –∫–ª–∞—Å—Å–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–∏—è –ø–æ–ª–∏–º–æ—Ä—Ñ–∏–∑–º–∞ –ø–æ–¥—Ç–∏–ø–æ–≤ (—É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π –∏–ª–∏ —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π) —Å–æ–≤–µ—Ä—à–µ–Ω–Ω–æ –Ω–µ –ø—Ä–∏–Ω—Ü–∏–ø–∏–∞–ª—å–Ω–∞, –Ω–æ –≤–∞–∂–Ω–æ –ø–æ–Ω–∏–º–∞—Ç—å, –∫–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º –æ–±–æ—Å–Ω–æ–≤—ã–≤–∞—é—Ç—Å—è —Ä–∞–∑–Ω—ã–µ —Ç–æ—á–∫–∏ –∑—Ä–µ–Ω–∏—è –Ω–∞ —ç—Ç–æ—Ç –≤–æ–ø—Ä–æ—Å.

–í –ø—Ä–∏–≤–µ–¥—ë–Ω–Ω—ã—Ö –≤—ã—à–µ —Ñ—Ä–∞–≥–º–µ–Ω—Ç–∞—Ö –∫–æ–¥–∞ –ø—Ä–∏ –æ–±—ä—è–≤–ª–µ–Ω–∏–∏ –Ω–µ—è–≤–Ω—ã—Ö –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–π –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–ª—é—á–µ–≤–æ–µ —Å–ª–æ–≤–æ `given`. –° –ø–æ–º–æ—â—å—é —ç—Ç–æ–≥–æ —Å–ª–æ–≤–∞ –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è –Ω–µ—è–≤–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–æ–≥–æ —Ç–∏–ø–∞, –Ω–æ —ç—Ç–æ –ª–∏—à—å –º–∞–ª—ã–π —ç–ª–µ–º–µ–Ω—Ç –æ—á–µ–Ω—å –º–æ—â–Ω–æ–≥–æ –º–µ—Ö–∞–Ω–∏–∑–º–∞ —è–∑—ã–∫–∞ Scala, –Ω–∞–∑—ã–≤–∞–µ–º–æ–≥–æ ‚Äú[–∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω—ã–µ –∞–±—Å—Ç—Ä–∞–∫—Ü–∏–∏](https://docs.scala-lang.org/ru/scala3/book/ca-contextual-abstractions-intro.html)‚Äù ([—Ç—É—Ç](https://docs.scala-lang.org/scala3/reference/contextual/) –ø–æ–¥—Ä–æ–±–Ω–µ–µ). –≠—Ç–æ—Ç –º–µ—Ö–∞–Ω–∏–∑–º —É–∂–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –≤ —è–∑—ã–∫–∞—Ö ‚Äú–¥–æ–∫–∞–∑–∞—Ç–µ–ª—å—Å—Ç–≤–∞ —Ç–µ–æ—Ä–µ–º‚Äù, –≤—Ä–æ–¥–µ Coq –∏–ª–∏ Agda, –Ω–æ –∏ –≤–æ –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö –ø–æ–ø—É–ª—è—Ä–Ω—ã—Ö —è–∑—ã–∫–∞—Ö –ø–æ—è–≤–ª—è—é—Ç—Å—è –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —á—Ç–æ-—Ç–æ –ø–æ—Ö–æ–∂–µ–µ. –ü–æ–¥ ‚Äú–∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º‚Äù –≤ –æ–±—â–µ–º —Å–ª—É—á–∞–µ –ø–æ–¥—Ä–∞–∑—É–º–µ–≤–∞–µ—Ç—Å—è –æ–±–ª–∞—Å—Ç—å –≤–∏–¥–∏–º–æ—Å—Ç–∏ –≤ –∫–æ—Ç–æ—Ä–æ–π –¥–æ—Å—Ç—É–ø–Ω—ã –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ –æ–±—ä—è–≤–ª–µ–Ω–Ω—ã–µ —Ä–∞–Ω–µ–µ —Ç–∏–ø—ã, —Ñ—É–Ω–∫—Ü–∏–∏ –∏ –∑–Ω–∞—á–µ–Ω–∏—è, –∞ –∫–ª—é—á–µ–≤–æ–π –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç—å—é —è–≤–ª—è–µ—Ç—Å—è –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å [*–≤—ã–≤–æ–¥–∞ —Ç–µ—Ä–º–æ–≤*](https://users.scala-lang.org/t/what-is-so-called-term-inference/8912/2) ‚Äì –∫–æ–≥–¥–∞ *–∫–æ–º–ø–∏–ª—è—Ç–æ—Ä —Å–∞–º –∏—â–µ—Ç –∑–Ω–∞—á–µ–Ω–∏—è –Ω—É–∂–Ω–æ–≥–æ —Ç–∏–ø–∞* (–Ω–∞–ø—Ä–∏–º–µ—Ä, –Ω–µ—è–≤–Ω—ã–µ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è, –∫–∞–∫ –±—ã–ª–æ –≤—ã—à–µ). –ò, –∫—Å—Ç–∞—Ç–∏, —ç—Ç–æ –µ—â—ë –æ–¥–∏–Ω —Å–ø–æ—Å–æ–± –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏—è –∏–∑ –≤—Å–µ–ª–µ–Ω–Ω–æ–π —Ç–∏–ø–æ–≤ –≤–æ –≤—Å–µ–ª–µ–Ω–Ω—É—é –∑–Ω–∞—á–µ–Ω–∏–π üòâ.

–í –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä–µ Scala —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–æ–∏—Å–∫ –Ω–µ—è–≤–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π –æ–±–æ–±—â—ë–Ω–Ω–æ–≥–æ —Ç–∏–ø–∞ `Conversion`, –ø–∞—Ä–∞–º–µ—Ç—Ä–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –Ω—É–∂–Ω—ã–º–∏ —Ç–∏–ø–∞–º–∏. –ù–æ –µ—Å—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∏ —è–≤–Ω–æ —É–∫–∞–∑–∞—Ç—å –µ–º—É, –Ω–µ—è–≤–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –∫–∞–∫–∏—Ö —Ç–∏–ø–æ–≤ –∏—Å–∫–∞—Ç—å –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ. –¢–∞–∫—É—é –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∑–∞—á–∞—Å—Ç—É—é –æ—Ç–Ω–æ—Å—è—Ç –∫ –æ—Ç–¥–µ–ª—å–Ω–æ–π —Ä–∞–∑–Ω–æ–≤–∏–¥–Ω–æ—Å—Ç–∏ —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ–≥–æ –ø–æ–ª–∏–º–æ—Ä—Ñ–∏–∑–º–∞:
```scala
def palindromeDouble(dob: Double)(using dobToStr: Conversion[Double, String]) =
    palindrome(dobToStr(dob))

given Conversion[Double, String] = _.toString // –≠—Ç–æ –∑–Ω–∞—á–µ–Ω–∏–µ
palindromeDouble(4.2) // "4.22.4"             // —Å—é–¥–∞ –ø–µ—Ä–µ–¥–∞—è—ë—Ç—Å—è –Ω–µ—è–≤–Ω–æ!
```
–ó–¥–µ—Å—å `palindromeDouble` –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –∞—Ä–≥—É–º–µ–Ω—Ç —Ç–∏–ø–∞ `Double`, –∞ –¥–∞–ª–µ–µ —É–∫–∞–∑–∞–Ω –µ—â—ë –æ–¥–∏–Ω –ø–∞—Ä–∞–º–µ—Ç—Ä —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –∫–ª—é—á–µ–≤–æ–≥–æ —Å–ª–æ–≤–∞ `using`. –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –Ω–µ –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å –≤ —Ñ—É–Ω–∫—Ü–∏—é –∑–Ω–∞—á–µ–Ω–∏–µ —Ç–∏–ø–∞ `Conversion[Double, String]` *—è–≤–Ω–æ* ‚Äì –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä —Å–∞–º –Ω–∞–π–¥—ë—Ç –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ –Ω—É–∂–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –∏ –ø–µ—Ä–µ–¥–∞—Å—Ç –≤ —Ñ—É–Ω–∫—Ü–∏—é, –Ω–æ —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –∑–Ω–∞—á–µ–Ω–∏–µ —ç—Ç–æ–≥–æ —Ç–∏–ø–∞ *—Å—É—â–µ—Å—Ç–≤—É–µ—Ç* –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ, –±—ã–ª–æ –ø–æ–º–µ—â–µ–Ω–æ —Ç—É–¥–∞ *—Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ*. –ö–æ–Ω–µ—á–Ω–æ –∂–µ, –Ω–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –ø–µ—Ä–µ–¥ –∫–∞–∂–¥—ã–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –Ω–µ—è–≤–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π —Ç—Ä–µ–±—É–µ—Ç—Å—è —è–≤–Ω–æ –ø—Ä–æ–ø–∏—Å—ã–≤–∞—Ç—å –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ `given`. –ò—Ö –º–æ–∂–Ω–æ, –Ω–∞–ø—Ä–∏–º–µ—Ä, –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –∏–∑ –¥—Ä—É–≥–∏—Ö –ø–∞–∫–µ—Ç–æ–≤, –∏–ª–∏ –ø—Ä–æ–±—Ä–∞—Å—ã–≤–∞—Ç—å –≤–Ω—É—Ç—Ä—å –º–µ—Ç–æ–¥–∞ —Å –ø–æ–º–æ—â—å—é `using`. –ê–ª–≥–æ—Ä–∏—Ç–º –ø–æ–∏—Å–∫–∞ –Ω–µ—è–≤–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π —Ö–æ—Ä–æ—à–æ —Ä–∞—Å–∫—Ä—ã–≤–∞–µ—Ç—Å—è –≤ —ç—Ç–æ–º –æ—Ç–≤–µ—Ç–µ –Ω–∞ –≤–æ–ø—Ä–æ—Å [Where does Scala look for implicits?](https://stackoverflow.com/questions/5598085/where-does-scala-look-for-implicits/5598107#5598107).

> –í—ã–≤–æ–¥ —Ç–µ—Ä–º–æ–≤ —è–≤–ª—è–µ—Ç—Å—è –æ–¥–Ω–æ–π –∏–∑ –æ—Å–Ω–æ–≤ *–ª–æ–≥–∏—á–µ—Å–∫–æ–≥–æ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è*. –ö–æ–º–ø–∏–ª—è—Ç–æ—Ä, –≤–∏–¥—è —á—Ç–æ –∏–∑ –∑–Ω–∞—á–µ–Ω–∏—è –æ–¥–Ω–æ–≥–æ —Ç–∏–ø–∞ –Ω—É–∂–Ω–æ –ø–æ–ª—É—á–∏—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ –¥—Ä—É–≥–æ–≥–æ, —Å–∞–º –∏—â–µ—Ç —Å–ø–æ—Å–æ–± –¥–æ—Å—Ç–∏—á—å —ç—Ç–æ–≥–æ –Ω–∞ –æ—Å–Ω–æ–≤–µ –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã—Ö –∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –ø—Ä–∞–≤–∏–ª (–Ω–µ—è–≤–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ). –ê–Ω–∞–ª–æ–≥–∏—á–Ω—ã–º –æ–±—Ä–∞–∑–æ–º –≤ –ª–æ–≥–∏—á–µ—Å–∫–æ–º –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–∏ —Å—Ç—Ä–æ–∏—Ç—Å—è –≤—Å—è —Ü–µ–ø–æ—á–∫–∞ –≤—ã–≤–æ–¥–∞ –∏—Å–∫–æ–º–æ–≥–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ –Ω–∞ –æ—Å–Ω–æ–≤–µ –∑–∞–¥–∞–Ω–Ω—ã—Ö –ø—Ä–∞–≤–∏–ª. –£ –ë–∞—Ä—Ç–æ—à–∞ –ú–∏–ª–µ–≤—Å–∫–∏ –µ—Å—Ç—å —Ö–æ—Ä–æ—à–∏–µ –ø—É–±–ª–∏–∫–∞—Ü–∏—è –≤ –µ–≥–æ –±–ª–æ–≥–µ –ø–æ–¥ –æ–±—â–∏–º –Ω–∞–∑–≤–∞–Ω–∏–µ–º *Logic Programming in Scala*: [—á–∞—Å—Ç—å 1](https://like-a-boss.net/2020/07/07/logic-programming-in-scala.html), [—á–∞—Å—Ç—å 2](https://like-a-boss.net/2020/07/10/logic-programming-in-scala-part-2.html).

> –í Scala 2 –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º –±—ã–ª–æ —Ç–æ–ª—å–∫–æ –æ–¥–Ω–æ –∫–ª—é—á–µ–≤–æ–µ —Å–ª–æ–≤–æ `implicit`, ‚Äú–Ω–µ—è–≤–Ω–æ‚Äù. –û–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–æ—Å—å –∏ –ø—Ä–∏ –æ–±—ä—è–≤–ª–µ–Ω–∏–∏ –Ω–µ—è–≤–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π (–º–µ—Ç–æ–¥–æ–≤/–∫–ª–∞—Å—Å–æ–≤/–æ–±—ä–µ–∫—Ç–æ–≤), –∏ —Å –∞—Ä–≥—É–º–µ–Ω—Ç–∞–º–∏ –º–µ—Ç–æ–¥–∞, –∫–æ—Ç–æ—Ä—ã–µ –¥–æ–ª–∂–Ω—ã –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å—Å—è –Ω–µ—è–≤–Ω–æ. –í Scala 3 —Å–æ—á–ª–∏ –±–æ–ª–µ–µ –∏–¥–µ–æ–º–∞—Ç–∏—á–Ω—ã–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –¥–≤—É—Ö –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤ `given` –∏ `using`, –Ω–æ –≤ –∞–∫—Ç—É–∞–ª—å–Ω–æ–π –≤–µ—Ä—Å–∏–∏ ‚Äú—Å—Ç–∞—Ä—ã–π —Å—Ç–∏–ª—å‚Äù –ø–æ-–ø—Ä–µ–∂–Ω–µ–º—É –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è.

–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã –ø–æ —Ä–∞–±–æ—Ç–µ —Å –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω—ã–º–∏ –∞–±—Å—Ç—Ä–∞–∫—Ü–∏—è–º–∏ –≤ Scala:
- —Ö–∞–±—Ä-—Å—Ç–∞—Ç—å—è [Implicits –≤ Scala ‚Äî –Ω–µ—è–≤–Ω—ã–µ –º–µ—Ç–æ–¥—ã, —Ñ—É–Ω–∫—Ü–∏–∏, –∑–Ω–∞—á–µ–Ω–∏—è –∏ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏](https://habr.com/ru/companies/beeline_tech/articles/741824/);
- –µ—â—ë –æ–¥–Ω–∞ —Ö–∞–±—Ä-—Å—Ç–∞—Ç—å—è [–ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å implicit'—ã –≤ Scala –∏ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å —Ä–∞—Å—Å—É–¥–æ–∫](https://habr.com/ru/articles/329600/);
- —Å—Ç–∞—Ç—å—è —É –Æ–¥–∂–∏–Ω–∞ –ë–∞–µ–ª–¥—É–Ω–≥–∞: [Scala 3 Implicit Redesign](https://www.baeldung.com/scala/scala-3-implicit-redesign);
- –≤–∏–¥–µ–æ-–æ–±–∑–æ—Ä [Scala Implicits Revisited](https://www.youtube.com/watch?v=dr0PUXQhg3M&ab_channel=GOTOConferences) –æ—Ç –∞–≤—Ç–æ—Ä–∞ Scala –ú–∞—Ä—Ç–∏–Ω–∞ –û–¥–µ—Ä—Å–∫–∏.

<anchor>scala_type_classes</anchor>
### –ö–ª–∞—Å—Å—ã —Ç–∏–ø–æ–≤ –≤ Scala

–ü–µ—Ä–µ–ø–∏—à–µ–º –ø—Ä–∏–º–µ—Ä –∏–∑ –Ω–∞—á–∞–ª–∞ –æ–±—Å—É–∂–¥–µ–Ω–∏—è –∫–ª–∞—Å—Å–æ–≤ —Ç–∏–ø–æ–≤ –∏—Å–ø–æ–ª—å–∑—É—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω—ã–µ –∞–±—Å—Ç—Ä–∞–∫—Ü–∏–∏:
```scala
case class Context[A](meta: String)  
def enrichWithMeta[A](a: A)(using context: Context[A]) = (a, context.meta)  

given Context[Int]("—Ü–µ–ª—ã–µ —á–∏—Å–ª–∞")  

enrichWithMeta(4)   // (4, "—Ü–µ–ª—ã–µ —á–∏—Å–ª–∞")
enrichWithMeta("2") // –û—à–∏–±–∫–∞ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏!
```
–ü—Ä–∏ –≤—ã–∑–æ–≤–µ –æ–±–æ–±—â—ë–Ω–Ω–æ–≥–æ –º–µ—Ç–æ–¥–∞ `enrichWithMeta` —Ç—Ä–µ–±—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω –∞—Ä–≥—É–º–µ–Ω—Ç ‚Äì –∑–Ω–∞—á–µ–Ω–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ –Ω—É–∂–Ω–æ ‚Äú–æ–±–æ–≥–∞—Ç–∏—Ç—å‚Äù —Å—Ç—Ä–æ—á–∫–æ–π. –ù–æ, –Ω–µ —Å–º–æ—Ç—Ä—è –Ω–∞ —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—É—é –∫–≤–∞–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é –º–µ—Ç–æ–¥–∞, –µ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–æ —Ç–æ–ª—å–∫–æ —Ç–µ–º–∏ —Ç–∏–ø–∞–º–∏, –¥–ª—è –∫–æ—Ç–æ—Ä—ã—Ö –≤ —Ç–µ–∫—É—â–µ–º –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ —Å—É—â–µ—Å—Ç–≤—É—é—Ç –Ω–µ—è–≤–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –æ–±–æ–±—â—ë–Ω–Ω–æ–≥–æ —Ç–∏–ø–∞ `Context[_]`.

–û–±—ã—á–Ω–æ –æ –∫–ª–∞—Å—Å–∞—Ö —Ç–∏–ø–æ–≤ –≥–æ–≤–æ—Ä—è—Ç –∏–º–µ–Ω–Ω–æ –∫–∞–∫ –æ *–∫–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–∏–∏* —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–æ–≥–æ –∏ —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ–≥–æ –ø–æ–ª–∏–º–æ—Ä—Ñ–∏–∑–º–æ–≤, –∫–æ–≥–¥–∞ *–ø–∞—Ä–∞–º–µ—Ç—Ä–∏–∑–∞—Ü–∏—è* –º–µ—Ç–æ–¥–æ–≤ —Ç–∏–ø–∞–º–∏ –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ—Ç—Å—è *—Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–º–∏* —Å–ª—É—á–∞—è–º–∏ *—Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è* –∑–Ω–∞—á–µ–Ω–∏–π –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã—Ö –∫–ª–∞—Å—Å–æ–≤ —Ç–∏–ø–æ–≤. –ë–æ–ª—å—à–æ–µ –≤–ª–∏—è–Ω–∏–µ –Ω–∞ —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–∞–∫–æ–π —Ç–æ—á–∫–∏ –∑—Ä–µ–Ω–∏—è –æ–∫–∞–∑–∞–ª —è–∑—ã–∫ Haskell, –≤ –∫–æ—Ç–æ—Ä–æ–º –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –∫–ª–∞—Å—Å–∞–º–∏ —Ç–∏–ø–æ–≤ –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç—Å—è —Å–∏–Ω—Ç–∞–∫—Å–∏—Å, –æ—Å–Ω–æ–≤–∞–Ω–Ω—ã–π —Å–æ—á–µ—Ç–∞–Ω–∏–∏ —ç—Ç–∏ –¥–≤—É—Ö –ø–æ–ª–∏–º–æ—Ä—Ñ–∏–∑–º–æ–≤. –í–ø—Ä–æ—á–µ–º, –∫–∞–∫ –∏ –≤ —Å–ª—É—á–∞–µ –ø–æ–ª–∏–º–æ—Ä—Ñ–∏–∑–º–∞ –ø–æ–¥—Ç–∏–ø–æ–≤, –≤–æ–ø—Ä–æ—Å –æ –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏ –ø–æ–Ω—è—Ç–∏–π, –æ—Ç–Ω–æ—Å–∏—Ç—Å—è —Å–∫–æ—Ä–µ–µ –∫ —Å–æ—Ñ–∏—Å—Ç–∏–∫–µ, –Ω–µ–∂–µ–ª–∏ –∫ –ø–æ–Ω–∏–º–∞–Ω–∏—é –∫–æ–Ω—Ü–µ–ø—Ü–∏–∏ –∏ –∫ –µ—ë –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—é.

–ö–æ–Ω—Ç–µ–∫—Å—Ç–Ω—ã–µ –∞–±—Å—Ç—Ä–∞–∫—Ü–∏–∏ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è—é—Ç —Å–æ–±–æ–π –º–Ω–æ–≥–æ–≥—Ä–∞–Ω–Ω—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞—Ä–∏–π, –¥–ª—è –∫–æ—Ç–æ—Ä–æ–≥–æ –∫–ª–∞—Å—Å—ã —Ç–∏–ø–æ–≤ —è–≤–ª—è—é—Ç—Å—è –ª–∏—à—å —á–∞—Å—Ç–Ω—ã–º —Å–ª—É—á–∞–µ–º –µ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è. –ù–æ –∫–ª–∞—Å—Å—ã —Ç–∏–ø–æ–≤ —Å–∞–º–∏ –ø–æ —Å–µ–±–µ –æ—á–µ–Ω—å –º–æ—â–Ω—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç, –ø–æ—ç—Ç–æ–º—É –¥–ª—è —É–¥–æ–±—Å—Ç–≤–∞ —Ä–∞–±–æ—Ç—ã —Å –Ω–∏–º–∏ –≤ Scala —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –µ—â—ë –ø–æ–Ω—è—Ç–∏–µ [–≥—Ä–∞–Ω–∏—Ü –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞](https://docs.scala-lang.org/ru/scala3/book/ca-context-bounds.html). –≠—Ç–æ –ø—Ä–æ—Å—Ç–æ ‚Äú—Å–∏–Ω—Ç–∞–∫—Å–∏—á–µ—Å–∫–∏–π —Å–∞—Ö–∞—Ä‚Äú, –ø—Ä–∏–ø—Ä–∞–≤–∏–≤ –∫–æ—Ç–æ—Ä—ã–º –ø—Ä–∏–º–µ—Ä –≤—ã—à–µ –ø–æ–ª—É—á–∏–º —Ç–∞–∫–æ–π –∫–æ–¥:
```scala
type Id = [A] =>> A
def enrichWithMeta[A: Context: Id] = (summon[A], summon[Context].meta)
//                  ‚Üë‚Üë‚Üë‚Üë‚Üë‚Üë‚Üë‚Üë‚Üë‚Üë‚Üë‚Üë‚Üë	- "–≥—Ä–∞–Ω–∏—Ü—ã –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞"
given Int = 42 // Id[Int]
enrichWithMeta // (42, "—Ü–µ–ª—ã–µ —á–∏—Å–ª–∞")
```
–ü—Ä–∏ —Ç–∞–∫–æ–π –∑–∞–ø–∏—Å–∏ —è–≤–Ω–æ –ø–æ–¥—á—ë—Ä–∫–∏–≤–∞–µ—Ç—Å—è, —á—Ç–æ ‚Äú–ª—é–±–æ–π‚Äù —Ç–∏–ø `A` –Ω–∞ —Å–∞–º–æ–º –¥–µ–ª–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω –Ω–∞–ª–∏—á–∏–µ–º –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ –≤—ã–∑–æ–≤–∞ —ç–∫–∑–µ–º–ø–ª—è—Ä–æ–≤ —Ç–∏–ø–æ–≤ `Context[A]` –∏ `Id[A] = A`.  –¢–∞–∫ –∂–µ –∑–¥–µ—Å—å –≤–∏–¥–µ–Ω —É—Ç–≤–µ—Ä–¥–∏—Ç–µ–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç –Ω–∞ –≤–æ–ø—Ä–æ—Å, –∑–∞–¥–∞–Ω–Ω—ã–π –≤ –Ω–∞—á–∞–ª–µ —Ä–∞–∑–¥–µ–ª–∞ ‚Äì ‚Äú–º–æ–∂–Ω–æ –ª–∏ —Å—á–∏—Ç–∞—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ `a: A` –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ–º, –Ω–∞–∫–ª–∞–¥—ã–≤–∞–µ–º—ã–º –Ω–∞ —Ç–∏–ø `A`?‚Äú –ü—Ä–∏ —ç—Ç–æ–º  `Id[A] = A`

–í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –≤ —è–∑—ã–∫ –º–µ—Ç–æ–¥ `summon[_]` –ø–æ–∑–≤–æ–ª—è–µ—Ç ‚Äú–ø—Ä–∏–∑–≤–∞—Ç—å‚Äù –∑–Ω–∞—á–µ–Ω–∏–µ –Ω—É–∂–Ω–æ–≥–æ —Ç–∏–ø–∞, –Ω–µ—è–≤–Ω–æ —Ä–∞–∑–º–µ—â—ë–Ω–Ω–æ–µ –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ, –≤–µ–¥—å –∏–º—è –Ω–µ—è–≤–Ω–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è –∑–¥–µ—Å—å –Ω–∏–≥–¥–µ –Ω–µ —É–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è. –í–ø—Ä–æ—á–µ–º, –Ω–∞ –ø—Ä–∞–∫—Ç–∏–∫–µ –ø—Ä–∏–∑—ã–≤—ã –æ–±—ã—á–Ω–æ –≤—ã–Ω–æ—Å—è—Ç—Å—è –≤ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞–ª—å–Ω—ã–π –∫–æ–¥, –æ–ø—Ä–µ–¥–µ–ª—è—é—â–∏–π —è–∑—ã–∫ –ø—Ä–µ–¥–º–µ—Ç–Ω–æ–π –æ–±–ª–∞—Å—Ç–∏ (DSL), –Ω–∞ –∫–æ—Ç–æ—Ä–æ–º –±—É–¥–µ—Ç –æ–ø–∏—Å–∞–Ω–∞ –≤—Å—è –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞.

>–ï—â—ë –æ–¥–∏–Ω –æ—á–µ–Ω—å –ª—é–±–æ–ø—ã—Ç–Ω—ã–π –º–æ–º–µ–Ω—Ç. –í –∫–æ–¥–µ `A: Context` –æ–±–æ–±—â—ë–Ω–Ω—ã–π —Ç–∏–ø `Context` –≤–∏–¥–∞ `‚ãÜ ‚Üí ‚ãÜ` –≤—ã—Å—Ç—É–ø–∞–µ—Ç **–≤ —Ä–æ–ª–∏ —Ç–∏–ø–∞** –¥–ª—è `A` –ø—Ä–æ—Å—Ç–æ –≤–∏–¥–∞ `‚ãÜ`! –í —ç—Ç–æ–º —Å–º—ã—Å–ª–µ, –≤—Å–µ —Ç–∏–ø—ã –≤—ã—Å–æ–∫–æ–≥–æ —Ä–∞–Ω–≥–∞ –≤–∏–¥–∞ `k ‚Üí ‚ãÜ` –º–æ–≥—É—Ç —Å—á–∏—Ç–∞—Ç—å—Å—è *—Ç–∏–ø–∞–º–∏ –¥–ª—è —Ç–∏–ø–æ–≤* –≤–∏–¥–∞ `k`, —Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ, –æ–Ω–∏ –æ–±—Ä–∞–∑—É—é—Ç –µ—â—ë –æ–¥–Ω—É –º—É–ª—å—Ç–∏–≤—Å–µ–ª–µ–Ω–Ω—É—é —Ç–∏–ø–æ–≤, –Ω–µ–∑–∞–≤–∏—Å–∏–º—É—é –æ—Ç –∏–µ—Ä–∞—Ä—Ö–∏–∏ (–≤–∏–¥–æ–≤) —Ç–∏–ø–æ–≤, –æ–ø–∏—Å–∞–Ω–Ω–æ–π —Ä–∞–Ω–µ–µ!

–ö–ª–∞—Å—Å—ã —Ç–∏–ø–æ–≤ –≤ Haskell –º–æ–≥—É—Ç –∏–º–µ—Ç—å *—Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —ç–∫–∑–µ–º–ø–ª—è—Ä* –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Ç–∏–ø–∞. –í Scala –∂–µ –º—ã –º–æ–∂–µ–º —Å–æ–∑–¥–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ç–∞–∫–∏—Ö —ç–∫–∑–µ–º–ø–ª—è—Ä–æ–≤ –∏ –ø–µ—Ä–µ–¥–∞—Ç—å –ª—é–±–æ–π –∏–∑ –Ω–∏—Ö –∫–∞–∫ –∞—Ä–≥—É–º–µ–Ω—Ç —è–≤–Ω–æ (–Ω–µ –ø–æ–ª–∞–≥–∞—è—Å—å –Ω–∞ –Ω–µ—è–≤–Ω–æ–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ –≤ —Ç–∞–∫–æ–º —Å–ª—É—á–∞–µ –ø–æ—Ä–æ–¥–∏—Ç –æ—à–∏–±–∫—É –∫–æ–º–ø–∏–ª—è—Ü–∏–∏). –ù–∞–ø—Ä–∏–º–µ—Ä, —ç—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –¥–ª—è —á–∏—Å–µ–ª —ç–∫–∑–µ–º–ø–ª—è—Ä—ã –∫–ª–∞—Å—Å–∞ —Ç–∏–ø–∞ –º–æ–Ω–æ–∏–¥–∞ –∫–∞–∫ –Ω–∞ –±–∞–∑–µ —Å–ª–æ–∂–µ–Ω–∏—è, —Ç–∞–∫ –∏ –Ω–∞ –±–∞–∑–µ —É–º–Ω–æ–∂–µ–Ω–∏—è, –∏ –≤—ã–±–∏—Ä–∞—Ç—å –ª—é–±–æ–π –∏–∑ –Ω–∏—Ö –ø–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ (—Å–º. –¥–∞–ª–µ–µ). –ù–æ –ø—Ä–∏—Ö–æ–¥–∏—Ç—Å—è —Å–ª–µ–¥–∏—Ç—å, —á—Ç–æ–±—ã –Ω–µ—è–≤–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏—Å—å –∏–º–µ–Ω–Ω–æ *–Ω—É–∂–Ω—ã–µ* —ç–∫–∑–µ–º–ø–ª—è—Ä—ã –∫–ª–∞—Å—Å–æ–≤ —Ç–∏–ø–æ–≤.

![[–°–∫–≤–æ–Ω—á–∏.png|–Ø–∑—ã–∫ –°–∫–≤–æ–Ω—á–∏ –∫–æ–Ω—Ç–µ–∫—Å—Ç—É–∞–ª—å–Ω—ã–π. –°–ª–æ–≤–∞ –º–æ–∂–Ω–æ –ø–æ–Ω—è—Ç—å, —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –¥–ª—è –Ω–∏—Ö *—Å—É—â–µ—Å—Ç–≤—É–µ—Ç —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π* —Å–º—ã—Å–ª –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ –æ–±—â–µ–Ω–∏—è. –ü–æ—ç—Ç–æ–º—É, –¥–∞–±—ã –∏–∑–±–µ–∂–∞—Ç—å –Ω–µ–ª–µ–ø—ã—Ö –∫–∞–∑—É—Å–æ–≤, –æ—á–µ–Ω—å –≤–∞–∂–Ω–æ —Å–ª–µ–¥–∏—Ç—å, —á—Ç–æ–±—ã —É —Å–ª—É—à–∞—Ç–µ–ª–µ–π –±—ã–ª –∏–º–µ–Ω–Ω–æ —Ç–æ—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç, –Ω–∞ –∫–æ—Ç–æ—Ä—ã–π —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç –≥–æ–≤–æ—Ä—è—â–∏–π.]]

–í Scala 3 –ø–æ—è–≤–∏–ª–æ—Å—å –∫–ª—é—á–µ–≤–æ–µ —Å–ª–æ–≤–æ `derives`, –∫–æ—Ç–æ—Ä–æ–µ –ø—Ä–∏ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–∏ –Ω–æ–≤–æ–≥–æ —Ç–∏–ø–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–æ–±–∞–≤–ª—è–µ—Ç (–≤ [–æ–±—ä–µ–∫—Ç-–∫–æ–º–ø–∞–Ω—å–æ–Ω](https://docs.scala-lang.org/ru/tour/singleton-objects.html#%D0%BE%D0%B1%D1%8A%D0%B5%D0%BA%D1%82%D1%8B-%D0%BA%D0%BE%D0%BC%D0%BF%D0%B0%D0%BD%D1%8C%D0%BE%D0%BD%D1%8B)) –Ω–µ—è–≤–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è —ç–∫–∑–µ–º–ø–ª—è—Ä–æ–≤ –∫–ª–∞—Å—Å–æ–≤ —Ç–∏–ø–æ–≤, —É–∫–∞–∑–∞–Ω–Ω—ã—Ö –ø–æ—Å–ª–µ `derives`:
```scala
import cats.Show, cats.derived.*
enum IntTree derives Show: // –∫–ª—é—á–µ–≤—ã–æ–µ —Å–ª–æ–≤–æ derives!
  case Branch(left: IntTree, right: IntTree)
  case Leaf(elem: Int)
  
// –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ derives Show –ø—Ä–∏–≤–æ–¥–∏—Ç –∫ –≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–∏—é –ø—Ä–∏–º–µ—Ä–Ω–æ —Ç–∞–∫–æ–≥–æ –∫–æ–¥–∞:
//object IntTree:
//  given Show[IntTree] = Show.derived // –º–∞–∫—Ä–æ—Å!
```
–í –¥–∞–Ω–Ω–æ–º –ø—Ä–∏–º–µ—Ä–µ –º—ã –ø—Ä–æ—Å–∏–º –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–∏—Ç—å —ç–∫–∑–µ–º–ø–ª—è—Ä –∫–ª–∞—Å—Å–∞ —Ç–∏–ø–æ–≤ `Show`, –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –∏–∑ —à–∏—Ä–æ–∫–æ –∏—Å–ø–æ–ª—å–∑—É–µ–º–æ–π –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ [Cats](https://typelevel.org/cats/) üêà . –ö–ª—é—á–µ–≤–æ–µ —Å–ª–æ–≤–æ `derives` ‚Äì —ç—Ç–æ –ø—Ä–æ—Å—Ç–æ —Å–∏–Ω—Ç–∞–∫—Å–∏—á–µ—Å–∫–∏–π —Å–∞—Ö–∞—Ä –¥–ª—è —Ö–∏—Ç—Ä–æ–≥–æ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –ø–æ—Å–ª–µ–¥–Ω–µ–π —Å—Ç—Ä–æ—á–∫–∏. –ü—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –Ω–µ—è–≤–Ω–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è –≤ –æ–±—ä–µ–∫—Ç-–∫–æ–º–ø–∞–Ω—å–æ–Ω, –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä —Å–º–æ–∂–µ—Ç –Ω–∞–π—Ç–∏ –µ–≥–æ –ø—Ä–∏ –ª—é–±–æ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ —Ç–∏–ø–∞ `IntTree` –±–µ–∑ –∫–∞–∫–∏—Ö-–ª–∏–±–æ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –∏–º–ø–æ—Ä—Ç–æ–≤. –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–æ–¥ (–ø–æ—Å–ª–µ–¥–Ω—è—è –∑–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Å—Ç—Ä–æ—á–∫–∞) –ø–æ–¥—Ä–∞–∑—É–º–µ–≤–∞–µ—Ç, —á—Ç–æ –≤ –æ–¥–Ω–æ–∏–º–µ–Ω–Ω–æ–º —Å –∫–ª–∞—Å—Å–æ–º —Ç–∏–ø–∞ –æ–±—ä–µ–∫—Ç–µ-–∫–æ–º–ø–∞–Ω—å–æ–Ω–µ `Show` –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–æ –∑–Ω–∞—á–µ–Ω–∏–µ (–∏–ª–∏ –º–µ—Ç–æ–¥ –±–µ–∑ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤) `derived`. –ü–æ—á–µ–º—É-—Ç–æ –≤ ‚Äú–ö–æ—à–∫–∞—Ö‚Äù –¥–ª—è –∫–ª–∞—Å—Å–æ–≤ —Ç–∏–ø–æ–≤ –Ω–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω—ã `derived`, –Ω–æ –Ω–∞—Å –≤—ã—Ä—É—á–∏—Ç –¥–æ—á–µ—Ä–Ω—è—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ [Kittens](https://github.com/typelevel/kittens) üòπ ‚Äì –æ—Ç—Ç—É–¥–∞ –∏–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç—Å—è –ø–∞–∫–µ—Ç `cats.derived.*`, –≤ –∫–æ—Ç–æ—Ä–æ–º –µ—Å—Ç—å –ø–æ–¥—Ö–æ–¥—è—â–∏–π [–º–µ—Ç–æ–¥ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è](https://docs.scala-lang.org/ru/scala3/book/ca-extension-methods.html) –¥–ª—è –æ–±—ä–µ–∫—Ç–∞ `Show` –∏ –ø—Ä–æ—á–∏—Ö. –í–æ—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –≤—ã–≤–µ–¥–µ–Ω–Ω—ã–º —ç–∫–∑–µ–º–ø–ª—è—Ä–æ–º –∫–ª–∞—Å—Å–∞ —Ç–∏–ø–∞ `Show` –º–æ–∂–Ω–æ —Å –ø–æ–º–æ—â—å—é –º–µ—Ç–æ–¥–∞-—Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è `show`, –Ω–µ—è–≤–Ω–æ —Ç—Ä–µ–±—É—é—â–µ–≥–æ —ç—Ç–æ—Ç —ç–∫–∑–µ–º–ø–ª—è—Ä:
```scala
import IntTree.*
val myTree = Branch(Leaf(4), Leaf(2))

import cats.syntax.all.*
myTree.show // –Ω–µ—è–≤–Ω–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è "–≤—ã–≤–µ–¥–µ–Ω–Ω—ã–π" —ç–∫–∑–µ–º–ø–ª—è—Ä Show[IntTree]
```
–ú—ã –º–æ–∂–µ–º –ø–æ—Ç—Ä–µ–±–æ–≤–∞—Ç—å *—Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å* —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é –∫–ª–∞—Å—Å–∞ —Ç–∏–ø–∞ –¥–ª—è *–ª—é–±–æ–≥–æ* —Ç–∏–ø–∞, –≤–º–µ—Å—Ç–æ —Ç–æ–≥–æ, —á—Ç–æ–±—ã –ø–∏—Å–∞—Ç—å –µ—ë –≤—Ä—É—á–Ω—É—é! –ù–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ, —á—Ç–æ–±—ã —ç—Ç–æ—Ç –∫–ª–∞—Å—Å —Ç–∏–ø–∞ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–ª `derived`. –ê –≤–æ—Ç —Ç–∞–º —É–∂–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –Ω–∞—Å—Ç–æ—è—â–∞—è ‚Äú–∑–∞–∑–µ—Ä–∫–∞–ª—å–Ω–∞—è –º–∞–≥–∏—è‚Äù, –æ—Å–Ω–æ–≤–∞–Ω–Ω–∞—è –Ω–∞ —Ç–æ–º, —á—Ç–æ *–ª—é–±–æ–π —Ç–∏–ø –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç—Å—è –≤ –≤–∏–¥–µ –∞–ª–≥–µ–±—Ä–∞–∏—á–µ—Å–∫–æ–≥–æ –≤—ã—Ä–∞–∂–µ–Ω–∏—è*, –ø–æ—Å—Ç—Ä–æ–µ–Ω–Ω–æ–≥–æ –∏–∑ —Å—É–º–º, –ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–π –∏ —ç–∫—Å–ø–æ–Ω–µ–Ω—Ü–∏–∞–ª–æ–≤. –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –∫–ª–∞—Å—Å–∞ —Ç–∏–ø–∞ –∫–æ–Ω—Å—Ç—Ä—É–∏—Ä—É–µ—Ç—Å—è –Ω–∞ –±–∞–∑–µ —Å–∏–Ω—Ç–∞–∫—Å–∏—á–µ—Å–∫–æ–≥–æ –¥–µ—Ä–µ–≤–∞ –∞–ª–≥–µ–±—Ä–∞–∏—á–µ—Å–∫–æ–≥–æ –≤—ã—Ä–∞–∂–µ–Ω–∏—è —É–∫–∞–∑–∞–Ω–Ω–æ–≥–æ —Ç–∏–ø–∞. –ò –≤—Å—ë —ç—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç (–º–∞–∫—Ä–æ—Å—ã –≤—ã—Ä—É—á–∞—é—Ç) –Ω–∞ —ç—Ç–∞–ø–µ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏!

–î–∞–ª–µ–µ –±—É–¥—É—Ç –ø—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –∫–ª–∞—Å—Å–æ–≤ —Ç–∏–ø–∞ –¥–ª—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –º–æ–Ω–æ–∏–¥–∞ –∏ –≤ –∫–∞—á–µ—Å—Ç–≤–µ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã –û–û–ü. –ö–ª–∞—Å—Å—ã —Ç–∏–ø–æ–≤ –≤—ã—Å–æ–∫–æ–≥–æ —Ä–æ–¥–∞ —Ä–∞—Å—Å–º–∞—Ç—Ä–∏–≤–∞—é—Ç—Å—è –≤ —Å–ª–µ–¥—É—é—â–µ–º —Ä–∞–∑–¥–µ–ª–µ –ø—Ä–æ —Ç–∏–ø—ã-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã. –¢–∞–∫–∂–µ –º–æ–∂–Ω–æ –æ–∑–Ω–∞–∫–æ–º–∏—Ç—Å—è —Å —ç—Ç–∏–º–∏ –∏—Å—Ç–æ—á–Ω–∏–∫–∞–º–∏ –∑–Ω–∞–Ω–∏–π –æ –∫–ª–∞—Å—Å–∞—Ö —Ç–∏–ø–æ–≤:
- –•–∞–±—Ä-—Å—Ç–∞—Ç—å–∏
	- [Type classes –≤ Scala](https://habr.com/ru/companies/tinkoff/articles/147759/);
	- [–ö–ª–∞—Å—Å—ã —Ç–∏–ø–æ–≤ –≤ Scala (—Å –Ω–µ–±–æ–ª—å—à–∏–º –æ–±–∑–æ—Ä–æ–º –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ cats)](https://habr.com/ru/articles/318960/);
	- [–ß—Ç–æ —Ç–∞–∫–æ–µ –∫–ª–∞—Å—Å —Ç–∏–ø–æ–≤?](https://habr.com/ru/articles/771896/)
- –°—Ç–∞—Ç—å—è –æ—Ç –∞–≤—Ç–æ—Ä–æ–≤ Scala [Type Classes as Objects and Implicits](https://citeseerx.ist.psu.edu/document?repid=rep1&type=pdf&doi=d30d65ca9ce7891352024a5c71ebe0ae8c41f7ac).
- –°—Ç–∞—Ç—å—è –Ω–∞ ScalaJobs [Typeclassery ‚Äî A sure way of making generic programs context aware](https://scalajobs.com/blog/typeclassery-in-scala/).
- –°—Ç–∞—Ç—å—è [–æ –∫–ª–∞—Å—Å–∞—Ö —Ç–∏–ø–æ–≤](https://typelevel.org/cats/typeclasses.html) –≤ –±–∏–±–ª–∏–æ—Ç–µ–∫–µ Cats.
- –§—Ä–∞–≥–º–µ–Ω—Ç –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ Scala [Implementing Type classes](https://docs.scala-lang.org/scala3/reference/contextual/type-classes.html).
- [–ì–ª–∞–≤–∞ 12: –ö–ª–∞—Å—Å—ã —Ç–∏–ø–æ–≤](https://github.com/anton-k/ru-neophyte-guide-to-scala/blob/master/src/p12-type-classes.md) –∏–∑ –ø–µ—Ä–µ–≤–µ–¥—ë–Ω–Ω–æ–π —Å–µ—Ä–∏–∏ [–ü—É—Ç–µ–≤–æ–¥–∏—Ç–µ–ª—å –Ω–µ–æ—Ñ–∏—Ç–∞ –ø–æ Scala](https://github.com/anton-k/ru-neophyte-guide-to-scala/tree/master) –î–∞–Ω–∏–µ–ª—è –í–µ—Å—Ç—Å–∞–π–¥–∞.
- –°—Ç–∞—Ç—å—è [Generic Type Class Derivation in Scala 3](https://blog.1punch.dev/scala/dotty/en/generic-type-class-derivation.html).
- –ó–∞–º–µ—á–∞—Ç–µ–ª—å–Ω–∞—è —Å—Ç–∞—Ç—å—è –õ–µ–æ –ß—É–Ω–≥–∞ [Ad-hoc Polymorphism In Scala](https://blog.genuine.com/2020/01/ad-hoc-polymorphism-in-scala/) –≤ –∫–æ—Ç–æ—Ä–æ–π –∫ –∫–ª–∞—Å—Å–∞–º —Ç–∏–ø–æ–≤ –ø—Ä–∏—Ö–æ–¥—è—Ç –æ—Ç F-–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–æ–≥–æ –ø–æ–ª–∏–º–æ—Ä—Ñ–∏–∑–º–∞, —É–ø–æ–º–∏–Ω–∞–≤—à–µ–≥–æ—Å—è —Ä–∞–Ω–µ–µ –≤ –¥–∞–Ω–Ω–æ–π —Å—Ç–∞—Ç—å–µ.


<anchor>monoid</anchor>
### –ú–æ–Ω–æ–∏–¥

–û–ø—è—Ç—å —ç—Ç–æ—Ç –Ω–µ–ø—Ä–∏–≤–µ—Ç–ª–∏–≤—ã–π –º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ç–µ—Ä–º–∏–Ω‚Ä¶ –í–ø—Ä–æ—á–µ–º, –æ–Ω —É–∂–µ —É–ø–æ–º–∏–Ω–∞–ª—Å—è –Ω–µ —Ä–∞–∑, –∞ –≤ –ø—Ä–µ–¥—ã–¥—É—â–µ–π —Å—Ç–∞—Ç—å–µ –±—ã–ª —Ä–∞—Å–∫—Ä—ã—Ç —Å –ø–æ–º–æ—â—å—é –∫–∞—Ä—Ç–∏–Ω–æ–∫. –ú–æ–Ω–æ–∏–¥ ‚Äì —ç—Ç–æ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏—è, –∫–æ—Ç–æ—Ä–∞—è –ø–æ–∑–≤–æ–ª—è–µ—Ç ‚Äú—Å–≤–æ—Ä–∞—á–∏–≤–∞—Ç—å‚Äù —Å–ø–∏—Å–∫–∏ –¥–æ –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è, —ç—Ç–æ –≤—Å—ë, —á—Ç–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ, –¥–ª—è –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—è —Ñ—É–Ω–∫—Ü–∏–∏ `List[A] => A`. –° –ø–æ–º–æ—â—å—é –º–æ–Ω–æ–∏–¥–∞ –º–æ–∂–Ω–æ –ø—Ä–æ–±–µ–∂–∞—Ç—å —Å–ø–∏—Å–æ–∫, –Ω–∞–∫–∞–ø–ª–∏–≤–∞—è –≤ –Ω–µ–∫–æ–º ‚Äú–∞–∫–∫—É–º—É–ª—è—Ç–æ—Ä–µ‚Äù —Ä–µ–∑—É–ª—å—Ç–∏—Ä—É—é—â–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ. –≠—Ç–æ –∑–Ω–∞—á–∏—Ç, —á—Ç–æ –º–æ–Ω–æ–∏–¥ –¥–æ–ª–∂–µ–Ω –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–∏—Ç—å, –≤–æ-–ø–µ—Ä–≤—ã—Ö, ‚Äú–Ω–∞—á–∞–ª—å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ‚Äù –¥–ª—è —Å–ª—É—á–∞—è –ø—É—Å—Ç–æ–≥–æ —Å–ø–∏—Å–∫–∞, –∞ –≤–æ-–≤—Ç–æ—Ä—ã—Ö –±–∏–Ω–∞—Ä–Ω—É—é –æ–ø–µ—Ä–∞—Ü–∏—é, –ø—Ä–∏–Ω–∏–º–∞—é—â—É—é –∞–∫–∫—É–º—É–ª—è—Ç–æ—Ä –∏ —ç–ª–µ–º–µ–Ω—Ç–∞ —Å–ø–∏—Å–∫–∞, –∞ –≤–æ–∑–≤—Ä–∞—â–∞—é—â—É—é –Ω–æ–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –∞–∫–∫—É–º—É–ª—è—Ç–æ—Ä–∞.
```scala
trait Monoid[A]:
  val neutral: A
  val combine: (A, A) => A

def imperativeFold[A](list: List[A])(using mon: Monoid[A]) =
  // —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –º–æ–∂–µ—Ç –±—ã—Ç—å —Ä–∞–∑–Ω–æ–π
  var accum = mon.neutral // –Ω–µ –§–ü-—à–Ω–æ, –Ω–æ –Ω–∞–≥–ª—è–¥–Ω–æ
  for (a <- list)
    accum = mon.combine(accum, a)
  accum
```

–î–∞, —Å–≤—ë—Ä—Ç–∫—É –º–æ–∂–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∏ —Ä–µ–∫—É—Ä—Å–∏–≤–Ω–æ, –∏–ª–∏ –¥–∞–∂–µ –≤–æ—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –≤—Å—Ç—Ä–æ–µ–Ω–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–µ–π –¥–ª—è `List`, –Ω–æ –∫–∞–∂–µ—Ç—Å—è, —á—Ç–æ –∏–º–ø–µ—Ä–∞—Ç–∏–≤–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –±—É–¥–µ—Ç –±–æ–ª–µ–µ —É–¥–æ–±–Ω–æ–π –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏ –∫–æ–Ω—Ü–µ–ø—Ü–∏–∏ –º–æ–Ω–æ–∏–¥–∞. –° –ø–æ–º–æ—â—å—é –º–æ–Ω–æ–∏–¥–∞ –º–æ–∂–Ω–æ —Å–≤–æ—Ä–∞—á–∏–≤–∞—Ç—å —Å–ø–∏—Å–∫–∏ –ª—é–±—ã—Ö —Ç–∏–ø–æ–≤, –¥–∞–∂–µ –∑–∞–∫—Ä—ã—Ç—ã—Ö –¥–ª—è –ø–æ–¥—Ç–∏–ø–∏–∑–∞—Ü–∏–∏ (–Ω–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è), –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Ç–æ–ª—å–∫–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –º–æ–Ω–æ–∏–¥ –¥–ª—è —ç—Ç–∏—Ö —Ç–∏–ø–æ–≤. –ù–∞ —Ü–µ–ª—ã—Ö —á–∏—Å–ª–∞—Ö –º–æ–∂–Ω–æ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –¥–≤–∞ –æ—á–µ–≤–∏–¥–Ω—ã—Ö –º–æ–Ω–æ–∏–¥–∞ ‚Äì –Ω–∞ –æ—Å–Ω–æ–≤–µ —Å–ª–æ–∂–µ–Ω–∏—è –∏ —É–º–Ω–æ–∂–µ–Ω–∏—è:
```scala
given inSumMonoid: Monoid[Int] = new:
  val neutral = 0
  val combine = _ + _

val inProdMonoid: Monoid[Int] = new:
  val neutral = 1
  val combine = _ * _

val lst = List(4, 2)
imperativeFold(lst)                     // 6
imperativeFold(lst)(using inProdMonoid) // 8
```
–í –¥–≤—É—Ö –ø–æ—Å–ª–µ–¥–Ω–∏—Ö —Å—Ç—Ä–æ—á–∫–∞—Ö —Å–≤—ë—Ä—Ç–∫–∞ —Å–ø–∏—Å–∫–∞ –ø—Ä–æ–≤–æ–¥–∏—Ç—Å—è —Å –ø–æ–º–æ—â—å—é —Ä–∞–∑–Ω—ã—Ö –º–æ–Ω–æ–∏–¥–æ–≤. –í –ø–µ—Ä–≤–æ–º —Å–ª—É—á–∞–µ –∏–∑ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –Ω–µ—è–≤–Ω–æ —Ç—è–Ω–µ—Ç—Å—è `inSumMonoid`, —á—Ç–æ –≤ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ –¥–∞—ë—Ç —Å—É–º–º—É —ç–ª–µ–º–µ–Ω—Ç–æ–≤ —Å–ø–∏—Å–∫–∞, –∞ –≤–æ –≤—Ç–æ—Ä–æ–º —Å–ª—É—á–∞–µ —è–≤–Ω–∞—è –ø–µ—Ä–µ–¥–∞—á–∞ `inProdMonoid` –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–µ—Ä–µ–º–Ω–æ–∂–∏—Ç—å —ç–ª–µ–º–µ–Ω—Ç—ã.

–î–∞–Ω–Ω—ã–π —Å—Ü–µ–Ω–∞—Ä–∏–π, —Ç–∏–ø–∏—á–µ–Ω –¥–ª—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –∫–ª–∞—Å—Å–æ–≤ —Ç–∏–ø–æ–≤. –¢–æ, —á—Ç–æ –ø–æ–ª–∏–º–æ—Ä—Ñ–Ω—ã–π –º–µ—Ç–æ–¥ `imperativeFold[A]` –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä `Monoid[A]`, –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ—Ç –µ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ç–æ–ª—å–∫–æ –∫–ª–∞—Å—Å–æ–º —Ç–∞–∫–∏—Ö —Ç–∏–ø–æ–≤, –¥–ª—è –∫–æ—Ç–æ—Ä—ã—Ö –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω –Ω–µ—è–≤–Ω—ã–π —ç–∫–∑–µ–º–ø–ª—è—Ä `Monoid[A]`.

> –î–ª—è —Ç–æ–≥–æ, —á—Ç–æ–±—ã ‚Äú—Å–≤–æ—Ä–∞—á–∏–≤–∞–Ω–∏–µ‚Äù —Å–ø–∏—Å–∫–∞ –º–æ–∂–Ω–æ –±—ã–ª–æ –ø—Ä–æ–≤–æ–¥–∏—Ç—å –≤ –ª—é–±–æ–º –ø–æ—Ä—è–¥–∫–µ, –≤ —Ç–æ–º —á–∏—Å–ª–µ –∏ –ø–æ —á–∞—Å—Ç—è–º, –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ, —á—Ç–æ–±—ã –±–∏–Ω–∞—Ä–Ω–∞—è –æ–ø–µ—Ä–∞—Ü–∏—è –±—ã–ª–∞ –∞—Å—Å–æ—Ü–∏–∞—Ç–∏–≤–Ω–æ–π, –∞ –Ω–∞—á–∞–ª—å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ ‚Äì –Ω–µ–π—Ç—Ä–∞–ª—å–Ω—ã–º —ç–ª–µ–º–µ–Ω—Ç–æ–º —ç—Ç–æ–π –æ–ø–µ—Ä–∞—Ü–∏–∏. –ò–º–µ–Ω–Ω–æ —ç—Ç–∏ *–∑–∞–∫–æ–Ω—ã* –∏ –æ–ø—Ä–µ–¥–µ–ª—è—é—Ç –º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–æ–Ω—è—Ç–∏–µ ‚Äú–º–æ–Ω–æ–∏–¥‚Äù. –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏, Scala –ø–æ–∑–≤–æ–ª—è–µ—Ç —É—á–µ—Å—Ç—å —Ç–∞–∫–∏–µ –∑–∞–∫–æ–Ω—ã —è–≤–Ω–æ, –Ω–æ –º—ã –Ω–µ —Å—Ç–∞–Ω–µ–º —Ç–∞–∫ –∑–∞–º–æ—Ä–∞—á–∏–≤–∞—Ç—å—Å—è (–ø–æ–ø—É–ª—è—Ä–Ω—ã–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ —Ç–∞–∫–∂–µ –Ω–µ –æ—Å–æ–±–æ —Å–ª–µ–¥—è—Ç –∑–∞ —Å–æ–±–ª—é–¥–µ–Ω–∏–µ–º –∑–∞–∫–æ–Ω–æ–≤ —Å–≤–æ–∏—Ö –∫–ª–∞—Å—Å–æ–≤ —Ç–∏–ø–æ–≤).

<anchor>oop_classtypes</anchor>
### –≠–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç—ã —Å –û–û–ü

–í–æ–∑—å–º—ë–º, –∫ –ø—Ä–∏–º–µ—Ä—É —Ç–∞–∫–æ–π —Å–µ—Ä–≤–∏—Å:
```scala
trait StorageOop:
  def getVal(key: Int): Option[String]
  def setVal(key: Int, value: String): Unit
  def combine(other: StorageOop): Unit
```
–ò –≤—Ä–æ–¥–µ —Ç—É—Ç –æ–ø–∏—Å–∞–Ω–æ –≤—Å—ë, —á—Ç–æ –º—ã –º–æ–∂–µ–º –ø–æ–ª—É—á–∏—Ç—å, –∏–º–µ—è —Ç–µ—Ä–º —Ç–∏–ø–∞ `StorageOop`, –Ω–æ
- —ç—Ç–æ –Ω–µ –≤—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏, —Å–≤—è–∑–∞–Ω–Ω—ã–µ —Å —Ç–∏–ø–æ–º, –Ω–∞–ø—Ä–∏–º–µ—Ä, —Ç—É—Ç –Ω–µ—Ç –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–∞;
- –º–µ—Ç–æ–¥ `combine` –≤—ã–≥–ª—è–¥–∏—Ç –Ω–µ—É–º–µ—Å—Ç–Ω—ã–º ‚Äì –µ–≥–æ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –º–æ–∂–µ—Ç –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª—è—Ç—å—Å—è –≤ –Ω–∞—Å–ª–µ–¥–Ω–∏–∫–∞—Ö, –≤ —Ç–æ –≤—Ä–µ–º—è –∫–∞–∫, –ø–æ —Å—É—Ç–∏, –æ–Ω –æ–¥–Ω–æ–∑–Ω–∞—á–Ω–æ –¥–æ–ª–∂–µ–Ω –æ–ø—Ä–µ–¥–µ–ª—è—Ç—å—Å—è –¥–≤—É–º—è –¥—Ä—É–≥–∏–º–∏ —Ñ—É–Ω–∫—Ü–∏—è–º–∏; –æ–Ω –Ω–µ –¥–æ–ª–∂–µ–Ω ‚Äú–ø—Ä–∏–Ω–∞–¥–ª–µ–∂–∞—Ç—å –∑–Ω–∞—á–µ–Ω–∏—é‚Äù —Ç–∏–ø–∞ `StorageOop`.

–ü–µ—Ä–µ–ø–∏—à–µ–º —ç—Ç–æ—Ç —Ç—Ä–µ–π—Ç –≤ –≤–∏–¥–µ —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–æ–≥–æ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è —ç–∫–∑–∏—Å—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–æ–≥–æ —Ç–∏–ø–∞:
```scala
trait StorageTC[Storage]:
  def empty: Storage
  def getVal (storage: Storage)(key: Int): Option[String]
  def setVal (storage: Storage)(key: Int, value: String): Storage
  def combine(first: Storage, other: Storage): Storage
```
‚Äú–°—É—â–µ—Å—Ç–≤—É–µ—Ç —Ç–∞–∫–æ–π `Storage`, –¥–ª—è –∫–æ—Ç–æ—Ä–æ–≥–æ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω—ã —ç—Ç–∏ —Ñ—É–Ω–∫—Ü–∏–∏‚Äù. –ó–¥–µ—Å—å
- —è–≤–Ω–æ –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É–µ—Ç –æ–¥–∏–Ω ‚Äú–∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä‚Äù `empty` –¥–ª—è —Ç–∏–ø–∞ `Storage`,
- —Ñ—É–Ω–∫—Ü–∏–∏ `getVal` –∏ `setVal` –ø—Ä–∏–Ω–∏–º–∞—é—Ç –ø–µ—Ä–≤—ã–º –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–º ‚Äú—Ö—Ä–∞–Ω–∏–ª–∏—â–µ‚Äù —Ç–∏–ø–∞ `Storage`,
- –ø—Ä–∏—á—ë–º `setVal` –∏ `combine` —Ç–∞–∫–∂–µ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –Ω–æ–≤–æ–µ, –∏–∑–º–µ–Ω—ë–Ω–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ (–≤–µ–¥—å –ø—Ä–æ —Ç–∏–ø `Storage` –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω–æ –Ω–∏—á–µ–≥–æ, –æ–Ω –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–µ–∏–∑–º–µ–Ω—è–µ–º—ã–º),
- —Ñ—É–Ω–∫—Ü–∏—è `combine` –ø—Ä–∏–Ω—è–ª–∞ –∑–∞–∫–æ–Ω—á–µ–Ω–Ω—ã–π –≤–∏–¥ ‚Äì —ç—Ç–æ –±–∏–Ω–∞—Ä–Ω–∞—è –æ–ø–µ—Ä–∞—Ü–∏—è –Ω–∞ –∑–Ω–∞—á–µ–Ω–∏—è—Ö –æ–¥–Ω–æ–≥–æ –∏ —Ç–æ–≥–æ –∂–µ —Ç–∏–ø–∞. 

–í–≤–µ–¥—ë–º —Ç–µ—Ä–º–∏–Ω—ã –ø—Ä–µ–¥–º–µ—Ç–Ω–æ–π –æ–±–ª–∞—Å—Ç–∏ (DSL)
```scala
extension [Storage](storage: Storage)(using tools: StorageTC[Storage])
  def extract(key: Int)			    = tools.getVal(storage)(key)
  def keep(pair: (Int, String))	= tools.setVal(storage).tupled(pair)
  def mergeWith(other: Storage)	= tools.combine(storage, other)
object Storage:
  def empty[Storage: StorageTC] = summon[StorageTC[Storage]].empty
```
—á—Ç–æ–±—ã –∏–º–∏ –±—ã–ª–æ —É–¥–æ–±–Ω–æ –æ–ø–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–∏ –æ–ø–∏—Å–∞–Ω–∏–∏ –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏:
```scala
def businessLogic[Storage: StorageTC](storage1: Storage, storage2: Storage) =
  storage1 mergeWith storage2 keep (42 -> "–æ—Ç–≤–µ—Ç") extract 42
```

–ß—Ç–æ–±—ã –≤—ã–∑–≤–∞—Ç—å –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫—É —Å —Ö—Ä–∞–Ω–∏–ª–∏—â–µ–º –∫–∞–∫–æ–≥–æ-—Ç–æ —Ç–∏–ø–∞, –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–∏—Ç—å ‚Äú—Å–≤–∏–¥–µ—Ç–µ–ª—å—Å—Ç–≤–æ‚Äù —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è `StorageTC` –¥–ª—è —ç—Ç–æ–≥–æ —Ç–∏–ø–∞:
```scala
type Storage = Int => Option[String]

given StorageTC[Storage] = new:
  def empty = _ => None
  def getVal (storage: Storage)(key: Int) = storage(key)
  def setVal (storage: Storage)(key: Int, value: String) =
    k => Option.when(k == key)(value) orElse storage(k)
  def combine(first: Storage, other: Storage): Storage =
    first combine other
```
–ü–æ —Å—É—Ç–∏, —ç—Ç–æ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞.

–í–æ—Ç —Ç–µ–ø–µ—Ä—å –º—ã –º–æ–∂–µ–º –≤—ã–∑–≤–∞—Ç—å –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫—É –¥–ª—è –¥–≤—É—Ö —Ä–∞–∑–Ω—ã—Ö (–Ω—É, —Ç–∏–ø–∞ üòâ) —Ö—Ä–∞–Ω–∏–ª–∏—â `Storage`:
```scala
val emptyStorage = Storage.empty[Storage]
businessLogic(emptyStorage, emptyStorage) // Some("–æ—Ç–≤–µ—Ç")
```

–ü–æ–¥–≤–æ–¥—è –∏—Ç–æ–≥–∏ —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞ –º–æ–∂–Ω–æ —Å–∫–∞–∑–∞—Ç—å, —á—Ç–æ
- –∫–ª–∞—Å—Å—ã —Ç–∏–ø–æ–≤ –ø–æ–∑–≤–æ–ª—è—é—Ç –ø–æ–ª–Ω–æ—Å—Ç—å—é –ø–æ–∫—Ä—ã—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –û–û–ü-—à–Ω—ã—Ö —Ä–µ—à–µ–Ω–∏–π;
- —Å–ª–æ–π ‚Äú—Å–∏–Ω—Ç–∞–∫—Å–∏—á–µ—Å–∫–æ–≥–æ —Å–∞—Ö–∞—Ä–∞‚Äù ‚Äì —Ç–µ—Ä–º–∏–Ω–æ–≤ –ø—Ä–µ–¥–º–µ—Ç–Ω–æ–π –æ–±–ª–∞—Å—Ç–∏ ‚Äì –Ω–µ–æ–±—è–∑–∞—Ç–µ–ª–µ–Ω, –Ω–æ –∑–∞—á–∞—Å—Ç—É—é –æ–Ω –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–∏—Å–∞—Ç—å –æ—á–µ–Ω—å –≤—ã—Ä–∞–∑–∏—Ç–µ–ª—å–Ω—ã–π –∫–æ–¥;
- —Ä–µ—à–µ–Ω–∏–µ –∑–∞–¥–∞—á–∏ —á–µ—Ä–µ–∑ —Ç—Ä–∞–¥–∏—Ü–∏–æ–Ω–Ω–æ–µ –û–û–ü –∏ —á–µ—Ä–µ–∑ –∫–ª–∞—Å—Å—ã —Ç–∏–ø–æ–≤ –ø–æ –æ–±—ä–µ–º—É –ø—Ä–∏–º–µ—Ä–Ω–æ –æ–¥–∏–Ω–∞–∫–æ–≤—ã;
- –∫–ª–∞—Å—Å—ã —Ç–∏–ø–æ–≤ –ø–æ–∑–≤–æ–ª—è—é—Ç –æ–ø–∏—Å—ã–≤–∞—Ç—å —Ç—Ä–µ–±—É–µ–º–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ –¥–ª—è –ª—é–±—ã—Ö —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö —Ç–∏–ø–æ–≤, –≤ —Ç–æ–º —á–∏—Å–ª–µ –∏ –∑–∞–∫—Ä—ã—Ç—ã—Ö –¥–ª—è –¥–∞–ª—å–Ω–µ–π—à–µ–≥–æ –Ω–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è (`final class`); 
- –ø—Ä–∏–º–µ—Ä –º–µ—Ç–æ–¥–∞ `combine` –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–µ—Ç –Ω–µ–¥–æ—Å—Ç–∞—Ç–∫–∏ –û–û–ü –ø–æ–¥—Ö–æ–¥–∞, –∫–æ–≥–¥–∞ ‚Äú–Ω–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ‚Äù –∏ ‚Äú–ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –º–µ—Ç–æ–¥–æ–≤‚Äù –º–æ–∂–µ—Ç —Å–¥–µ–ª–∞—Ç—å –∫–æ–¥ –ø–ª–æ—Ö–æ –ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º—ã–º; –¥–∞ –∏, –≤ —Ü–µ–ª–æ–º, –∏–Ω–∫–∞–ø—Å—É–ª—è—Ü–∏—è, ‚Äú–≤–ª–∞–¥–µ–Ω–∏–µ –º–µ—Ç–æ–¥–æ–≤ –¥–∞–Ω–Ω—ã–º–∏‚Äù –Ω–µ –≤—Å–µ–≥–¥–∞ —É–¥–∞—á–Ω–æ –ø—Ä–µ–¥–º–µ—Ç–Ω—É—é –æ–±–ª–∞—Å—Ç—å.

–í –¥–æ–ø–æ–ª–Ω–µ–Ω–∏–µ –ø–∞—Ä–æ—á–∫–∞ —Å—Ç–∞—Ç–µ–π –Ω–∞ —Ç—É –∂–µ —Ç–µ–º—É:
- –≤–∏–∫–∏-—Å—Ç—Ä–∞–Ω–∏—Ü–∞ Haskell [OOP vs type classes](https://wiki.haskell.org/OOP_vs_type_classes);
- –ø–æ—Å—Ç –∏–∑ –±–ª–æ–≥–∞ –ê–ª–µ–∫—Å–∞–Ω–¥—Ä—É –ù–µ–¥–µ–ª—å–∫—É [OOP vs Type Classes, Part 1: Ideology](https://alexn.org/blog/2022/05/13/oop-vs-type-classes-part-1-ideology/);
- —Å–∫–∞–∑–∫–∞ [–û —Ç—è–∂—ë–ª–æ–π —Å—É–¥—å–±–µ –≥–ª–∞–≥–æ–ª–æ–≤ –≤ –ö–æ—Ä–æ–ª–µ–≤—Å—Ç–≤–µ –°—É—â–µ—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã—Ö](https://ru.hexlet.io/blog/posts/javaland).

<anchor>container_types</anchor>
## –¢–∏–ø—ã-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã

–û–±–æ–±—â—ë–Ω–Ω—ã–µ —Ç–∏–ø—ã (generics) –ø–æ—è–≤–∏–ª–∏—Å—å –≤ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–∏, –∫–æ–≥–¥–∞ –≤ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–º (–ø–æ –±–æ–ª—å—à–µ–π —á–∞—Å—Ç–∏) —è–∑—ã–∫–µ [ML](https://ru.wikipedia.org/wiki/ML) —Ä–µ–∞–ª–∏–∑–æ–≤–∞–ª–∏ —ç–ª–µ–º–µ–Ω—Ç—ã [—Å–∏—Å—Ç–µ–º—ã F](https://ru.wikipedia.org/wiki/%D0%A1%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D0%B0_F). –¢–æ –±—ã–ª–∏ –ø—Ä–æ—Å—Ç—ã–µ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä—ã —Ç–∏–ø–æ–≤ –≤–∏–¥–∞ $\star\rightarrow\star$, –æ—Å–Ω–æ–≤–∞ [–ø—Ä–µ–¥–∏–∫–∞—Ç–∏–≤–Ω–æ–≥–æ –ø–æ–ª–∏–º–æ—Ä—Ñ–∏–∑–º–∞](https://ru.wikipedia.org/wiki/%D0%9F%D0%B0%D1%80%D0%B0%D0%BC%D0%B5%D1%82%D1%80%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%B8%D0%B9_%D0%BF%D0%BE%D0%BB%D0%B8%D0%BC%D0%BE%D1%80%D1%84%D0%B8%D0%B7%D0%BC#%D0%9F%D1%80%D0%B5%D0%B4%D0%B8%D0%BA%D0%B0%D1%82%D0%B8%D0%B2%D0%BD%D1%8B%D0%B9_%D0%BF%D0%BE%D0%BB%D0%B8%D0%BC%D0%BE%D1%80%D1%84%D0%B8%D0%B7%D0%BC), –∏ –¥—Ä—É–≥–∏–µ –≤–∏–¥—ã —Ç–æ–≥–¥–∞ –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–ª–∏—Å—å. –ü–æ–∑–¥–Ω–µ–µ —Ç–∞–∫–∏–µ –æ–±–æ–±—â—ë–Ω–Ω—ã–µ —Ç–∏–ø—ã –ø–æ—è–≤–∏–ª–∏—Å—å –∏ –≤ –±–æ–ª–µ–µ –ø–æ–ø—É–ª—è—Ä–Ω—ã—Ö —è–∑—ã–∫–∞—Ö: C++, Delphi, Java, C# –∏ —Ç.–ø. –ò–∑–Ω–∞—á–∞–ª—å–Ω–æ –§–ü-—à–Ω–∞—è ‚Äú–º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∞—è‚Äù –∞–±—Å—Ç—Ä–∞–∫—Ü–∏—è —Å—Ç–∞–ª–∞ –ø–æ–≤—Å–µ–º–µ—Å—Ç–Ω–æ–π (–≤–ø—Ä–æ—á–µ–º, —Ç–∞–∫–∏–º –∂–µ –æ–±—Ä–∞–∑–æ–º –∑–∞—Ä–æ–¥–∏–ª–æ—Å—å –∏ —Ä–∞–∑–≤–∏–≤–∞–µ—Ç—Å—è –≤—Å—ë –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ), –∏ –≤–æ–∑–Ω–∏–∫–ª–∞ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç—å –¥–æ–Ω–µ—Å—Ç–∏ –µ—ë –¥–æ —à–∏—Ä–æ–∫–æ–π –ø—É–±–ª–∏–∫–∏. –í –∫–∞—á–µ—Å—Ç–≤–µ —É–¥–æ–±–Ω–æ–π –∞–ª–ª–µ–≥–æ—Ä–∏–∏ –¥–ª—è –æ–±–æ–±—â—ë–Ω–Ω—ã—Ö —Ç–∏–ø–æ–≤ –≤–∏–¥–∞ $\star\rightarrow\star$, –ø—Ä–∏–∑–≤–∞–Ω–Ω–æ–π ‚Äú–≤–∏–∑—É–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å‚Äù –≤ –≤–æ–æ–±—Ä–∞–∂–µ–Ω–∏–∏ —á–∏—Ç–∞—Ç–µ–ª–µ–π –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ –∫–ª—é—á–µ–≤—ã–µ —Å–æ–æ—Ç–Ω–æ—à–µ–Ω–∏—è, —á–∞—Å—Ç–æ –ø—Ä–∏–≤–ª–µ–∫–∞–µ—Ç—Å—è –∏–¥–µ—è ‚Äú*–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞*‚Äù. –ï–π –∏ –ø–æ—Å–≤—è—â—ë–Ω —ç—Ç–æ—Ç —Ä–∞–∑–¥–µ–ª.

<anchor>container_conecpt</anchor>
### –ò–¥–µ—è –æ–±–æ–±—â—ë–Ω–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞

–û–ø—è—Ç—å –∂–µ, –Ω–∞—á–Ω—ë–º —Å –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –ø—Ä–∏–º–µ—Ä–∞:
```scala
case class WithLog[A](a: A, log: String)

val intWithLog = WithLog(42, "—Å–æ–∑–¥–∞–ª–∏ –∑–Ω–∞—á–µ–Ω–∏–µ;")
val stringWithLog = WithLog(
  intWithLog.a.toString,
  intWithLog.log + " –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–ª–∏ –µ–≥–æ –≤ —Å—Ç—Ä–æ–∫—É;"
)

stringWithLog.a // "42"
```
–¢—Ä–∞–∫—Ç–æ–≤–∫–∞ `WithLog[A]` –∫–∞–∫ ‚Äú–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞‚Äù –¥–ª—è –∑–Ω–∞—á–µ–Ω–∏—è –Ω–µ–∫–æ–≥–æ —Ç–∏–ø–∞ `A` –≤–µ—Å—å–º–∞ –æ—á–µ–≤–∏–¥–Ω–∞:
- –≤—ã–∑—ã–≤–∞—è –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä `WithLog[A]`, –º—ã ‚Äú*–∑–∞–ø–∞–∫–æ–≤—ã–≤–∞–µ–º*‚Äù –∑–Ω–∞—á–µ–Ω–∏–µ –ø—Ä–µ—Å–ª–æ–≤—É—Ç–æ–≥–æ —Ç–∏–ø–∞ `A` –≤ *–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä*;
- –≤ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–º –ø–æ–ª–µ `log` –æ–±–æ–±—â—ë–Ω–Ω–æ–≥–æ –∫–ª–∞—Å—Å–∞ `WithLog` –º—ã –º–æ–∂–µ–º –Ω–∞–∫–∞–ø–ª–∏–≤–∞—Ç—å –∂—É—Ä–Ω–∞–ª –æ–ø–µ—Ä–∞—Ü–∏–π, –ø—Ä–æ–∏–∑–≤–æ–¥–∏–º—ã—Ö —Å–æ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏ –ø–æ–ª—è `a`;
- –≤ –ø–æ—Å–ª–µ–¥–Ω–µ–π —Å—Ç—Ä–æ—á–∫–µ —Å –ø–æ–º–æ—â—å—é –ø—Ä–æ–µ–∫—Ç–æ—Ä–∞ `a` –º—ã ‚Äú*—Ä–∞—Å–ø–∞–∫–æ–≤—ã–≤–∞–µ–º*‚Äù –µ–≥–æ.
–¢–∞–∫ –º–æ–∂–µ—Ç –±—ã—Ç—å, —á—Ç–æ –ø–æ–Ω—è—Ç–∏–µ ‚Äú–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä‚Äù –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ —Ä–∞—Å–ø–∞–∫–æ–≤–∫–∏ –∑–Ω–∞—á–µ–Ω–∏—è?

–ù–æ, –ø–æ–∂–∞–ª—É–π, —Å–∞–º—ã–º –ø–æ–ø—É–ª—è—Ä–Ω—ã–º –ø—Ä–∏–º–µ—Ä–æ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ —è–≤–ª—è–µ—Ç—Å—è –æ–±–æ–±—â—ë–Ω–Ω—ã–π —Å–ø–∏—Å–æ–∫, –∏–º–µ—é—â–∏–π—Å—è –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏ –≤–æ –≤—Å–µ—Ö —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏-—Ç–∏–ø–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —è–∑—ã–∫–∞—Ö –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è:
```scala
val list: List[Int] = List(4, 2)
val emptyList = list.filter(_ > 42) // –ø—É—Å—Ç–æ!

val i1: Int = list.???      // –∫–∞–∫–æ–µ –∏–∑ –∑–Ω–∞—á–µ–Ω–∏–π "—Ä–∞—Å–ø–∞–∫–æ–≤–∞—Ç—å"???
val i2: Int = emptyList.??? // –∫–∞–∫ –≤—ã—Ç–∞—â–∏—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ –∏–∑ –ø—É—Å—Ç–æ–≥–æ —Å–ø–∏—Å–∫–∞???
```
–ò —Ç—É—Ç —Å–ø–∏—Å–æ–∫ –ø—Ä–µ–ø–æ–¥–Ω–æ—Å–∏—Ç —Å—é—Ä–ø—Ä–∏–∑—ã:
- –Ω–µ –≤—Å–µ–≥–¥–∞ –≤–æ–∑–º–æ–∂–Ω–æ ‚Äú—Ä–∞—Å–ø–∞–∫–æ–≤–∞—Ç—å‚Äù —Å–ø–∏—Å–æ–∫, –≤–µ–¥—å —ç—Ç–æ—Ç –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—É—Å—Ç—ã–º;
- –Ω–µ–ø–æ–Ω—è—Ç–Ω–æ, —á—Ç–æ –Ω–∞–∑—ã–≤–∞—Ç—å ‚Äú—Ä–∞—Å–ø–∞–∫–æ–≤–∫–æ–π‚Äù, –µ—Å–ª–∏ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ –Ω–µ—Å–∫–æ–ª—å–∫–æ –∑–Ω–∞—á–µ–Ω–∏–π.
–ï—â—ë –ø–µ—Ä–≤—ã–º —Å–≤–æ–π—Å—Ç–≤–æ–º –æ–±–ª–∞–¥–∞—é—Ç —Ç–∞–∫–∂–µ –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã Scala, –Ω–∞–ø—Ä–∏–º–µ—Ä, `Option`, `Either`, `Try` –∏–ª–∏ `Future`.

–¢–æ–≥–¥–∞ –±—É–¥–µ–º –Ω–∞–∑—ã–≤–∞—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞–º–∏ —Ç–∞–∫–∏–µ –æ–±–æ–±—â—ë–Ω–Ω—ã–µ —Ç–∏–ø—ã, –≤ –∫–æ—Ç–æ—Ä—ã—Ö –∑–Ω–∞—á–µ–Ω–∏—è —Ç–∏–ø–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ ‚Äú—Ö—Ä–∞–Ω—è—Ç—Å—è‚Äù –≤ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö –ø–æ–ª—è—Ö?

–ù–æ –≤–æ—Ç –µ—â—ë –æ–¥–∏–Ω –ø—Ä–∏–º–µ—Ä:
```scala
type Func[A] = String => A
val parseInt: Func[A] = _.toIntOption.getOrElse(0)
val duplicateString: String => String = (s: String) => s concat s
val parseDouleInt: Func[A] = parseInt compose duplicateString
parseDouleInt("42") // 4242
```
–û–±–æ–±—â—ë–Ω–Ω—ã–π —Ç–∏–ø `Func[A]` –æ–ø–∏—Å—ã–≤–∞–µ—Ç —Ñ—É–Ω–∫—Ü–∏—é, –≤–æ–∑–≤—Ä–∞—â–∞—é—â—É—é –∑–Ω–∞—á–µ–Ω–∏–µ —Ç–∏–ø–∞ `A`, –≤—ã—á–∏—Å–ª—è–µ–º—É—é –Ω–∞ –æ—Å–Ω–æ–≤–µ –ø–µ—Ä–µ–¥–∞–Ω–Ω–æ–π —Ç—É–¥–∞ —Å—Ç—Ä–æ–∫–∏. –§—É–Ω–∫—Ü–∏—è `parseDouleInt: Func[Int]` –ø—Ä–µ–¥–≤–∞—Ä—è–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ `parseInt: Func[Int]` —É–¥–≤–æ–µ–Ω–∏–µ–º –∏—Å—Ö–æ–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–∏ ‚Äì –º—ã –æ–ø—è—Ç—å –ø–æ–ª—É—á–∞–µ–º –Ω–æ–≤—ã–π ‚Äú–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä‚Äù –Ω–∞ –æ—Å–Ω–æ–≤–µ –∏—Å—Ö–æ–¥–Ω–æ–≥–æ. –í –ø–æ—Å–ª–µ–¥–Ω–µ–π —Å—Ç—Ä–æ—á–∫–µ, –º—ã –æ–¥–Ω–æ–∑–Ω–∞—á–Ω–æ ‚Äú—Ä–∞—Å–ø–∞–∫–æ–≤—ã–≤–∞–µ–º –∏–∑ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞‚Äù –∑–Ω–∞—á–µ–Ω–∏–µ —Ç–∏–ø–∞ `A = Int`, –∏—Å–ø–æ–ª—å–∑—É—è —Å—Ç—Ä–æ–∫—É `"42"`. –ù–æ –ø—Ä–∏ —ç—Ç–æ–º, —Å–∞–º–æ ‚Äú—Ö—Ä–∞–Ω–µ–Ω–∏–µ‚Äù —Ä–∞—Å–ø–∞–∫–æ–≤—ã–≤–∞–µ–º–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è –¥–∞–∂–µ –Ω–µ –ø—Ä–µ–¥—É—Å–º–æ—Ç—Ä–µ–Ω–æ!

–ë–æ–ª–µ–µ –∑–∞–ø—É—Ç–∞–Ω–Ω—ã–π —Å–ª—É—á–∞–π –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Ç–∞–∫–æ–π —Ç–∏–ø (—Ä–∞–Ω–µ–µ –ø—Ä–∏ –æ–±—Å—É–∂–¥–µ–Ω–∏–∏ –≤–∞—Ä–∏–∞–Ω—Ç–Ω–æ—Å—Ç–∏ –æ–±–æ–±—â—ë–Ω–Ω—ã—Ö —Ç–∏–ø–æ–≤ —É–∂–µ —É–ø–æ–º–∏–Ω–∞–ª–æ—Å—å —á—Ç–æ-—Ç–æ –ø–æ—Ö–æ–∂–µ–µ):
```scala
type Cont[A] = (A => Boolean) => Boolean

def value() = "–∑–Ω–∞—á–µ–Ω–∏–µ"
val contStr: Cont[String] = continuation => continuation(value()) // –∑–∞–º—ã–∫–∞–Ω–∏–µ!

val strToInt: String => Int = _.length
val contInt: Cont[Int]    = continuation => contStr(strToInt andThen continuation)

val strVal: String = contStr.??? // –∫–∞–∫ —Ä–∞—Å–ø–∞–∫–æ–≤–∞—Ç—å???
val intVal: Int    = contInt.??? // –∫–∞–∫ —Ä–∞—Å–ø–∞–∫–æ–≤–∞—Ç—å???

contStr(_ == "–∑–Ω–∞–Ω–∏–µ") // false. "–∑–Ω–∞—á–µ–Ω–∏–µ" –Ω–µ —Ä–∞–≤–Ω–æ "–∑–Ω–∞–Ω–∏–µ"!
contInt(_ <  10)       // true.  "–∑–Ω–∞—á–µ–Ω–∏–µ".lenght –º–µ–Ω—å—à–µ 10
```
–¢—É—Ç —É –Ω–∞—Å —Ç–∏–ø —Ñ—É–Ω–∫—Ü–∏–∏, –ø—Ä–∏–Ω–∏–º–∞—é—â–µ–π *—Ñ—É–Ω–∫—Ü–∏—é-–ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ* –¥–ª—è —Ç–∏–ø–∞ `A` –∏ –≤–æ–∑–≤—Ä–∞—â–∞—é—â–∏–π –∑–Ω–∞—á–µ–Ω–∏–µ —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ —Ç–∏–ø–∞. –§—É–Ω–∫—Ü–∏—è-–ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ –º–æ–∂–µ—Ç –∫–∞–∫ –∑–∞–±—ã–≤–∞—Ç—å –∏—Å—Ö–æ–¥–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ, —Ç–∞–∫ –∏, –Ω–∞–æ–±–æ—Ä–æ—Ç, –æ–±–æ–≥–∞—â–∞—Ç—å –µ–≥–æ (—Ç–æ–≥–¥–∞ —ç—Ç–æ –∑–Ω–∞—á–µ–Ω–∏–µ —É–¥–∞—Å—Ç—Å—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å). –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–∏–ø–∞ `Cont[A]` –Ω–µ –ø—Ä–µ–¥–ø–æ–ª–∞–≥–∞–µ—Ç —Ö—Ä–∞–Ω–µ–Ω–∏—è –∑–Ω–∞—á–µ–Ω–∏–π, –ø–æ—ç—Ç–æ–º—É –¥–ª—è –Ω–µ–≥–æ –Ω–µ—Ç –Ω–∏ —Ç–æ–ª—å–∫–æ –ø—Ä–æ–µ–∫—Ç–æ—Ä–∞ —ç—Ç–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è, –Ω–∏ –≤–æ–æ–±—â–µ –∫–∞–∫–æ–≥–æ-–ª–∏–±–æ —á–µ—Å—Ç–Ω–æ–≥–æ —Å–ø–æ—Å–æ–±–∞ —Ä–∞—Å–ø–∞–∫–æ–≤–∫–∏! –¢–µ–º –Ω–µ –º–µ–Ω–µ–µ, –º–æ–∂–Ω–æ —Å—á–∏—Ç–∞—Ç—å, —á—Ç–æ –∑–Ω–∞—á–µ–Ω–∏–µ –≤—Å—ë-—Ç–∞–∫–∏ —Å–æ–¥–µ—Ä–∂–∏—Ç—Å—è –≤–Ω—É—Ç—Ä–∏ `contStr` ‚Äì –≤ –¥–∞–Ω–Ω–æ–º —Å–ª—É—á–∞–µ, —ç—Ç–æ –º–µ—Ç–æ–¥ `value()`, —É–º–µ—é—â–∏–π –≤—ã—á–∏—Å–ª—è—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ –Ω—É–∂–Ω–æ–≥–æ —Ç–∏–ø–∞. –î—Ä—É–≥–∞—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–Ω–∞—è –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è `contInt` –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ `contStr` —Å –ø–æ–º–æ—â—å—é —Ñ—É–Ω–∫—Ü–∏–∏ `strToInt` –∏ –ø–µ—Ä–µ–Ω–∏–º–∞–µ—Ç –≤—Å—ë —Ç–æ—Ç –∂–µ –º–µ—Ç–æ–¥ `value`. –ï–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –º–æ–∂–Ω–æ –ø—Ä–æ—Å–ª–µ–¥–∏—Ç—å –≤ –¥–≤—É—Ö –ø–æ—Å–ª–µ–¥–Ω–∏—Ö —Å—Ç—Ä–æ—á–∫–∞—Ö. –í –∏—Ç–æ–≥–µ –¥–ª—è –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–∞ —Ç–∏–ø–æ–≤ `Cont` –ø–æ–ª—É—á–∞–µ–º —Å–ª–µ–¥—É—é—â–µ–µ:
- ‚Äú—Ä–∞—Å–ø–∞–∫–æ–≤–∫–∞‚Äù –∑–Ω–∞—á–µ–Ω–∏—è –Ω–µ –ø—Ä–µ–¥—É—Å–º–æ—Ç—Ä–µ–Ω–∞,
- –Ω–æ —Ç–∏–ø –æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –ø–æ–ª–µ–∑–Ω—ã–º ‚Äì –∏–∑ –µ–≥–æ –∑–Ω–∞—á–µ–Ω–∏–π –º—ã –º–æ–∂–µ–º –ø–æ–ª—É—á–∞—Ç—å –∑–Ω–∞—á–µ–Ω–∏—è –¥—Ä—É–≥–∏—Ö —Ç–∏–ø–æ–≤;
- –≤–Ω—É—Ç—Ä–∏ —Å–∫—Ä—ã—Ç–Ω–æ ‚Äú—Ö—Ä–∞–Ω–∏—Ç—Å—è‚Äù –∑–Ω–∞—á–µ–Ω–∏–µ —Ü–µ–ª–µ–≤–æ–≥–æ —Ç–∏–ø–∞, –∞ —Ç–æ—á–Ω–µ–µ, —Å–ø–æ—Å–æ–± –µ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è;
- –∏–∑ –æ–¥–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è –º–æ–∂–Ω–æ –ø–æ–ª—É—á–∏—Ç—å –¥—Ä—É–≥–∏–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –±–µ–∑ —Ä–∞—Å–ø–∞–∫–æ–≤–∫–∏!
–ú–æ–∂–Ω–æ –ª–∏ `Cont[A]` —Å—á–∏—Ç–∞—Ç—å ‚Äú–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–º‚Äù? –í–æ–ø—Ä–æ—Å –≤—ã–≥–ª—è–¥–∏—Ç —Å–ø–æ—Ä–Ω—ã–º, –Ω–æ –¥–ª—è —Å–æ–¥–µ—Ä–∂–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –¥–∞–ª—å–Ω–µ–π—à–∏—Ö —Ä–∞—Å—Å—É–∂–¥–µ–Ω–∏–π –ø—Ä–µ–¥–ª–∞–≥–∞—é —Å—á–∏—Ç–∞—Ç—å, —á—Ç–æ –º–æ–∂–Ω–æ.

–ü—Ä–∏–≤–µ–¥—ë–Ω–Ω—ã–µ –ø—Ä–∏–º–µ—Ä—ã –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É—é—Ç, —á—Ç–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–Ω—ã–µ —Ç–∏–ø—ã –Ω–µ —Å—Ç–æ–ª—å–∫–æ ‚Äú—Ö—Ä–∞–Ω—è—Ç‚Äù –∑–Ω–∞—á–µ–Ω–∏–µ, —Å–∫–æ–ª—å–∫–æ —Å–æ–¥–µ—Ä–∂–∞—Ç –Ω–µ–∫–∏–π *–≤—ã—á–∏—Å–ª–∏—Ç–µ–ª—å–Ω—ã–π –∫–æ–Ω—Ç–µ–∫—Å—Ç*, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–∑–≤–æ–ª—è–µ—Ç (–∏–ª–∏ –Ω–µ –ø–æ–∑–≤–æ–ª—è–µ—Ç) –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∑–Ω–∞—á–µ–Ω–∏—è —É–∫–∞–∑–∞–Ω–Ω–æ–≥–æ —Ç–∏–ø–∞. –ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –ø–æ—è–≤–ª—è–µ—Ç—Å—è ‚Äú–Ω–∞—á–∞–ª—å–Ω—ã–π‚Äù –∫–æ–Ω—Ç–µ–∫—Å—Ç, –∫–æ—Ç–æ—Ä—ã–π –º–µ–Ω—è–µ—Ç—Å—è –ø—Ä–∏ ‚Äú–ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è—Ö –≤–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞‚Äù –∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø—Ä–∏ ‚Äú—Ä–∞—Å–ø–∞–∫–æ–≤–∫–µ‚Äù.

–í–æ—Ç –µ—â—ë –ø–∞—Ä–∞ —Ç—Ä–∏–≤–∏–∞–ª—å–Ω—ã—Ö, –Ω–æ –≤–∞–∂–Ω—ã—Ö —Ç–∏–ø–æ–≤-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤:
```scala
type Id[A] = A
type Void[A] = Unit
```

–ò—Ç–∞–∫, 
> *–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–º* –±—É–¥–µ–º –Ω–∞–∑—ã–≤–∞—Ç—å –æ–±–æ–±—â—ë–Ω–Ω—ã–π —Ç–∏–ø –≤–∏–¥–∞ $\star\rightarrow\star$, *–∫–æ–≤–∞—Ä–∏–∞–Ω—Ç–Ω—ã–π* –ø–æ —Å–≤–æ–µ–º—É –ø–∞—Ä–∞–º–µ—Ç—Ä—É. –í —ç—Ç–æ–º —Å–ª—É—á–∞–µ –º–æ–∂–Ω–æ –≥–æ–≤–æ—Ä–∏—Ç—å –æ —Ç–æ–º, —á—Ç–æ –ª—é–±—É—é —Ñ—É–Ω–∫—Ü–∏—é `A => B` –º–æ–∂–Ω–æ ‚Äú–ø—Ä–∏–º–µ–Ω–∏—Ç—å –∫–æ –≤—Å–µ–º —Ö—Ä–∞–Ω—è—â–∏–º—Å—è –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ `F[A]` –∑–Ω–∞—á–µ–Ω–∏—è–º‚Äù, —á—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å `F[B]`;

–û–±–æ–±—â–µ–Ω–∏–µ–º –ø—Ä–∏–≤–µ–¥—ë–Ω–Ω—ã—Ö –≤—ã—à–µ —Å–ª—É—á–∞–µ–≤ —è–≤–ª—è—é—Ç—Å—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –¥–ª—è —Å—Ä–∞–∑—É –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –ø—Ä–æ—Å—Ç—ã—Ö —Ç–∏–ø–æ–≤ (N-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã, –¥–ª—è –Ω–µ–∫–æ–≥–æ $N>1$), –Ω–∞–ø—Ä–∏–º–µ—Ä,
```scala
type Triple[+A, +B, +C] = (A, B Either C) // A √ó (B + C)
```
–¢–∞–∫–∏–µ –æ–±–æ–±—â—ë–Ω–Ω—ã–µ —Ç–∏–ø—ã —Ç–∞–∫–∂–µ –Ω–µ—Ä–µ–¥–∫–æ –≤—Å—Ç—Ä–µ—á–∞—é—Ç—Å—è –≤ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–∏, –∏ –æ–Ω–∏ –µ—â—ë –±—É–¥—É—Ç —É–ø–æ–º—è–Ω—É—Ç—ã –¥–∞–ª–µ–µ.

–ë–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ –æ–±–æ–±—â—ë–Ω–Ω—ã—Ö —Ç–∏–ø–æ–≤, —Å –∫–æ—Ç–æ—Ä—ã–º –ø—Ä–∏—Ö–æ–¥–∏—Ç—Å—è –∏–º–µ—Ç—å –¥–µ–ª–æ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç–∞–º ‚Äì —ç—Ç–æ –∫–æ–≤–∞—Ä–∏–∞–Ω—Ç–Ω—ã–µ —Ç–∏–ø—ã-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã. –ù–æ –æ—á–µ–≤–∏–¥–Ω–æ, —á—Ç–æ –Ω–µ –≤—Å–µ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä—ã —Ç–∏–ø–æ–≤ —è–≤–ª—è—é—Ç—Å—è –∫–æ–≤–∞—Ä–∏–∞–Ω—Ç–Ω—ã–º–∏. *–ö–æ–Ω—Ç—Ä–∞–≤–∞—Ä–∏–∞–Ω—Ç–Ω—ã–µ* –∏ *–∏–Ω–≤–∞—Ä–∏–∞–Ω—Ç–Ω—ã–µ* —Ç–∏–ø—ã —É–∂–µ –Ω–µ –ø–æ–ª—É—á–∏—Ç—å—Å—è –æ—Ç–Ω–µ—Å—Ç–∏ –∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞–º:
```scala
type Contravaianat[-A] = A => String
type Invariant    [ A] = A => A
```

–¢–∞–∫–∂–µ –∫–∞–∫ –∏ –¥–ª—è –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–∞ –¥—Ä—É–≥–∏—Ö —Ç–∏–ø–æ–≤, –≤–∞–∂–Ω–æ –ø–æ–Ω–∏–º–∞–Ω–∏–µ, –∫–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∑–Ω–∞—á–µ–Ω–∏—è —Ç–∏–ø–æ–≤-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤. –° —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–π —Ç–æ—á–∫–∏ –∑—Ä–µ–Ω–∏—è *–ª—é–±–æ–π* –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–Ω—ã–π —Ç–∏–ø –ø–æ–ª–Ω–æ—Å—Ç—å—é –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–µ–π ‚Äú—Ä–∞—Å–ø–∞–∫–æ–≤–∫–∏‚Äù `F[A] = [B] => ???[A, B] => B`. –ó–¥–µ—Å—å `???[A, B]` ‚Äì —ç—Ç–æ –≤—Å—ë, —á—Ç–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –¥–ª—è —Ç–∞–∫–æ–≥–æ –ø—Ä–æ—Ü–µ—Å—Å–∞. –û–¥–Ω–∞–∫–æ, —Ç–∏–ø $B$ –≤ –æ–±—â–µ–º —Å–ª—É—á–∞–µ –Ω–µ —Å–æ–≤–ø–∞–¥–∞–µ—Ç —Å $A$, –∫–∞–∫ —ç—Ç–æ –±—ã–ª–æ —Å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–º `Cont`, –∑–Ω–∞—á–∏—Ç, –∏ —Ç–µ—Ä–º–∏–Ω ‚Äú—Ä–∞—Å–ø–∞–∫–æ–≤–∫–∞‚Äù –º–æ–∂–µ—Ç –ø–æ–∫–∞–∑–∞—Ç—å—Å—è –Ω–µ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —É–¥–∞—á–Ω—ã–º. –ù–æ –¥–ª—è –Ω–∞—Å –∂–µ —ç—Ç–æ –Ω–µ –ø—Ä–æ–±–ª–µ–º–∞ üòâ?

–ü–æ–º–∏–º–æ —Ä–∞—Å–ø–∞–∫–æ–≤–∫–∏ —Ç–∞–∫–∏—Ö —Ç–∏–ø–æ–≤, –≤–∞–∂–Ω—ã –∏ –¥—Ä—É–≥–∏–µ –∏—Ö ‚Äú–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏‚Äù –≤—Ä–æ–¥–µ `map`, `flatMap` –∏ —Ç.–ø. –í Scala –∏ –º–Ω–æ–≥–∏—Ö –¥—Ä—É–≥–∏—Ö —è–∑—ã–∫–∞—Ö –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è –æ–Ω–∏ –æ–±—ã—á–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã –∫–∞–∫ –æ—Ç–¥–µ–ª—å–Ω—ã–µ –º–µ—Ç–æ–¥—ã —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏—Ö –æ–±–æ–±—â—ë–Ω–Ω—ã—Ö –∫–ª–∞—Å—Å–æ–≤. –í—ã–Ω–µ—Å—Ç–∏ —ç—Ç–∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –≤ –Ω–µ–∫–∏–π *–æ–±—â–∏–π* —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏–π —Ç—Ä–µ–π—Ç –Ω–µ –ø–æ–ª—É—á–∏—Ç—Å—è, –≤–≤–∏–¥—É —à–∏—Ä–æ–∫–æ–≥–æ —Ä–∞–∑–Ω–æ–æ–±—Ä–∞–∑–∏—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–Ω—ã—Ö —Ç–∏–ø–æ–≤, –Ω–µ —Å–≤—è–∑–∞–Ω–Ω—ã—Ö –Ω–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ–º. –î–∞ –∏, –∫–∞–∫ —É–∂–µ —É–ø–æ–º–∏–Ω–∞–ª–æ—Å—å –≤—ã—à–µ, –û–û–ü-—à–Ω—ã–π –ø–æ–¥—Ö–æ–¥ –ø–ª–æ—Ö–æ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å —Ñ—É–Ω–∫—Ü–∏—è–º–∏ –∫–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–∏—è (–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤, –≤ –Ω–∞—à–µ–º —Å–ª—É—á–∞–µ). –î–ª—è –µ–¥–∏–Ω–æ–æ–±—Ä–∞–∑–Ω–æ–π —Ä–∞–±–æ—Ç—ã —Å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–Ω—ã–º–∏ —Ç–∏–ø–∞–º–∏ —É–¥–æ–±–Ω–µ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å *–∫–ª–∞—Å—Å—ã —Ç–∏–ø–æ–≤ –≤—ã—Å–æ–∫–æ–≥–æ —Ä–æ–¥–∞*.

<anchor>container_typeclasses</anchor>
### –ö–ª–∞—Å—Å—ã —Ç–∏–ø–æ–≤ –¥–ª—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤

–•–∞—Ä–∞–∫—Ç–µ—Ä–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–Ω—ã—Ö —Ç–∏–ø–æ–≤ —Ä–∞—Å–ø–∞–¥–∞—é—Ç—Å—è –Ω–∞ —Ç—Ä–∏ –æ—Å–Ω–æ–≤–Ω—ã–µ –≥—Ä—É–ø–ø—ã:
- ‚Äú–ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –≤–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞‚Äù (–∫–æ–≤–∞—Ä–∏–∞–Ω—Ç–Ω–æ—Å—Ç—å);
- ‚Äú–ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ —Å–∞–º–æ–≥–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞‚Äù, –∫–æ–≥–¥–∞ –∏–º–µ—è –∑–Ω–∞—á–µ–Ω–∏–µ –æ–¥–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞, –ø–æ–ª—É—á–∞–µ–º –¥—Ä—É–≥–æ–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä, –Ω–æ —Å —Ç–µ–º –∂–µ –ø—Ä–æ—Å—Ç–∏–º —Ç–∏–ø–æ–º;
- ‚Äú–ø–µ—Ä–µ—Å—Ç–∞–Ω–æ–≤–∫–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤‚Äù, –≤–ª–æ–∂–µ–Ω–Ω—ã—Ö –æ–¥–∏–Ω –≤ –¥—Ä—É–≥–æ–π.

–ó–∞–ø–∏—à–µ–º —ç—Ç–∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –≤ –≤–∏–¥–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã—Ö —Ç–∏–ø–æ–≤ –≤—ã—Å–æ–∫–æ–≥–æ —Ä–æ–¥–∞: 
```scala
type Lift[F[_]]       = [A, B] => (A => B) => (F[A] => F[B])
type ~>  [F[_], G[_]] = [A   ] => F[A]     => G[A]
type Swap[F[_], G[_]] = [A   ] => F[G[A]]  => G[F[A]]
```
–†–∞—Å—Å–º–æ—Ç—Ä–∏–º –∏—Ö –¥–µ—Ç–∞–ª—å–Ω–µ–µ.

–ö–ª–∞—Å—Å —Ç–∏–ø–æ–≤ `Lift` –æ—Ç—Ä–∞–∂–∞–µ—Ç –∫–æ–≤–∞—Ä–∏–∞–Ω—Ç–Ω—É—é —Å—É—â–Ω–æ—Å—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ `F`. –ù–∞ –ø—Ä–∞–∫—Ç–∏–∫–µ —É–¥–æ–±–Ω–µ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–∞–∫–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏:
```scala
extension [A, B] (func: A => B)
  def lift[F[_]: Lift]: F[A] => F[B] = summon[Lift[F]](func)

extension [F[_]: Lift, A] (fa: F[A])
  def map(func: A => B): F[B] = func lift[F] f
```
–ì–æ–≤–æ—Ä—è—Ç, —á—Ç–æ —Ñ—É–Ω–∫—Ü–∏—è –≤—ã—Å–æ–∫–æ–≥–æ —Ä–æ–¥–∞ `lift` ‚Äú–ø–æ–¥–Ω–∏–º–∞–µ—Ç‚Äù —Ñ—É–Ω–∫—Ü–∏—é `func` –≤ ‚Äú–º–∏—Ä `F`‚Äù –≤ —Ç–æ –≤—Ä–µ–º—è –∫–∞–∫ `map` ‚Äú–æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç‚Äù `F[A]` –≤ `F[B]` –ø–æ—Å—Ä–µ–¥—Å—Ç–≤–æ–º `func: A => B`. –í –º–Ω–æ–≥–∏—Ö —è–∑—ã–∫–∞—Ö –¥–ª—è –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã—Ö –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ –¥–æ—Å—Ç—É–ø–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `map`, –Ω–æ, –≤–æ–∑–º–æ–∂–Ω–æ, –ø–æ–¥ –¥—Ä—É–≥–∏–º –∏–º–µ–Ω–µ–º (–Ω–∞–ø—Ä–∏–º–µ—Ä, –≤ C# —ç—Ç–æ `Select` –∏–∑ Linq), —Ç–∞–∫ —á—Ç–æ –≤—Å–µ–≥–¥–∞ –Ω—É–∂–Ω–æ –æ–±—Ä–∞—â–∞—Ç—å –≤–Ω–∏–º–∞–Ω–∏–µ –Ω–∞ —Å–∏–≥–Ω–∞—Ç—É—Ä—É –º–µ—Ç–æ–¥–∞, —Ç–∏–ø —Ñ—É–Ω–∫—Ü–∏–∏, –Ω–µ–∂–µ–ª–∏ –Ω–∞ –Ω–∞–∑–≤–∞–Ω–∏–µ. –í Scala-–±–∏–±–ª–∏–æ—Ç–µ–∫–µ Cats, –µ—Å—Ç—å –∞–Ω–∞–ª–æ–≥–∏—á–Ω—ã–π –∫–ª–∞—Å—Å —Ç–∏–ø–æ–≤ `Functor`, –Ω–∞–∑–≤–∞–Ω–∏–µ –∫–æ—Ç–æ—Ä–æ–≥–æ –ø–æ–∑–∞–∏–º—Å—Ç–≤–æ–≤–∞–Ω–æ –∏–∑ —Ç–µ–æ—Ä–∏–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏–π.

–°—Ç—Ä–µ–ª–æ—á–∫—É `~>` –∏–Ω–æ–≥–¥–∞ –Ω–∞–∑—ã–≤–∞—é—Ç ‚Äú–µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω—ã–º –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ–º‚Äù, —á—Ç–æ —Ç–∞–∫–∂–µ –≤–æ—Å—Ö–æ–¥–∏—Ç –∫ —Ç–µ–æ—Ä–∏–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏–π. –í Cats –µ—Å—Ç—å —Ç–∏–ø `FunctionK`, –Ω–æ –æ–Ω —á–∞—â–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø–æ–¥ —Ç–∞–∫–∏–º –∂–µ –ø—Å–µ–≤–¥–æ–Ω–∏–º–æ–º `~>`. –≠—Ç–æ—Ç –æ–±–æ–±—â—ë–Ω–Ω—ã–π —Ç–∏–ø –ø—Ä–∏–Ω–∏–º–∞–µ—Ç —Å—Ä–∞–∑—É –¥–≤–∞ —Ç–∏–ø–∞-–ø–∞—Ä–∞–º–µ—Ç—Ä–∞, —Ç–∞–∫ —á—Ç–æ –µ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è –Ω–µ –Ω–∞–∫–ª–∞–¥—ã–≤–∞—é—Ç –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π –Ω–∞ –∫–∞–∫–æ–π-—Ç–æ *–æ–¥–∏–Ω* —Ç–∏–ø, —á—Ç–æ –Ω–µ–º–Ω–æ–≥–æ –∑–∞—Ç—Ä—É–¥–Ω—è–µ—Ç –µ–≥–æ —Ç—Ä–∞–∫—Ç–æ–≤–∫—É –∫–∞–∫ –∫–ª–∞—Å—Å–∞ —Ç–∏–ø–æ–≤. –ù–æ –¥–∞–≤–∞–π—Ç–µ –≤–≤–µ–¥—ë–º —Ç–∞–∫–∏–µ –∫–∞—Ä—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø—Å–µ–≤–¥–æ–Ω–∏–º—ã
```scala
type To  [G[_]] = [F[_]] =>> F ~> G  
type From[F[_]] = [G[_]] =>> F ~> G
type Iso [F[_]] = [G[_]] =>> F ~> G & G ~> F // –∏–∑–æ–º–æ—Ä—Ñ–∏–∑–º –∫–æ–Ω–µ–π–Ω–µ—Ä–æ–≤... –Ω–æ —ç—Ç–æ –Ω–µ —Ç–æ—á–Ω–æ üòè
```
–∏ —Å –ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã—Ö —Ç–∏–ø–æ–≤
```scala
type Id[A] = A  
type Dupe[F[_]] = [X] =>> F[F[X]]
```
–ø–æ–ª—É—á–∏–º –Ω–∞–∏–±–æ–ª–µ–µ —á–∞—Å—Ç–æ –≤—Å—Ç—Ä–µ—á–∞—é—â–∏–µ—Å—è –ø—Ä–∏–º–µ—Ä—ã –∫–ª–∞—Å—Å–æ–≤ —Ç–∏–ø–æ–≤, –æ—Å–Ω–æ–≤–∞–Ω–Ω—ã—Ö –Ω–∞ –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è—Ö:
```scala
type Pure[F[_]]    = Id      ~> F   // = From[Id]  
type Extract[F[_]] = F       ~> Id  // = To[Id]  
type Flatten[F[_]] = Dupe[F] ~> F   // = From[Dupe[F]]
```

–í–≤–µ–¥—ë–º –ø–æ–ª–µ–∑–Ω—ã–µ –º–µ—Ç–æ–¥—ã —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è:
```scala
extension[F[_], A] (fa: F[A])  
  def ~>[G[_]: From[F]]: G[A] = summon[F ~> G](fa)

extension[A] (a: A)
  def pure[F[_]: Pure]: F[A] = a.~>[F]

extension[F[_]: Extract, A] (fa: F[A])
  def extract: A = fa.~>[Id]

extension [F[_]: Flatten, A] (ffa: F[F[A]])
  def flatten: F[A] = ffa.~>[F]

extension[F[_]: Flatten: Lift, A] (fa: F[A])
  def flatMap[B](func: A => F[B]): F[B] = (fa map func).flatten
```
–§—É–Ω–∫—Ü–∏—è `pure` ‚Äú–∑–∞–ø–∞–∫–æ–≤—ã–≤–∞–µ—Ç‚Äù –∑–Ω–∞—á–µ–Ω–∏–µ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä. –ù–∞–∑–≤–∞–Ω–∏–µ –∑–∞–∏–º—Å—Ç–≤–æ–≤–∞–Ω–æ —É —Ö–∞—Å–∫–µ–ª–∏—Å—Ç–æ–≤, –ø–æ–¥—Ä–∞–∑—É–º–µ–≤–∞—é—â–∏—Ö —Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ –∏–º–µ–Ω–Ω–æ –≤—ã—á–∏—Å–ª–∏—Ç–µ–ª—å–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ ‚Äì ‚Äú–∑–∞–ø–∞–∫–æ–≤–∫–∞‚Äù –∑–Ω–∞—á–µ–Ω–∏—è –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –∑–∞–∫–ª—é—á–∞–µ—Ç—Å—è –≤ —Å–æ–∑–¥–∞–Ω–∏–∏ *—á–∏—Å—Ç–æ–≥–æ*, ‚Äú*–æ–±–µ–¥–Ω—ë–Ω–Ω–æ–≥–æ*‚Äù (pure) –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞. ‚Äú–†–∞—Å–ø–∞–∫–æ–≤–∫—É‚Äù –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç –≤ –ø—Ä–∏–º–µ—Ä–µ –≤—ã—à–µ —Ñ—É–Ω–∫—Ü–∏—è `extract` ‚Äì –æ–±—ã—á–Ω–æ —Ç–∞–∫–∞—è –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Ä–µ–∞–ª–∏–∑—É–µ—Ç—Å—è –≤ –∫–ª–∞—Å—Å–∞—Ö-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞—Ö –∫–∞–∫ –º–µ—Ç–æ–¥ —Å –Ω–∞–∑–≤–∞–Ω–∏–µ–º, —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–º –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ (`run`, `get`, `reduce`, `use` –∏ —Ç.–ø.). –ï—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω–æ–µ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ `flatten` –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è —Ç–∞–∫ —Å–∫–æ—Ä–µ–µ –≤—Å–µ–≥–æ –ø–æ—Ç–æ–º—É, —á—Ç–æ –≤ –∫–∞—á–µ—Å—Ç–≤–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ `F` —á–∞—Å—Ç–æ –≤—ã—Å—Ç—É–ø–∞–µ—Ç —Å–ø–∏—Å–æ–∫, –∏ –≤ —ç—Ç–æ–º —Å–ª—É—á–∞–µ `flatten` –ø—Ä–µ–≤—Ä–∞—â–∞–µ—Ç –¥–≤—É–º–µ—Ä–Ω—ã–π —Å–ø–∏—Å–æ–∫ `List[List[A]]` –≤ –ø–ª–æ—Å–∫–∏–π (flat) `List[A]`. –ß–∞—Å—Ç–æ –≤—Å—Ç—Ä–µ—á–∞—é—â–∏–π—Å—è –≤ –∫–æ–¥–µ Scala `flatMap` –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–µ—Ç, —á—Ç–æ –ø–æ–ª–µ–∑–Ω–æ –∫–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞—Ç—å —ç–ª–µ–º–µ–Ω—Ç–∞—Ä–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏, –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–Ω—ã—Ö –æ—Å–Ω–æ–≤–Ω—ã–º–∏ –∫–ª–∞—Å—Å–∞–º–∏ —Ç–∏–ø–æ–≤-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤. –î—Ä—É–≥–æ–π –ø—Ä–∏–º–µ—Ä ‚Äì –ø—Ä–∏–≤—ã—á–Ω–∞—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –∑–Ω–∞—á–µ–Ω–∏–π –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ `F`:
```scala
extension [F[_]: Lift: Flatten: From[Option], A] (fa: F[A])
  def filter(predicate: A => Boolean): F[A] =
    fa.flatMap(a => Option.when(predicate(a))(a).~>[F])
```

–ù–∞–∫–æ–Ω–µ—Ü, —Ç—Ä–µ—Ç—å—è –∫–ª—é—á–µ–≤–∞—è –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å `Swap` –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–µ—Ä–µ—Å—Ç–∞–≤–ª—è—Ç—å –≤–ª–æ–∂–µ–Ω–Ω—ã–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –º–µ—Å—Ç–∞–º–∏. –ö —Å–æ–∂–∞–ª–µ–Ω–∏—é, –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –æ–¥–Ω–æ–∑–Ω–∞—á–Ω–æ–≥–æ —Å–ø–æ—Å–æ–±–∞ –ø–µ—Ä–µ—Å—Ç–∞–≤–∏—Ç—å –º–µ—Å—Ç–∞–º–∏ –ø—Ä–æ–∏–∑–≤–æ–ª—å–Ω—ã–µ –≤–ª–æ–∂–µ–Ω–Ω—ã–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã. –ù–æ —ç—Ç–æ –≤–æ–∑–º–æ–∂–Ω–æ –≤ –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö —á–∞—Å—Ç–Ω—ã—Ö —Å–ª—É—á–∞—è—Ö, –Ω–∞–ø—Ä–∏–º–µ—Ä, –∫–æ–≥–¥–∞ –≤–Ω–µ—à–Ω–∏–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π –Ω–µ–∫—É—é –∫–æ–ª–ª–µ–∫—Ü–∏—é, –∏ –µ—ë –º–æ–∂–Ω–æ ‚Äú—Å–≤–µ—Ä–Ω—É—Ç—å‚Äù (fold), –ø—Ä–æ–±–µ–∂–∞—Ç—å—Å—è –ø–æ –Ω–µ–π (traverse), –∞ –¥–ª—è –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–≥–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –µ—Å—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è –ø–∞—Ä—ã –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è –ø–∞—Ä—ã (–ø—Ä–æ —Ñ—É–Ω–∫—Ü–∏–∏ `zip` –∏ `tupled` —Å–º. —á—É—Ç—å –Ω–∏–∂–µ). –í –±–∏–±–ª–∏–æ—Ç–µ–∫–µ Cats –µ—Å—Ç—å –ø–æ–¥—Ö–æ–¥—è—â–∏–π –∫–ª–∞—Å—Å —Ç–∏–ø–æ–≤ ‚Äì [Traverse](https://typelevel.org/cats/typeclasses/traverse.html), –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—é—â–∏–π –¥–ª—è —Ç–∞–∫–∏—Ö –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ —Å–ª–µ–¥—É—é—â–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏ (–≤—ã—Ä–∞–∂–∞—é—Ç—Å—è –¥—Ä—É–≥ —á–µ—Ä–µ–∑ –¥—Ä—É–≥–∞):
```scala
extension[F[_]: Iso[Seq], A] (fa: F[A])  // F[_] - "—Å–≤–æ—Ä–∞—á–∏–≤–∞–µ–º—ã–π" —Å–ø–∏—Å–æ–∫, Foldable
  def traverse[G[_]: Lift: Zip2: Pure, B](func: A => G[B]): G[F[B]] =
    fa.~>[Seq].foldLeft(Seq.empty[B].pure)((accum, a) => (accum zip func(a)).map(_ appended _)).map(_.~>[F])
   //  ‚Üë‚Üë‚Üë‚Üë‚Üë‚Üë‚Üë                       ‚Üë‚Üë‚Üë‚Üë                       ‚Üë‚Üë‚Üë          ‚Üë‚Üë‚Üë                ‚Üë‚Üë‚Üë   ‚Üë‚Üë‚Üë‚Üë‚Üë

val urls: List[URL] = ???
def getStringFromUrl(url: URL): Future[String] = ???

val contents: Future[List[String]] = urls.traverse(getStringFromUrl)
//                                        ‚Üë‚Üë‚Üë‚Üë‚Üë‚Üë‚Üë‚Üë
```
–î–ª—è –ø—Ä–æ—á–∏—Ö –∂–µ —Å–∏—Ç—É–∞—Ü–∏–π –æ–±—ã—á–Ω–æ –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç—Å—è —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Ç–∞–∫–æ–π –∫–ª–∞—Å—Å —Ç–∏–ø–æ–≤ –¥–ª—è *–≤–ª–æ–∂–µ–Ω–Ω–æ–≥–æ* –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞:
```scala
type Distributive[G[_]] = [F[_], A] => F[G[A]] => G[F[A]]

extension[F[_], G[_]: Distributive, A] (fga: F[G[A]])
  def cosequence: G[F[A]] = summon[Distributive[G]](fga)

extension[F[_]: Lift, A] (fa: F[A])
  def distribute[G[_] : Distributive, B](agb: A => G[B]): G[F[B]] = summon[Distributive[G]](fa map agb)
```

–ü–µ—Ä–µ—Å—Ç–∞–Ω–æ–≤–∫—É –º–æ–∂–Ω–æ –ø—Ä–æ–∏–∑–≤–µ—Å—Ç–∏ –Ω–µ —Ç–æ–ª—å–∫–æ —Å –ø—Ä–æ—Å—Ç—ã–º–∏, –Ω–æ –∏ —Å N-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞–º–∏. –í –∫–∞—á–µ—Å—Ç–≤–µ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö —á–∞—Å—Ç–æ –≤—ã—Å—Ç—É–ø–∞—é—Ç –ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è —Ç–∏–ø–æ–≤ (–∫–æ—Ä—Ç–µ–∂–∏):
```scala
type Swap2  [F[_, _], G[_]   ] = [A, B] => F[G[A], G[B]] => G[F[A,    B]]
type Coswap2[F[_],    G[_, _]] = [A, B] => F[G[A,    B]] => G[F[A], F[B]]

// –∫–ª–∞—Å—Å—ã —Ç–∏–ø–æ–≤ –¥–ª—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤-–∫–æ—Ä—Ç–µ–∂–µ–π:
type √ó[A, B] = (A, B) // –∏–Ω—Ñ–∏–∫—Å–Ω—ã–π —Å–∏–Ω–æ–Ω–∏–º –¥–ª—è –ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è —Ç–∏–ø–æ–≤
type Zip2  [F[_]] = Swap2  [√ó, F]
type Unzip2[F[_]] = Coswap2[F, √ó]

extension[F[_]: Zip2, A] (fa: F[A])
  def zip[B](fb: F[B]): F[A √ó B] = summon[Zip2[F]]((fa, fb))

extension[F[_]: Unzip2, A, B] (fab: F[A √ó B])
  def unzip: F[A] √ó F[B] = summon[Unzip2[F]](fab)
```
–ó–¥–µ—Å—å –≤ –Ω–∞–∑–≤–∞–Ω–∏—è—Ö –º–µ—Ç–æ–¥–æ–≤ –ø—Ä–æ—Å–ª–µ–∂–∏–≤–∞–µ—Ç—Å—è –∞–Ω–∞–ª–æ–≥–∏—è –º–µ–∂–¥—É –æ–ø—è—Ç—å –∂–µ —Å–ø–∏—Å–∫–∞–º–∏ –∏ –∑–∞—Å—Ç—ë–∂–∫–∞–º–∏-–º–æ–ª–Ω–∏—è–º–∏:
```scala
val ints = List(4, 2)
val strings = List("4", "2")
val intStrings = ints zip strings     // List((4, "4"), (2, "2"))
val (ints1, ints2) = intStrings unzip // (List(4, 2), List("4", "2"))
```
–ö–æ–º–±–∏–Ω–∞—Ç–æ—Ä `zip` –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–Ω—ã–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è *–Ω–µ–∑–∞–≤–∏—Å–∏–º–æ* –¥—Ä—É–≥ –æ—Ç –¥—Ä—É–≥–∞ ‚Äì –Ω–∞–ø—Ä–∏–º–µ—Ä, –¥–∞–∂–µ –µ—Å–ª–∏ –≤ –æ–¥–Ω–æ–º –∏–∑ –Ω–∏—Ö –ø—Ä–æ–∏–∑–æ–π–¥—ë—Ç –æ—à–∏–±–∫–∞, –¥—Ä—É–≥–æ–µ –≤—Å—ë —Ä–∞–≤–Ω–æ –±—É–¥–µ—Ç –∑–∞–ø—É—â–µ–Ω–æ. –ò–Ω—ã–º–∏ —Å–ª–æ–≤–∞–º–∏, –±–µ–∑–æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ —Ä–∞–∑–Ω–µ—Å–µ–Ω–∏—è –ø–æ –≤—Ä–µ–º–µ–Ω–∏, –≤—ã—á–∏—Å–ª–µ–Ω–∏—è –ø–æ—Å—Ä–µ–¥—Å—Ç–≤–æ–º `zip` –ø—Ä–æ–∏–∑–≤–æ–¥—è—Ç—Å—è *–ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ*, –≤ —Ç–æ –≤—Ä–µ–º—è –∫–∞–∫ `flatMap` –æ—Ä–≥–∞–Ω–∏–∑—É–µ—Ç *–ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ–µ* –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ, –ø—Ä–∏ –∫–æ—Ç–æ—Ä–æ–º —Å–±–æ–π –Ω–∞ –ª—é–±–æ–º —à–∞–≥–µ –ø—Ä–µ—Ä–≤—ë—Ç –≤—Å—é —Ü–µ–ø–æ—á–∫—É. –ò—Å—Ö–æ–¥—è –∏–∑ —ç—Ç–∏—Ö —Å–æ–æ–±—Ä–∞–∂–µ–Ω–∏–π, –¥–ª—è –∫–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã—Ö –≤—ã—á–∏—Å–ª–µ–Ω–∏–π –≤–º–µ—Å—Ç–æ `Zip2` –≤–≤–æ–¥–∏—Ç—Å—è –∫–ª–∞—Å—Å —Ç–∏–ø–æ–≤ ‚Äú–∞–ø–ø–ª–∏–∫–∞—Ç–∏–≤–Ω—ã–π —Ñ—É–Ω–∫—Ç–æ—Ä‚Äù ‚Äì –∫ –Ω–µ–º—É –æ—Ç–Ω–æ—Å—è—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å `zip` –∏ –¥—Ä—É–≥–∏–µ –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ (`prodctL`, `productR` –∏ —Ç.–ø.). –í –±–∏–±–ª–∏–æ—Ç–µ–∫–µ Cats —ç—Ç–æ—Ç –∫–ª–∞—Å—Å —Ç–∏–ø–æ–≤ –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è [Applicative](https://typelevel.org/cats/typeclasses/applicative.html). –ê–Ω–∞–ª–æ–≥–∏—á–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –≤—Å—Ç—Ä–µ—á–∞—é—Ç—Å—è –ø–æ–¥ –Ω–∞–∑–≤–∞–Ω–∏—è–º–∏ `tupled/untupled`, —è–≤–Ω–æ —É–∫–∞–∑—ã–≤–∞—è, —á—Ç–æ –æ–Ω–∏ —Ä–∞–±–æ—Ç–∞—é—Ç —Å –∫–æ—Ä—Ç–µ–∂–∞–º–∏.

–û—Å–æ–±–Ω—è–∫–æ–º —Å—Ç–æ–∏—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å, –æ–±—â–∞—è –¥–ª—è –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–∞ —Ç–∏–ø–æ–≤ ‚Äì –≤—ã—á–∏—Å–ª–µ–Ω–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è *–ø—Ä–æ–∏–∑–≤–æ–ª—å–Ω–æ–≥–æ* —Ç–∏–ø–∞ –Ω–∞ –æ—Å–Ω–æ–≤–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ: `F[A] => B`. –¢–∞–∫–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏, –∫–∞–∫ –∏ –æ–±—ã—á–Ω–∞—è ‚Äú—Ä–∞—Å–ø–∞–∫–æ–≤–∫–∞‚Äú, –Ω–∞–∑—ã–≤–∞—é—Ç—Å—è –ø–æ-—Ä–∞–∑–Ω–æ–º—É –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Å–∞–º–æ–≥–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ (`use`, `apply`, `fold` –∏ —Ç.–ø.). –í Scala –¥–ª—è —Å–ø–∏—Å–∫–æ–≤ –∏ –¥—Ä—É–≥–∏—Ö –ø–æ—Ö–æ–∂–∏—Ö –Ω–∞ –Ω–∏—Ö –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ (`Option`, `Either` –∏ —Ç.–ø.) —Ç–∞–∫–∞—è —Ñ—É–Ω–∫—Ü–∏—è –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è `fold` (‚Äú—Å–≤—ë—Ä—Ç–∫–∞‚Äù). –í –±–∏–±–ª–∏–æ—Ç–µ–∫–µ Cats –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω –∫–ª–∞—Å—Å —Ç–∏–ø–æ–≤ `Foldable` c —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è–º–∏ –¥–ª—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤, –ø—Ä–µ–¥—Å—Ç–∞–≤–∏–º—ã—Ö –≤ –≤–∏–¥–µ —Å–ø–∏—Å–∫–æ–≤ (`Option`, —Ä–∞–∑–ª–∏—á–Ω—ã–µ –¥–µ—Ä–µ–≤—å—è –∏ —Ç.–ø.). –ù–∞ —Å–∞–º–æ–º –¥–µ–ª–µ, —Ç–∞–∫–æ–π –∫–ª–∞—Å—Å —Ç–∏–ø–æ–≤ —ç–∫–≤–∏–≤–∞–ª–µ–Ω—Ç–µ–Ω –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω–æ–º—É –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—é `F ~> List`:
```scala
extension[F[_]: To[List], A] (fa: F[A])
  def fold[B](start: B, combine: (B, A) => B) =
    fa.~>[List].foldLeft(start)(combine)
```
–î–ª—è –ø—Ä–æ–∏–∑–≤–æ–ª—å–Ω—ã—Ö –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ –Ω–µ –ø–æ–ª—É—á–∏—Ç—Å—è –æ–ø–∏—Å–∞—Ç—å *–æ–¥–Ω—É –æ–±—â—É—é* —Ñ—É–Ω–∫—Ü–∏—é –≤–∏–¥–∞ `F[A] => ???[A, B] => B` ‚Äì —Å–∏–≥–Ω–∞—Ç—É—Ä–∞ —Ñ—É–Ω–∫—Ü–∏–∏ –æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω–æ–π –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ç–∏–ø–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞, –ø–æ—ç—Ç–æ–º—É –∏ –æ–±—â–µ–≥–æ –∫–ª–∞—Å—Å–∞ —Ç–∏–ø–∞ –¥–ª—è —ç—Ç–æ–≥–æ —Å–ª—É—á–∞—è –Ω–µ—Ç. –ù–æ —Å–∞–º–∞ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –æ–±—ã—á–Ω–æ —Ä–µ–∞–ª–∏–∑—É–µ—Ç—Å—è –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω–æ.

–¢–∞–∫–æ–π –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π ‚Äú–¥–∂–µ–Ω—Ç–µ–ª—å–º–µ–Ω—Å–∫–∏–π –Ω–∞–±–æ—Ä‚Äù –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–Ω—ã—Ö —Ç–∏–ø–æ–≤ –¥–æ—Å—Ç—É–ø–µ–Ω –Ω–µ —Ç–æ–ª—å–∫–æ –≤ Scala ‚Äì –≤ —Ç–æ–º –∏–ª–∏ –∏–Ω–æ–º –≤–∏–¥–µ —á—Ç–æ-—Ç–æ –ø–æ—Ö–æ–∂–µ–µ –º–æ–∂–Ω–æ –Ω–∞–π—Ç–∏ –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏ –≤ –ª—é–±–æ–º —è–∑—ã–∫–µ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è, –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—â–µ–º –æ–±–æ–±—â—ë–Ω–Ω—ã–µ —Ç–∏–ø—ã.

–¢–æ, —á—Ç–æ –≤ –¥–∞–Ω–Ω–æ–π —Å—Ç–∞—Ç—å–µ –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è ‚Äú–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–Ω—ã–º–∏ —Ç–∏–ø–∞–º–∏‚Äù –≤ –¥—Ä—É–≥–∏—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–∞—Ö –Ω–µ—Ä–µ–¥–∫–æ –∏–º–µ–Ω—É–µ—Ç—Å—è ‚Äú—Ñ—É–Ω–∫—Ç–æ—Ä–∞–º–∏‚Äù –∏–ª–∏ –¥–∞–∂–µ —á–∞—â–µ ‚Äú–º–æ–Ω–∞–¥–∞–º–∏‚Äù. –í—Å—ë –¥–µ–ª–æ –≤ —Ç–æ–º, —á—Ç–æ —Ç–∞–∫–∞—è –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∫–∞–∫ `map` (`lift`) —è–≤–ª—è–µ—Ç—Å—è –∫–ª—é—á–µ–≤–æ–π –¥–ª—è –ø–æ–Ω—è—Ç–∏—è ‚Äú—Ñ—É–Ω–∫—Ç–æ—Ä‚Äù, –∞ `flatMap` (`flatten`) ‚Äì –¥–ª—è ‚Äú–º–æ–Ω–∞–¥—ã‚Äù, –∏ —ç—Ç–∏ –Ω–∞–∑–≤–∞–Ω–∏—è —Ç—Ä–∞–Ω—Å–ª–∏—Ä—É—é—Ç—Å—è –Ω–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–Ω—ã–µ —Ç–∏–ø—ã, –æ–±–ª–∞–¥–∞—é—â–∏–º–∏ —Ç–∞–∫–∏–º –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—è–º–∏ (—á—Ç–æ, –Ω–∞ —Å–∞–º–æ–º –¥–µ–ª–µ, –Ω–µ —Å–æ–≤—Å–µ–º –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ). –†–∞–∑–ª–∏—á–∏–µ –≤ —Ç–µ—Ä–º–∏–Ω–æ–ª–æ–≥–∏–∏ —Å—Ç–æ–∏—Ç –∏–º–µ—Ç—å –≤ –≤–∏–¥—É –ø—Ä–∏ –∏–∑—É—á–µ–Ω–∏–∏ –¥—Ä—É–≥–∏—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ –Ω–∞ —Ç—É –∂–µ —Ç–µ–º—É:
- —Ö–∞–±—Ä-–ø–µ—Ä–µ–≤–æ–¥—ã —Å—Ç–∞—Ç–µ–π –∏–∑ [–±–ª–æ–≥–∞ –≠–¥–∏—Ç –ë–∞—Ä–≥–∞–≤—ã](https://www.adit.io/), —Å –ø—Ä–∏–º–µ—Ä–∞–º–∏ –Ω–∞ Haskell, –Ω–æ –±–æ–ª—å—à–∏–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º –∑–∞–º–µ—á–∞—Ç–µ–ª—å–Ω—ã—Ö –∞–≤—Ç–æ—Ä—Å–∫–∏—Ö –∫–∞—Ä—Ç–∏–Ω–æ–∫, —Ä–∞—Å–∫—Ä—ã–≤–∞—é—â–∏—Ö –∫–æ–Ω—Ü–µ–ø—Ü–∏—é –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞:
	- [–§—É–Ω–∫—Ç–æ—Ä—ã, –∞–ø–ø–ª–∏–∫–∞—Ç–∏–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ç–æ—Ä—ã –∏ –º–æ–Ω–∞–¥—ã –≤ –∫–∞—Ä—Ç–∏–Ω–∫–∞—Ö](https://habr.com/ru/articles/183150/);
	- [–¢—Ä–æ–π–∫–∞ –ø–æ–ª–µ–∑–Ω—ã—Ö –º–æ–Ω–∞–¥](https://habr.com/ru/articles/18472.2/);
- –±–æ–ª–µ–µ —Ñ—É–Ω–¥–∞–º–µ–Ω—Ç–∞–ª—å–Ω–∞—è, –Ω–æ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ø–æ–ø—É–ª—è—Ä–Ω–∞—è PDF-—Å—Ç–∞—Ç—å—è [The Essence of the Iterator Pattern](https://www.cambridge.org/core/services/aop-cambridge-core/content/view/3FC26EB2A63E6A2B29E07B9F0D5C5BCD/S0956796809007291a.pdf/the-essence-of-the-iterator-pattern.pdf) –Ω–∞ –∞–Ω–≥–ª–∏–π—Å–∫–æ–º (–∏ –Ω–∞ Haskell);
- –≤ [–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ –∫ –±–∏–±–ª–∏–æ—Ç–µ–∫–µ Cats](https://typelevel.org/cats/) –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ –∫–ª–∞—Å—Å—ã —Ç–∏–ø–æ–≤ –Ω–µ –æ—Ç–¥–µ–ª–µ–Ω—ã –æ—Ç –ø—Ä–æ—á–∏—Ö, –ø–æ—ç—Ç–æ–º—É –±–æ–ª–µ–µ —Ç–æ—á–Ω—É—é —Å—Å—ã–ª–∫—É –Ω–µ –ø–æ–ª—É—á–∏—Ç—Å—è –¥–∞—Ç—å.
- —Å—Ç–∞—Ç—å—è –ö–æ–Ω–æ—Ä–∞ –ú–∞–∫–±—Ä–∞–π–¥–∞ –∏ –†–æ—Å—Å–∞ –ü–∞—Ç–µ—Ä—Å–æ–Ω–∞ [Applicative programming with effects](http://staff.city.ac.uk/~ross/papers/Applicative.pdf) –æ–± –∞–ø–ø–ª–∏–∫–∞—Ç–∏–≤–Ω—ã—Ö —Ñ—É–Ω–∫—Ç–æ—Ä–∞—Ö.

<anchor>effects</anchor>
### –≠—Ñ—Ñ–µ–∫—Ç—ã

–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä–Ω—ã–π —Ç–∏–ø –ø–æ–∑–≤–æ–ª—è–µ—Ç —Ä–∞–∑–Ω–µ—Å—Ç–∏ –ø–æ –≤—Ä–µ–º–µ–Ω–∏ —Å–æ–∑–¥–∞–Ω–∏–µ —ç–∫–∑–µ–º–ø–ª—è—Ä–∞ –∏ –µ–≥–æ ‚Äú—Ä–∞—Å–ø–∞–∫–æ–≤–∫—É‚Äù. –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –∫–ª–∏–µ–Ω—Ç—Å–∫–æ–º—É –∫–æ–¥—É —Å–∞–º–æ–º—É —Ä–µ—à–∞—Ç—å, –∫–æ–≥–¥–∞ –∏ –∫–∞–∫ ‚Äú—Ä–∞—Å–ø–∞–∫–æ–≤—ã–≤–∞—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä‚Äù. –ù–∞–ø—Ä–∏–º–µ—Ä, –ø–æ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω–Ω—ã–π –≤ –æ–¥–Ω–æ–º –º–µ—Å—Ç–µ —Å–ø–∏—Å–æ–∫ —Ü–µ–ª—ã—Ö —á–∏—Å–µ–ª –≤ –¥—Ä—É–≥–∏—Ö –º–µ—Å—Ç–∞—Ö –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—Ä–æ—Å—É–º–º–∏—Ä–æ–≤–∞–Ω, –∏–ª–∏ –ø—Ä–æ—Å—Ç–æ –≤—ã–≤–µ–¥–µ–Ω –Ω–∞ —ç–∫—Ä–∞–Ω (—ç—Ç–æ —Ç–∞–∫–∂–µ —Å–≤–æ–µ–æ–±—Ä–∞–∑–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç ‚Äú—Ä–∞—Å–ø–∞–∫–æ–≤–∫–∏‚Äù), –ø—Ä–∏—á—ë–º, —Å–∞–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ –º–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω ‚Äì —á–∏—Å–ª–∞ –º–æ–≥—É—Ç –±—ã—Ç—å –æ—Ç—Ñ–∏–ª—å—Ç—Ä–æ–≤–∞–Ω—ã, –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω—ã –≤ —Å—Ç—Ä–æ–∫–∏ –∏ —Ç.–ø.

–ü—Ä–µ–∂–¥–µ–≤—Ä–µ–º–µ–Ω–Ω–∞—è —Ä–∞—Å–ø–∞–∫–æ–≤–∫–∞ –±—ã–≤–∞–µ—Ç —Ç–∞–∫–∂–µ –Ω–µ —Ü–µ–ª–µ—Å–æ–æ–±—Ä–∞–∑–Ω–æ–π –ø—Ä–∏ *–∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã—Ö* –≤—ã—á–∏—Å–ª–µ–Ω–∏—è—Ö. –î–µ–ª–æ –≤ —Ç–æ–º, —á—Ç–æ –ª–æ–≥–∏–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∑–∞–∫–ª—é—á–∞–µ—Ç—Å—è –≤ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å —Ä–∞–∑–ª–∏—á–Ω—ã–º–∏ –æ–±—ä–µ–∫—Ç–∞–º–∏ –æ–∫—Ä—É–∂–µ–Ω–∏—è ‚Äì –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –≤–≤–æ–¥/–≤—ã–≤–æ–¥, —Ä–∞–±–æ—Ç–∞ —Å –ø–∞–º—è—Ç—å—é –∏ —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º–æ–π, –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ —Å –±–∞–∑–∞–º–∏ –¥–∞–Ω–Ω—ã—Ö –∏ –ø—Ä–æ—á–∏–º–∏ —Å–µ—Ä–≤–∏—Å–∞–º–∏. –í–∞–∂–Ω–æ–π –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç—å—é —Ç–∞–∫–æ–≥–æ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —è–≤–ª—è–µ—Ç—Å—è *–æ–∂–∏–¥–∞–Ω–∏–µ* –∫–∞–∫–∏—Ö-–ª–∏–±–æ —Å–æ–±—ã—Ç–∏–π –æ—Ç –æ–∫—Ä—É–∂–µ–Ω–∏—è. –í –ª—é–±–æ–π –º–æ–º–µ–Ω—Ç –≤—Ä–µ–º–µ–Ω–∏ –º–æ–∂–Ω–æ —É–≤–∏–¥–µ—Ç—å, —á—Ç–æ –Ω–∞ –∫–æ–º–ø—å—é—Ç–µ—Ä–µ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ —Ä–∞–±–æ—Ç–∞—é—Ç –¥–µ—Å—è—Ç–∫–∏, –∞ —Ç–æ –∏ —Å–æ—Ç–Ω–∏ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ, –≤ —Å–≤–æ—é –æ—á–µ—Ä–µ–¥—å, –æ–¥–∞–ª–∂–∏–≤–∞—é—Ç —É –æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω–æ–π —Å–∏—Å—Ç–µ–º–µ –ø–æ –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø–æ—Ç–æ–∫–æ–≤ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è. –ö–∞–∫ –ø—Ä–∞–≤–∏–ª–æ, –≤—Å–µ —ç—Ç–∏ –ø—Ä–æ—Ü–µ—Å—Å—ã –∏ –∏—Ö –ø–æ—Ç–æ–∫–∏ ‚Äì —Ç–µ –µ—â—ë –∂–¥—É–Ω—ã. –ù–æ –∫–∞–∂–¥—ã–π –ø–æ—Ç–æ–∫ —è–≤–ª—è–µ—Ç—Å—è –≤–µ—Å—å–º–∞ —Ü–µ–Ω–Ω—ã–º —Ä–µ—Å—É—Ä—Å–æ–º –æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã, –∏ –µ–π –Ω–µ –ø—Ä–æ—Å—Ç–æ –∂–æ–Ω–≥–ª–∏—Ä–æ–≤–∞—Ç—å –∏–º–∏ –Ω–∞ –∏–º–µ—é—â–µ–º—Å—è –∂–µ–ª–µ–∑–µ. –û–±—ã—á–Ω–æ –∫—Ä–∞–π–Ω–µ –Ω–µ—É–¥–∞—á–Ω—ã–º —Ä–µ—à–µ–Ω–∏–µ–º —è–≤–ª—è–µ—Ç—Å—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –≤—Å–µ–π –ª–æ–≥–∏–∫–∏ –ø—Ä–æ–≥—Ä–∞–º–º—ã –≤ –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–æ–º –ø–æ—Ç–æ–∫–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è, –∫–æ—Ç–æ—Ä—ã–π –±–æ–ª—å—à—É—é —á–∞—Å—Ç—å –≤—Ä–µ–º–µ–Ω–∏ –±—É–¥—É—Ç –∂–¥–∞—Ç—å, –≤–ø—É—Å—Ç—É—é —Ä–∞—Å—Ç—Ä–∞—á–∏–≤–∞—è —Ä–µ—Å—É—Ä—Å—ã —Å–∏—Å—Ç–µ–º—ã.

–î–ª—è —Ä–µ—à–µ–Ω–∏—è —Ç–∞–∫–∏—Ö –ø—Ä–æ–±–ª–µ–º –≤ Scala –µ—Å—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä `Future`, –∫–æ—Ç–æ—Ä—ã–π —Ö—Ä–∞–Ω–∏—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç *–∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–≥–æ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è* —Å–ª–æ–∂–Ω–æ–π –∑–∞–¥–∞—á–∏ (—Å–º. –Ω–∞–ø—Ä–∏–º–µ—Ä, —Å—Ç–∞—Ç—å—é [A Guide to Scala Futures](https://www.baeldung.com/scala/futures)). –ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —ç–∫–∑–µ–º–ø–ª—è—Ä–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –Ω–∞ –æ—Å–Ω–æ–≤–µ –∫–∞–∫–æ–π-–ª–∏–±–æ —Ñ—É–Ω–∫—Ü–∏–∏, –µ—ë –≤—ã—á–∏—Å–ª–µ–Ω–∏–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –≤ –Ω–æ–≤–æ–º –ø–æ—Ç–æ–∫–µ (–Ω–æ —ç—Ç–æ –Ω–µ —Ç–æ—á–Ω–æ üòâ). –û—Ç–ª–æ–∂–µ–Ω–Ω–∞—è ‚Äú—Ä–∞—Å–ø–∞–∫–æ–≤–∫–∞‚Äù –ø—Ä–æ–∏–∑–≤–æ–¥–∏–º—ã—Ö –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏–π –ø–æ–∑–≤–æ–ª–∏—Ç —Å—Ä–µ–¥–µ –∏—Å–ø–æ–ª–Ω–µ–Ω–∏—è –∏ –æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω–æ–π —Å–∏—Å—Ç–µ–º–µ –±–æ–ª–µ–µ —Ä–∞—Ü–∏–æ–Ω–∞–ª—å–Ω–æ —Ä–∞—Å–ø–æ—Ä—è–∂–∞—Ç—å—Å—è –º–æ—â–Ω–æ—Å—Ç—è–º–∏ –∫–æ–º–ø—å—é—Ç–µ—Ä–∞, —Ç–µ–º —Å–∞–º—ã–º —ç–∫–æ–Ω–æ–º—è —Ä–µ—Å—É—Ä—Å—ã, –ø—Ä–µ–∂–¥–µ –≤—Å–µ–≥–æ, –≤—Ä–µ–º—è. –î–ª—è `Future` —Ç–∞–∫–∂–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã –∫–ª—é—á–µ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤, –≤—Ä–æ–¥–µ —Ç–µ—Ö –∂–µ `map` –∏–ª–∏ `flatMap` ‚Äì –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è –±—É–¥—É—Ç –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç—Å—è –Ω–µ –≤ –æ—Å–Ω–æ–≤–Ω–æ–º –ø–æ—Ç–æ–∫–µ (–ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏), –¥–∞–∂–µ –µ—Å–ª–∏ –∏–∑–Ω–∞—á–∞–ª—å–Ω–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä —Å–æ–∑–¥–∞–≤–∞–ª—Å—è –º–µ—Ç–æ–¥–æ–º `Future.successful` —Å —á–∏—Å—Ç—ã–º (pure) –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º. –ö—Ä–æ–º–µ —Ç–æ–≥–æ, –≤ –±–∏–±–ª–∏–æ—Ç–µ–∫–µ [Cats.Effect](https://typelevel.org/cats-effect/) –µ—Å—Ç—å —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö –∫–ª–∞—Å—Å–æ–≤ —Ç–∏–ø–æ–≤ –¥–ª—è `Future`, –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—é—â–∏–µ —ç—Ç–æ–º—É –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—É –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏. –ê–Ω–∞–ª–æ–≥–∏—á–Ω—ã–µ –æ–±–æ–±—â—ë–Ω–Ω—ã–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –¥–ª—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã—Ö –≤—ã—á–∏—Å–ª–µ–Ω–∏–π –≤—Å—Ç—Ä–µ—á–∞—é—Ç—Å—è –≤ –º–Ω–æ–≥–∏—Ö –ø–æ–ø—É–ª—è—Ä–Ω—ã—Ö —è–∑—ã–∫–∞—Ö –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è.

–ü—Ä–∏ —É—á—ë—Ç–µ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å –æ–∫—Ä—É–∂–µ–Ω–∏–µ–º –æ–±—ã—á–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –≤–∏–¥–∞ $A \Rightarrow B$ –ø—Ä–µ–≤—Ä–∞—â–∞—é—Ç—Å—è –≤ $U\Rightarrow(A\Rightarrow B\times U)$, –≥–¥–µ –ø—Å–µ–≤–¥–æ—Ç–∏–ø $U$ –æ–ø–∏—Å—ã–≤–∞–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (universe). –ü—Ä–æ–±–ª–µ–º–∞ —Å —ç—Ç–∏–º –ø—Å–µ–≤–¥–æ—Ç–∏–ø–æ–º –∑–∞–∫–ª—é—á–∞–µ—Ç—Å—è –≤ —Ç–æ–º, —á—Ç–æ —Ç–µ–æ—Ä–µ—Ç–∏—á–µ—Å–∫–∏ –Ω–µ–ª—å–∑—è –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–∏—Ç—å –Ω–µ–∏–∑–º–µ–Ω—è–µ–º–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ, –æ–ø–∏—Å—ã–≤–∞—é—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Ü–µ–ª–æ–π –≤—Å–µ–ª–µ–Ω–Ω–æ–π ‚Äì –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–æ—Å—Ç–æ—è–Ω—Å—Ç–≤–æ –¥–∞–∂–µ –Ω–µ–±–æ–ª—å—à–∏—Ö –µ—ë —á–∞—Å—Ç–µ–π. –≠—Ç–æ—Ç —Ñ–∞–∫—Ç —Å—É—â–µ—Å—Ç–≤–µ–Ω–Ω–æ –æ—Å–ª–∞–±–ª—è–µ—Ç –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ —Ç–µ–æ—Ä–∏–∏ —Ç–∏–ø–æ–≤, –∫–∞–∫ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞ –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç–∏ –∞–ª–≥–æ—Ä–∏—Ç–º–æ–≤. –í —á–∞—Å—Ç–Ω–æ—Å—Ç–∏, –∏ –∑–∞–ø–∞–∫–æ–≤–∫–∞, –∏ —Ä–∞—Å–ø–∞–∫–æ–≤–∫–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ `Future` –Ω–µ —è–≤–ª—è—é—Ç—Å—è *—á–∏—Å—Ç—ã–º–∏ —Ñ—É–Ω–∫—Ü–∏—è–º–∏*. –°–∞–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –æ–±—ã—á–Ω–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã—Ö *–≤—ã—á–∏—Å–ª–µ–Ω–∏–π —Å [–ø–æ–±–æ—á–Ω—ã–º–∏ —ç—Ñ—Ñ–µ–∫—Ç–∞–º–∏](https://ru.wikipedia.org/wiki/%D0%9F%D0%BE%D0%B1%D0%BE%D1%87%D0%BD%D1%8B%D0%B9_%D1%8D%D1%84%D1%84%D0%B5%D0%BA%D1%82_(%D0%BF%D1%80%D0%BE%D0%B3%D1%80%D0%B0%D0%BC%D0%BC%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5))*, –∫–æ—Ç–æ—Ä—ã–µ –∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π —Ä–∞–∑, –ª–∏–±–æ –≤ –º–æ–º–µ–Ω—Ç —Å–æ–∑–¥–∞–Ω–∏—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞, –ª–∏–±–æ –ø—Ä–∏ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–∏ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–π –≤–Ω—É—Ç—Ä–∏ –Ω–µ–≥–æ. –ü—Ä–∏ –∑–∞–ø–∞–∫–æ–≤–∫–µ —Å—Ä–µ–¥–∞ –∏—Å–ø–æ–ª–Ω–µ–Ω–∏—è –ø—Ä–∏–Ω–∏–º–∞–µ—Ç —Ä–µ—à–µ–Ω–∏–µ –æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ —Ä–µ–∑–µ—Ä–≤–∏—Ä–æ–≤–∞–Ω–∏—è –ø–æ—Ç–æ–∫–∞ –æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã. –í —Å–≤–æ—é –æ—á–µ—Ä–µ–¥—å, —Ä–∞—Å–ø–∞–∫–æ–≤–∫–∞ –º–æ–∂–µ—Ç –¥–∞–≤–∞—Ç—å —Ä–∞–∑–ª–∏—á–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã, –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ç–æ–≥–æ, –∑–∞–≤–µ—Ä—à–∏–ª–æ—Å—å –ª–∏ –≤—ã—á–∏—Å–ª–µ–Ω–∏–µ ‚Äì –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ —ç—Ç–æ–≥–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –Ω–µ –æ–±–ª–∞–¥–∞—é—Ç *—Å—Å—ã–ª–æ—á–Ω–æ–π –ø—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å—é*.

–í–ø—Ä–æ—á–µ–º, –≤—Å—ë –Ω–µ —Ç–∞–∫ –ø–ª–æ—Ö–æ. –ï—Å—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø–æ–ø—É–ª—è—Ä–Ω—ã—Ö Scala-–±–∏–±–ª–∏–æ—Ç–µ–∫, –∫–æ—Ç–æ—Ä—ã–µ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—é—Ç *–ª–µ–Ω–∏–≤—ã–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã*, –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–Ω—ã–µ –¥–ª—è –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—è –∫–æ–º–ø–æ–∑–∏—Ü–∏–∏ —Ñ—É–Ω–∫—Ü–∏–π —Å –ø–æ–±–æ—á–Ω—ã–º–∏ —ç—Ñ—Ñ–µ–∫—Ç–∞–º–∏. –ò—Ö ‚Äú–ª–µ–Ω–∏–≤–æ—Å—Ç—å‚Äù –∑–∞–∫–ª—é—á–∞–µ—Ç—Å—è –≤ —Ç–æ–º, —á—Ç–æ –æ–Ω–∏ –Ω–µ –∑–∞–ø—É—Å–∫–∞—é—Ç –≤—ã—á–∏—Å–ª–µ–Ω–∏—è —Å—Ä–∞–∑—É, –∞ –ø—Ä–æ—Å—Ç–æ *—Å–æ—Ö—Ä–∞–Ω—è—é—Ç* –≤–Ω—É—Ç—Ä–∏ —Å–µ–±—è –≤—Å–µ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è –¥–æ —Å–∞–º–æ–≥–æ —ç—Ç–∞–ø–∞ —Ä–∞—Å–ø–∞–∫–æ–≤–∫–∏. –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç ‚Äú*—á–∏—Å—Ç–æ*‚Äú –æ–ø–∏—Å–∞—Ç—å –≤–µ—Å—å –∞–ª–≥–æ—Ä–∏—Ç–º, –ø–æ–∑–≤–æ–ª–∏–≤ –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä—É –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –µ–≥–æ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å, –∞ –≤—Å–µ –ø–æ–±–æ—á–Ω—ã–µ —ç—Ñ—Ñ–µ–∫—Ç—ã —Å–∫–æ–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –≤–Ω—É—Ç—Ä–∏ —Ñ—É–Ω–∫—Ü–∏–π —Å—Ä–∞–±–æ—Ç–∞—é—Ç —Ç–æ–ª—å–∫–æ –≤ —Å–∞–º–æ–º –∫–æ–Ω—Ü–µ –ø—Ä–æ–≥—Ä–∞–º–º—ã, –∫–æ–≥–¥–∞ –Ω–µ—è–≤–Ω–æ –±–∏–±–ª–∏–æ—Ç–µ—á–Ω—ã–º–∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞–º–∏ –±—É–¥–µ—Ç –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç—Å—è —Ä–∞—Å–ø–∞–∫–æ–≤–∫–∞.

–•–æ—Ä–æ—à–∏–º –ø—Ä–∏–º–µ—Ä–æ–º —è–≤–ª—è–µ—Ç—Å—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä [IO](https://typelevel.org/cats-effect/docs/2.x/datatypes/io) (Inpout/Output) –∏–∑ —É–ø–æ–º—è–Ω—É—Ç–æ–π —Ä–∞–Ω–µ–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ Cats.Effect. *–û—á–µ–Ω—å —É–ø—Ä–æ—â—ë–Ω–Ω–æ* —ç—Ç–æ—Ç –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –º–æ–∂–Ω–æ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å —Ç–∞–∫:
```scala
enum IO[+A]:
  case Pure[A](a: A)                           extends IO[A] // ‚âÖ A
  case FlatMap[A, B](ib: IO[B], f: B => IO[A]) extends IO[A] // ‚âÖ IO[B] √ó IO[A]·¥Æ
```
–ú–æ–∂–Ω–æ –∑–∞–º–µ—Ç–∏—Ç—å, —á—Ç–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä `IO` –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π –ø–æ —Å—É—Ç–∏ *—Å–ø–∏—Å–æ–∫* —Ä–∞–∑–Ω–æ—Ä–æ–¥–Ω—ã—Ö (–ø–æ —Ç–∏–ø—É) —Ñ—É–Ω–∫—Ü–∏–π, –∞ –≤ —Å–∞–º–æ–º –Ω–∞—á–∞–ª–µ —ç—Ç–æ–≥–æ —Å–ø–∏—Å–∫–∞ –ª–µ–∂–∏—Ç –Ω–µ–∫–æ–µ –∏—Å—Ö–æ–¥–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ. –î–ª—è —Ç–∞–∫–æ–≥–æ —Ç–∏–ø–∞ –æ—á–µ–≤–∏–¥–Ω—ã–º –æ–±—Ä–∞–∑–æ–º –æ–ø—Ä–µ–¥–µ–ª—è—é—Ç—Å—è –≤—Å–µ –æ—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏, –ø—Ä–∏—Å—É—â–∏–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞–º. –û—Ç–ª–∏—á–∏—Ç–µ–ª—å–Ω–æ–π –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç—å—é `IO` –∏ –ø—Ä–æ—á–∏—Ö –ª–µ–Ω–∏–≤—ã—Ö –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ —è–≤–ª—è–µ—Ç—Å—è —Ç–æ, —á—Ç–æ –∏—Ö –≤—Å–µ–≥–¥–∞ –º–æ–∂–Ω–æ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞—Ç—å –∫ *–ª—é–±–æ–º—É* –¥—Ä—É–≥–æ–º—É –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—É *–±–µ–∑ –ø–æ—Ç–µ—Ä—å*. –°–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ –±—ã—Ç—å –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–Ω—ã–º–∏ –∫ –ª—é–±—ã–º –¥—Ä—É–≥–∏–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞–º –±–µ–∑ –ø–æ—Ç–µ—Ä—å —á–∞—Å—Ç–æ –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è ‚Äú–Ω–∞—á–∞–ª—å–Ω–æ–π‚Äù –∏–ª–∏ ‚Äú—Å–≤–æ–±–æ–¥–Ω–æ–π‚Äù ~~–º–æ–Ω–∞–¥–æ–π~~. 

```scala
import IO.* // –∏–∑ –ø—Ä–∏–º–µ—Ä–∞ –≤—ã—à–µ

type ~>[F[_], G[_]] = [A] => F[A] => G[A] // "–µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω–æ–µ" –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤

val ioToOption: IO ~> Option =
  [A] => (_: IO[A]) match
    case Pure(a)          => Some(a)
    case FlatMap(ib, fba) => ioToOption(ib) flatMap {fba andThen ioToOption.apply}

val initIO = FlatMap(FlatMap(Pure(
  42),
  i => {                  println("Int: " + i); Pure(i.toString)}),
  s => {val l = s.length; println("Len: " + l); Pure(l)})

val res1 = ioToOption(initIO)
val res2 = ioToOption(initIO)
println("Res: " + res1)
// –í—ã–≤–æ–¥ –≤ –∫–æ–Ω—Å–æ–ª—å:
// Int: 42
// Len: 2
// Int: 42 <-- —ç—Ñ—Ñ–µ–∫—Ç—ã —Å—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç –Ω–µ –ø—Ä–∏ –∫–æ–Ω—Å—Ç—Ä—É–∏—Ä–æ–≤–∞–Ω–∏–∏ IO,
// Len: 2      –∞ –ø—Ä–∏ –ö–ê–ñ–î–û–ô –µ–≥–æ "–ø–µ—Ä–µ–ø–∞–∫–æ–≤–∫–µ" (–Ω–∞–ø—Ä–∏–º–µ—Ä, –≤ Option)
// Res: Some(2)
```
–ó–¥–µ—Å—å –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–µ—Ç—Å—è –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ —Å–∞–º–æ–ø–∏—Å–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ `IO` –≤ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π `Option`, –Ω–æ –Ω–µ —Å–ª–æ–∂–Ω–æ —ç–∫—Å—Ç—Ä–∞–ø–æ–ª–∏—Ä–æ–≤–∞—Ç—å —ç—Ç–æ —Ä–µ—à–µ–Ω–∏–µ –Ω–∞ –ª—é–±–æ–π –¥—Ä—É–≥–æ–π –∫–æ–Ω–µ—á–Ω—ã–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä. –¢–∞–∫–∂–µ –ø—Ä–∏–º–µ—Ä —Ä–∞—Å–∫—Ä—ã–≤–∞–µ—Ç ‚Äú–ª–µ–Ω–∏–≤–æ—Å—Ç—å‚Äù `IO` ‚Äì –ø–æ–±–æ—á–Ω—ã–µ —ç—Ñ—Ñ–µ–∫—Ç—ã –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–π —Å—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç –Ω–µ –ø—Ä–∏ –∫–æ–Ω—Å—Ç—Ä—É–∏—Ä–æ–≤–∞–Ω–∏–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ (–∫–∞–∫ –≤ —Å–ª—É—á–∞–µ `Future`), –∞ –ø—Ä–∏ *–∫–∞–∂–¥–æ–π* –µ–≥–æ ‚Äú—Ä–∞—Å–ø–∞–∫–æ–≤–∫–µ‚Äù, –∏–ª–∏ ‚Äú–ø–µ—Ä–µ–ø–∞–∫–æ–≤–∫–µ‚Äù –≤ –¥—Ä—É–≥–æ–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä. –í–ø—Ä–æ—á–µ–º, `IO` –∏–∑ Cats, –∏–ª–∏ –∞–Ω–∞–ª–æ–≥–∏—á–Ω—ã–µ –ª–µ–Ω–∏–≤—ã–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –∏–∑ –¥—Ä—É–≥–∏—Ö –±–∏–±–ª–∏–æ—Ç–µ–∫ –Ω–µ —è–≤–ª—è—é—Ç—Å—è ‚Äú–ø–æ–ª–Ω–æ—Å—Ç—å—é —Å–≤–æ–±–æ–¥–Ω—ã–º–∏‚Äù, –≤ —Ç–æ–º —Å–º—ã—Å–ª–µ, —á—Ç–æ –¥–ª—è –∏—Ö —Ä–∞—Å–ø–∞–∫–æ–≤–∫–∏ –Ω–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ —Å–∞–º–æ–º—É –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—Ç—å –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è –∫ ‚Äú–Ω–µ–ª–µ–Ω–∏–≤—ã–º‚Äù –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞–º, —Ç–∞–∫ –∫–∞–∫ –≤ –±–∏–±–ª–∏–æ—Ç–µ–∫–∞—Ö —É–∂–µ –µ—Å—Ç—å –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ –º–µ—Ö–∞–Ω–∏–∑–º—ã ‚Äú–∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏–∏‚Äù (—Ç–æ –±–∏—à—å —Ä–∞—Å–ø–∞–∫–æ–≤–∫–∏) —ç—Ç–∏—Ö –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤.

–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä `IO` –≤ –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–µ —Å–∏—Ç—É–∞—Ü–∏–π —è–≤–ª—è–µ—Ç—Å—è –ª—É—á—à–µ–π –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–æ–π –≤ —Å—Ä–∞–≤–Ω–µ–Ω–∏–∏ —Å `Future`.  –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `IO` –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–∏—Å–∞—Ç—å ‚Äú—á–∏—Å—Ç—ã–π‚Äù –∫–æ–¥ –≤ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–º —Å—Ç–∏–ª–µ. –ü—Ä–æ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ `IO` –Ω–∞–¥ `Future` –º–æ–∂–Ω–æ –ø—Ä–æ—á–µ—Å—Ç—å —Ç—É—Ç:
- Gist.github: [From Scala Future to Cats Async?](https://gist.github.com/sentenza/c1fed5856a2ade343d999321458003c4), [IO vs Future and Referential transparency](https://gist.github.com/dcastro/c451883ff8aac44c57233ef1c6fd75ee);
- Stackoverflow: [Why future has side effects?](https://stackoverflow.com/questions/44196088/why-future-has-side-effects), [Scala with cats IO/Either instead of Future/Exceptions](https://stackoverflow.com/questions/69826999/scala-with-cats-io-either-instead-of-future-exceptions);
- –∑–∞–º–µ—á–∞—Ç–µ–ª—å–Ω–∞—è —Å—Ç–∞—Ç—å—è [IO monad: which, why and how](https://kubuszok.com/2019/io-monad-which-why-and-how/ "IO monad: which, why and how") –ú–∞—Ç–µ—É—à–∞ –ö—É–±—É—à–æ–∫–∞, –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–Ω–∞—è –≤ –µ–≥–æ –±–ª–æ–≥–µ.

–û–¥–Ω–∞–∫–æ, –≤ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–º –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–∏ —Ç–µ—Ä–º–∏–Ω ‚Äú—ç—Ñ—Ñ–µ–∫—Ç—ã‚Äù —á–∞—Å—Ç–æ –ø–æ–Ω–∏–º–∞—é—Ç —à–∏—Ä–µ, —á–µ–º –ø—Ä–æ—Å—Ç–æ ‚Äú–ø–æ–±–æ—á–Ω—ã–µ —ç—Ñ—Ñ–µ–∫—Ç—ã‚Äù. –í —á–∞—Å—Ç–Ω–æ—Å—Ç–∏, –∫ —ç—Ñ—Ñ–µ–∫—Ç–∞–º –æ—Ç–Ω–æ—Å—è—Ç —Ç–∞–∫–∂–µ –≤–æ–∑–º–æ–∂–Ω—ã–µ —Å–±–æ–∏, —Ä–∞–±–æ—Ç—É —Å ‚Äú–ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏—è–º–∏‚Äù, –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π –≤–≤–æ–¥/–≤—ã–≤–æ–¥ (–±–µ—Å–∫–æ–Ω–µ—á–Ω—ã–µ –ø–æ—Ç–æ–∫–∏ —Å–æ–±—ã—Ç–∏–π), –Ω–µ–¥–µ—Ç–µ—Ä–º–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω–æ—Å—Ç—å (–∫–æ–≥–¥–∞ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –Ω–µ –æ–¥–Ω–æ –∑–Ω–∞—á–µ–Ω–∏–µ, –∞ —Ü–µ–ª—ã–π *—Å–ø–∏—Å–æ–∫*) –∏ —Ç.–ø. –ù–æ—Å–∏—Ç–µ–ª—è–º–∏ —ç—Ñ—Ñ–µ–∫—Ç–æ–≤ —è–≤–ª—è—é—Ç—Å—è —Ñ—É–Ω–∫—Ü–∏–∏, –∑–Ω–∞—á–∏—Ç –æ–±—Ä–∞–±–æ—Ç–∫–∞ —ç—Ñ—Ñ–µ–∫—Ç–æ–≤ –∑–∞–∫–ª—é—á–∞–µ—Ç—Å—è –≤ –Ω–µ–∫–æ–º ‚Äú–æ–±—ë—Ä—Ç—ã–≤–∞–Ω–∏–∏‚Äù —Ç–∞–∫–∏—Ö —Ñ—É–Ω–∫—Ü–∏–π, –∞ —Ç–æ—á–Ω–µ–µ, –≤ –∏—Ö –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º *–∫–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–∏–∏*. 

–ö–ª–∞—Å—Å—ã —Ç–∏–ø–æ–≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ –∫–∞–∫ —Ä–∞–∑ –∏ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—é—Ç —Ç–∞–∫–∏–µ *–∫–æ–º–±–∏–Ω–∞—Ç–æ—Ä—ã*, –≤—Ä–æ–¥–µ `flatmap`. –ü–µ—Ä–µ–¥–∞–≤–∞–µ–º—ã–µ –≤ –Ω–∏—Ö —Ñ—É–Ω–∫—Ü–∏–∏ –∫–æ–º–±–∏–Ω–∏—Ä—É—é—Ç—Å—è —Å —Ö—Ä–∞–Ω—è—â–∏–º—Å—è –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ –∑–Ω–∞—á–µ–Ω–∏–µ–º, –∏–ª–∏ –¥—Ä—É–≥–∏–º–∏ —Ñ—É–Ω–∫—Ü–∏—è–º–∏, –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–∏ —Å —ç—Ñ—Ñ–µ–∫—Ç–æ–º, —Å–≤—è–∑–∞–Ω–Ω—ã–º —Å –∞–ª–≥–µ–±—Ä–∞–∏—á–µ—Å–∫–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π —ç—Ç–æ–≥–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞. –î–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ, –Ω–∞ –ª—é–±–æ–π —ç—Ñ—Ñ–µ–∫—Ç –º–æ–∂–Ω–æ –Ω–∞—Ç—è–Ω—É—Ç—å ~~—Å–æ–≤—É~~ —Ç–∏–ø-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä —Å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–º–∏ —ç—Ç–æ–º—É —ç—Ñ—Ñ–µ–∫—Ç—É –∫–æ–º–±–∏–Ω–∞—Ç–æ—Ä–∞–º–∏. –ò –æ–±—Ä–∞—Ç–Ω–æ, –∞–ª–≥–µ–±—Ä–∞–∏—á–µ—Å–∫–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä–µ –ª—é–±–æ–≥–æ —Ç–∏–ø–∞-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –∫–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–∏—è —Ñ—É–Ω–∫—Ü–∏–π-–Ω–æ—Å–∏—Ç–µ–ª–µ–π –Ω–µ–∫–æ—Ç–æ—Ä–æ–≥–æ —ç—Ñ—Ñ–µ–∫—Ç–∞. –ò–º–µ–Ω–Ω–æ —ç—Ç–æ –∏ –ª–µ–∂–∏—Ç –≤ –æ—Å–Ω–æ–≤–µ –ø–æ–ª–µ–∑–Ω–æ—Å—Ç–∏ –∫–æ–Ω—Ü–µ–ø—Ü–∏–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤.

–í –∫–∞—á–µ—Å—Ç–≤–µ –ø—Ä–∏–º–µ—Ä–∞ —Ä–∞—Å—Å–º–æ—Ç—Ä–∏–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è —ç—Ñ—Ñ–µ–∫—Ç–∞ "–≤–æ–∑–º–æ–∂–Ω–æ–≥–æ —Å–±–æ—è" –≤—ã—á–∏—Å–ª–µ–Ω–∏–π:
```scala
import scala.util.Try
type F[X] = Try[X]

// —à–∞–≥–∏ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è; —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –Ω–µ –≤–∞–∂–Ω–∞
val fa :      F[A] = ??? // –Ω–∞—á–∞–ª—å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ
val afb: A => F[B] = ??? // —Ñ—É–Ω–∫—Ü–∏—è —Å "—ç—Ñ—Ñ–µ–∫—Ç–æ–º"
val bc:  B =>   C  = ??? // "—á–∏—Å—Ç–∞—è" —Ñ—É–Ω–∫—Ü–∏—è
val cfd: C => F[D] = ??? // —Ñ—É–Ω–∫—Ü–∏—è —Å "—ç—Ñ—Ñ–µ–∫—Ç–æ–º"

// –æ–¥–∏–Ω –∏–∑ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ –∑–∞–ø–∏—Å–∏ –∫–æ–º–ø–æ–∑—Ü–∏–∏ –≤—ã—á–∏—Å–ª–µ–Ω–∏–π
val program: F[D] = // : Try[D]
  fa  flatMap
  afb map
  bc  flatMap
  cfd
```
–ó–¥–µ—Å—å –∫–æ–º–±–∏–Ω–∞—Ç–æ—Ä—ã `map` –∏ `flatMap` –∑–∞–ø–∏—Å–∞–Ω—ã –≤ –∏–Ω—Ñ–∏–∫—Å–Ω–æ–π –æ–ø–µ—Ä–∞—Ç–æ—Ä–Ω–æ–π —Ñ–æ—Ä–º–µ, —á—Ç–æ —Ä–∞–∑–≥—Ä—É–∂–∞–µ—Ç –æ–ø–∏—Å–∞–Ω–∏–µ –∞–ª–≥–æ—Ä–∏—Ç–º–∞, –∏–∑–±–∞–≤–ª—è—è –æ—Ç –∏–∑–±—ã—Ç–æ—á–Ω—ã—Ö —Å–∫–æ–±–æ–∫ –∏ —Ç–æ—á–µ–∫.

–í –¥–æ–ø–æ–ª–Ω–µ–Ω–∏–µ –º–æ–∂–Ω–æ –ø—Ä–æ—á–∏—Ç–∞—Ç—å —Ö–∞–±—Ä-–æ–±–∑–æ—Ä [–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —Å—Ä–µ–¥ –∏—Å–ø–æ–ª–Ω–µ–Ω–∏—è —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Å–∏—Å—Ç–µ–º —ç—Ñ—Ñ–µ–∫—Ç–æ–≤ –≤ Scala](https://habr.com/ru/companies/tinkoff/articles/736056/). –ü–æ–¥—Ä–æ–±–Ω–µ–µ –æ–± –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ —ç—Ñ—Ñ–µ–∫—Ç–æ–≤ –º–æ–∂–Ω–æ —É–∑–Ω–∞—Ç—å –∏–∑ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã—Ö —Ä–∞–±–æ—Ç –ï–≤–≥–µ–Ω–∏—è –ú–æ–≥–≥–∏ [Notions of computation and monads](https://www.cs.cmu.edu/~crary/819-f09/Moggi91.pdf) –∏ [Monads and Effects](file:///C:/Users/sviri_k9k74mq/Downloads/monadsandeffectsfinal.pdf), –∏–ª–∏ –Ω–∞ –æ—Å–Ω–æ–≤–∞–Ω–Ω–æ–π –Ω–∞ –Ω–∏—Ö —Å—Ç–∞—Ç—å–µ –ë–∞—Ä—Ç–æ—à–∞ –ú–∏–ª–µ–≤—Å–∫–∏ [Monads and Effects](https://bartoszmilewski.com/2016/11/30/monads-and-effects). –î—Ä—É–≥–∞—è —Ñ—É–Ω–¥–∞–º–µ–Ω—Ç–∞–ª—å–Ω–∞—è —Å—Ç–∞—Ç—å—è ‚Äì [The marriage of effects and monads](https://homepages.inf.ed.ac.uk/wadler/papers/effectstocl/effectstocl.pdf) –æ—Ç –§–∏–ª–∏–ø–ø–∞ –í–∞–¥–ª–µ—Ä–∞ –∏ –ü–∏—Ç–µ—Ä–∞ –¢–∏–º–∞–Ω–Ω–∞.

<anchor>mtl</anchor>
### –ú–æ–Ω–∞–¥–Ω—ã–µ —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–µ—Ä—ã

–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä–Ω—ã–π —Ç–∏–ø –ø–æ–∑–≤–æ–ª—è–µ—Ç –∫–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞—Ç—å –≤—ã—á–∏—Å–ª–µ–Ω–∏—è —Å –∫–∞–∫–∏–º-–ª–∏–±–æ —ç—Ñ—Ñ–µ–∫—Ç–æ–º. –û–¥–Ω–∞–∫–æ —à–∞–≥–∏ –≤—ã—á–∏—Å–ª–µ–Ω–∏–π –±—ã–≤–∞—é—Ç –Ω–æ—Å–∏—Ç–µ–ª—è–º–∏ *—Ä–∞–∑–Ω—ã—Ö* —ç—Ñ—Ñ–µ–∫—Ç–æ–≤, —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ –¥–ª—è –∏—Ö –∫–æ–º–ø–æ–∑–∏—Ü–∏–∏ –Ω—É–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä, –ø–æ–∑–≤–æ–ª—è—é—â–∏–π —Ä–∞–±–æ—Ç–∞—Ç—å —Å–æ –≤—Å–µ–º–∏ —ç—Ñ—Ñ–µ–∫—Ç–∞–º–∏, –ø–æ—Ä–æ–∂–¥–∞–µ–º—ã–º–∏ —ç—Ç–∏–º–∏ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è–º–∏. –ü—Ä–∏–¥—ë—Ç—Å—è –ª–∏ –≤—Ä—É—á–Ω—É—é —Ä–µ–∞–ª–∏–∑–æ–≤—ã–≤–∞—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ —Ç–∞–∫–∏—Ö –∫–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤, –∏–ª–∏ –∏—Ö –º–æ–∂–Ω–æ –≤—ã–≤–µ—Å—Ç–∏, –∏–º–µ—è –ø—Ä–æ—Å—Ç—ã–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –¥–ª—è –±–∞–∑–æ–≤—ã—Ö —ç—Ñ—Ñ–µ–∫—Ç–æ–≤?

–û—á–µ–≤–∏–¥–Ω—ã–π –ø—É—Ç—å –¥–ª—è –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏ (–¥–≤—É—Ö) —Ä–∞–∑–Ω—ã—Ö —ç—Ñ—Ñ–µ–∫—Ç–æ–≤ –∑–∞–∫–ª—é—á–∞–µ—Ç—Å—è –≤–æ –≤–ª–æ–∂–µ–Ω–∏–∏ –æ–¥–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –≤ –¥—Ä—É–≥–æ–π:
```scala
  type  F[+X]           // –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä —Å–æ –≤—Å–µ–º–∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—è–º–∏
¬† type  G[+X]           // –∏ –µ—â—ë –æ–¥–∏–Ω
¬† type FG[+X] = F[G[X]] // –∫–æ–º–±–∏–Ω–∞—Ü–∏—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
```
–ë—É–¥–µ—Ç –ª–∏ –Ω–æ–≤—ã–π —Ç–∏–ø ‚Äú–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–Ω—ã–º‚Äù? –°–æ–≥–ª–∞—Å–Ω–æ –¥–∞–Ω–Ω–æ–º—É –≤ —ç—Ç–æ–π —Å—Ç–∞—Ç—å–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—é –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ —á–µ—Ä–µ–∑ –∫–æ–≤–∞—Ä–∏–∞–Ω—Ç–Ω–æ—Å—Ç—å ‚Äì –±–µ–∑—É—Å–ª–æ–≤–Ω–æ –¥–∞. –í –±–∏–±–ª–∏–æ—Ç–µ–∫–µ Cats –µ—Å—Ç—å –∫–ª–∞—Å—Å [Nested](https://typelevel.org/cats/datatypes/nested.html) –≤–∏–¥–∞ $((\star\Rightarrow\star),\;(\star\Rightarrow\star),\,\star)\Rightarrow\star$ , —Å —É–∂–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–π –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é `map` –¥–ª—è –≤–ª–æ–∂–µ–Ω–Ω—ã—Ö –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤:
```scala
import cats.syntax.all.*
import cats.data.Nested

val listOptInt: List[Option[Int]] = List(Some(2), Some(1), None)

Nested(listOptInt)
  .map(_ * 2) // —É–º–Ω–æ–∂–∞–µ–º –Ω–∞ 2 –≤—Å—ë –Ω–µ–ø—É—Å—Ç—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã —Å–ø–∏—Å–∫–∞
  .value      // List(Some(4), Some(2), None)
```

–ö —Å–æ–∂–∞–ª–µ–Ω–∏—é, `Nested` –Ω–µ —É–º–µ–µ—Ç –∫–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞—Ç—å ‚Äú—ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã–µ‚Äù —Ñ—É–Ω–∫—Ü–∏–∏ ‚Äì –¥–ª—è –Ω–µ–≥–æ –Ω–µ—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ ‚Äú—Ä–∞–∑–º–∞—Ç—Ä—ë—à–∏–≤–∞–Ω–∏—è‚Äù `flatten: F[F[X]] => F[X]`, –∫–æ—Ç–æ—Ä–∞—è –¥–ª—è –≤–ª–æ–∂–µ–Ω–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ `FG` –∏–∑ –ø—Ä–∏–º–µ—Ä–∞ –≤—ã—à–µ –±—É–¥–µ—Ç –≤—ã–≥–ª—è–¥–µ—Ç—å —Ç–∞–∫
```scala
def flattenFG[X]: F[G[F[G[X]]]] => F[G[X]]
```
–¢–µ–æ—Ä–µ—Ç–∏—á–µ—Å–∫–∏, —Ñ—É–Ω–∫—Ü–∏—é `flatten` –º–æ–∂–Ω–æ —Å–∫–æ–Ω—Å—Ç—Ä—É–∏—Ä–æ–≤–∞—Ç—å –¥–ª—è –ª—é–±–æ–≥–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞, –Ω–æ –≤–≤–∏–¥—É —Ç–æ–≥–æ, —á—Ç–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã—Ö –∫–æ–º–±–∏–Ω–∞—Ü–∏–π —ç—Ñ—Ñ–µ–∫—Ç–æ–≤ –Ω–µ–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–æ, –±—ã–ª–æ –±—ã –∑–¥–æ—Ä–æ–≤–æ —É–º–µ—Ç—å —Å–æ–±–∏—Ä–∞—Ç—å —Ç–∞–∫—É—é —Ñ—É–Ω–∫—Ü–∏—é *–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏* –∏–∑ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π –∏–º–µ—é—â–∏—Ö—Å—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤. –ù–∞–ø—Ä–∏–º–µ—Ä, –µ—Å–ª–∏ –≤ `flattenFG` –ø–µ—Ä–µ—Å—Ç–∞–≤–∏—Ç—å –º–µ—Å—Ç–∞–º–∏ —Å—Ä–µ–¥–Ω–∏–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã `F[G[F[G[X]]]] => F[F[G[G[X]]]]`, –æ—Å—Ç–∞–Ω–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ ‚Äú—Ä–∞–∑–º–∞—Ç—Ä—ë—à–∏—Ç—å‚Äú `F` –∏ `G`. –¢–æ –µ—Å—Ç—å –Ω—É–∂–Ω–æ –æ—Ç–Ω–æ—à–µ–Ω–∏–µ (–∫–æ—Ç–æ—Ä–æ–µ –ø–æ—á–µ–º—É-—Ç–æ –Ω–∞–∑—ã–≤–∞—é—Ç [–¥–∏—Å—Ç—Ä–∏–±—É—Ç–∏–≤–Ω—ã–º –∑–∞–∫–æ–Ω–æ–º](https://en.m.wikipedia.org/wiki/Distributive_law_between_monads)) –≤–∏–¥–∞
```scala
def swapGF[X]: G[F[X]] => F[G[X]]
```
–ü—Ä–æ–±–ª–µ–º–∞ –∑–∞–∫–ª—é—á–∞–µ—Ç—Å—è –≤ —Ç–æ–º, —á—Ç–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ–∫—É—é –ø–µ—Ä–µ—Å—Ç–∞–Ω–æ–≤–∫—É –¥–ª—è *–ø—Ä–æ–∏–∑–≤–æ–ª—å–Ω—ã—Ö* –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ `F` –∏ `G` –Ω–µ –ø–æ–ª—É—á–∞–µ—Ç—Å—è ‚Äì –≤ –æ–±—â–µ–º —Å–ª—É—á–∞–µ *–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –Ω–µ –∫–æ–º–º—É—Ç–∏—Ä—É—é—Ç* (—Å–º. —Å—Ç–∞—Ç—å—é –¢–æ–Ω–∏ –ú–æ—Ä—Ä–∏—Å–∞: [Monads do not compose](https://blog.tmorris.net/posts/monads-do-not-compose/)).

–¢–µ–º –Ω–µ –º–µ–Ω–µ–µ, –µ—Å—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø–æ–ª–µ–∑–Ω—ã—Ö –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –≤—Å–µ–≥–¥–∞ –º–æ–∂–Ω–æ ‚Äú–ø—Ä–æ—Ç–∞—â–∏—Ç—å –Ω–∞ –≤–µ—Ä—Ö‚Äù –∫–æ–º–ø–æ–∑–∏—Ü–∏–∏ —Å –ª—é–±—ã–º –¥—Ä—É–≥–∏–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–º. –≠—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ç–∞–∫–æ–≥–æ —á–∞—Å—Ç–Ω–æ–≥–æ —Å–ª—É—á–∞—è –º–æ–∂–Ω–æ *—Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞—Ç—å* –ø—Ä–æ–∏–∑–≤–æ–ª—å–Ω—ã–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –≤ –Ω–æ–≤—ã–π, –æ–±–æ–≥–∞—â—ë–Ω–Ω—ã–π –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–º —ç—Ñ—Ñ–µ–∫—Ç–æ–º. –ó–Ω–∞—á–∏—Ç, –Ω–∞–º –Ω—É–∂–Ω—ã –Ω–æ–≤—ã–µ —Ç–∏–ø—ã ‚Äì –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–Ω—ã–µ *—Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–µ—Ä—ã* ü§ñ, –∫–æ—Ç–æ—Ä—ã–π –æ–±—ã—á–Ω–æ –Ω–∞–∑—ã–≤–∞—é—Ç—Å—è **–º–æ–Ω–∞–¥–Ω—ã–º–∏ —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–µ—Ä–∞–º–∏**, —Ç–∞–∫ –∫–∞–∫ –æ–Ω–∏ ‚Äú—Å–æ—Ö—Ä–∞–Ω—è—é—Ç‚Äù –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å `flatten`, –∞—Å—Å–æ—Ü–∏–∏—Ä—É—é—â—É—é—Å—è —Å –ø–æ–Ω—è—Ç–∏–µ–º ‚Äú–º–æ–Ω–∞–¥–∞‚Äù.

–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä–Ω—ã–π —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–µ—Ä –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π –æ–±–æ–±—â—ë–Ω–Ω—ã–π —Ç–∏–ø –≤–∏–¥–∞ $(\star\Rightarrow\star)\Rightarrow(\star\Rightarrow\star)$, –Ω–æ —á–∞—â–µ –≤—Å—Ç—Ä–µ—á–∞—é—Ç—Å—è —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–µ—Ä—ã –¥–æ–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–º–∏ —Ç–∏–ø–∞–º–∏: $(\star\Rightarrow\star,\;\star)\Rightarrow\star$. –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ Cats –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç —Å–ª–µ–¥—É—é—â—Ç–µ —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–µ—Ä—ã:

| –¢—Ä–∞–Ω—Å—Ñ–æ—Ä–º–µ—Ä | –ö–æ–º–ø–æ–∑–∏—Ü–∏—è |
| ---- | ---- |
| `OptionT[F[_], A]` | `F[Option[A]]` |
| `EitherT[F[_], A, B]` | `F[A Either B]` |
| `ReaderT[F[_], A, B]` | `A => F[B]` |
| `WriterT[F[_], A, B]` | `F[(A, B)]` |
| `StateT[F[_], A, B]` | `A => F[(A, B)]` |
| `ContT[F[_], A, B]` | `(A => F[B]) => F[B]` |

–¢—Ä–∞–Ω—Å—Ñ–æ—Ä–º–µ—Ä—ã –æ–±–æ–≥–∞—â–∞—é—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç –∏—Å—Ö–æ–¥–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é –æ–±—Ä–∞–±–æ—Ç–∫–∏ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö —ç—Ñ—Ñ–µ–∫—Ç–æ–≤ –∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å `flatMap` –∏—Å—Ö–æ–¥–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –¥–ª—è –∫–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–∏—è ‚Äú—ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã—Ö‚Äù —Ñ—É–Ω–∫—Ü–∏–π:
```scala
import cats.data.OptionT
import cats.syntax.all.*

def twiceAndTrice(i: Int) = OptionT(List(Some(i * 2), Some(i * 3)))

OptionT(List(Some(2), Some(1), None))
  .flatMap(twiceAndTrice)  // OptionT(List(Some(4), Some(6), Some(2), Some(3), None))
  .map(_ + 100)            // OptionT(List(Some(104), Some(106), Some(102), Some(103), None))
  .reduceLeftOption(_ + _) // Some(415)
```

–ö —Å–æ–∂–∞–ª–µ–Ω–∏—é, –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–Ω—ã–µ —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–µ—Ä—ã –Ω–µ —Ä–µ—à–∞—é—Ç –æ–∫–æ–Ω—á–∞—Ç–µ–ª—å–Ω–æ –ø—Ä–æ–±–ª–µ–º—É –∫–æ–º–ø–æ–∑–∏—Ä—É–µ–º–æ—Å—Ç–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤. –î–ª—è –æ–¥–Ω–∏—Ö –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ –º–æ–∂–Ω–æ –ø–æ—Å—Ç—Ä–æ–∏—Ç—å –±–æ–ª–µ–µ –æ–¥–Ω–æ–≥–æ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–≥–æ –µ–º—É —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–µ—Ä–∞, –∞ –¥–ª—è –¥—Ä—É–≥–∏—Ö –ø–æ—á—Ç–∏ –Ω–µ –≤–æ–∑–º–æ–∂–Ω–æ —ç—Ç–æ–≥–æ —Å–¥–µ–ª–∞—Ç—å. –ù–∞–ø—Ä–∏–º–µ—Ä, —Å–ª–æ–∂–Ω–æ—Å—Ç–∏ –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—è —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–µ—Ä–∞ –¥–ª—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ `List` –ø—Ä–æ—è—Å–Ω–∏–ª–∏ –∞–≤—Ç–æ—Ä—ã Cats –≤ –æ—Ç–≤–µ—Ç–µ –Ω–∞ —á–∞—Å—Ç—ã–π –≤–æ–ø—Ä–æ—Å [Where is ListT?](https://typelevel.org/cats/faq.html#where-is-listt).

–ü–æ–º–∏–º–æ —Ç–∞–∫–∏—Ö –ø—Ä–æ—Å—Ç—ã—Ö —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–µ—Ä–æ–≤ –µ—Å—Ç—å –Ω–æ—Å–∏—Ç–µ–ª–∏ –∏ –±–æ–ª–µ–µ –∏–Ω—Ç–µ—Ä–µ—Å–Ω—ã—Ö —ç—Ñ—Ñ–µ–∫—Ç–æ–≤. –í –±–∏–±–ª–∏–æ—Ç–µ–∫–µ Cats –µ—Å—Ç—å, –Ω–∞–ø—Ä–∏–º–µ—Ä, —Ç–∞–∫–∏–µ —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–µ—Ä—ã:
- [Fiber](https://typelevel.org/cats-effect/docs/datatypes/fiber) –ø–æ–∑–≤–æ–ª—è—é—â–∏–π –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç—å –≤—ã—á–∏—Å–ª–µ–Ω–∏—è –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ;
- [Resource](https://typelevel.org/cats-effect/docs/std/resource), –∫–æ—Ç–æ—Ä—ã–π –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç –¥–æ—Å—Ç—É–ø –∫ —Ä–µ—Å—É—Ä—Å—É, —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –ø–æ–ø—ã—Ç–∫–µ –µ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è (—Ä–∞—Å–ø–∞–∫–æ–≤–∫–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞) –∏ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç –µ–≥–æ ‚Äú–æ—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏–µ‚Äú —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ —ç—Ç–æ–≥–æ;
- [Ref](https://typelevel.org/cats-effect/docs/std/ref), –æ–±–µ—Å–ø–µ—á–∏–≤–∞—é—â–∏–π –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫ –∏–∑–º–µ–Ω—è–µ–º—ã–º –¥–∞–Ω–Ω—ã–º.
–ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ [FS2](https://fs2.io/) –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–µ—Ä `Stream[F[_], A]`, –ø–æ–∑–≤–æ–ª—è—é—â–∏–π —Ä–∞–±–æ—Ç–∞—Ç—å —Å –ø–æ—Ç–æ–∫–∞–º–∏ –¥–∞–Ω–Ω—ã—Ö (–≤ —Ç–æ–º —á–∏—Å–ª–µ —Å –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–º–∏). –í–æ–∑–º–æ–∂–Ω—ã –∏ –¥—Ä—É–≥–∏–µ —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–µ—Ä—ã.

–ï—â—ë –ø—Ä–æ –º–æ–Ω–∞–¥–Ω—ã–µ —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–µ—Ä—ã –º–æ–∂–Ω–æ –ø—Ä–æ—á–µ—Å—Ç—å —Ç—É—Ç:
- —Ö–∞–±—Ä-–ø–µ—Ä–µ–≤–æ–¥: [–ú–æ–Ω–∞–¥–Ω—ã–µ —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–µ—Ä—ã –¥–ª—è –ø—Ä–∞–∫—Ç–∏–∫—É—é—â–∏—Ö –ø—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç–æ–≤](https://habr.com/ru/articles/327030/) —Å—Ç–∞—Ç—å–∏ –ì–∞–±—Ä–∏—ç–ª—è –ü–µ—Ç—Ä–æ–Ω–µ–ª–ª—ã;
- —Ñ—Ä–∞–≥–º–µ–Ω—Ç –ª–µ–∫—Ü–∏–∏ [–¢—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ç–æ—Ä—ã –º–æ–Ω–∞–¥](https://wiki.livid.pp.ru/students/lambda/lectures/5.html#%D1%82%D1%80%D0%B0%D0%BD%D1%81%D1%84%D0%BE%D1%80%D0%BC%D0%B0%D1%82%D0%BE%D1%80%D1%8B-%D0%BC%D0%BE%D0%BD%D0%B0%D0%B4) (‚Äú*—Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ç–æ—Ä—ã*‚Äù, –ö–∞—Ä–ª!ü§†) –∏–∑ –∫—É—Ä—Å–∞ [–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ –∏ –ª–æ–≥–∏—á–µ—Å–∫–æ–µ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ](https://wiki.livid.pp.ru/students/lambda/) –Ω–∞ —Ä–µ—Å—É—Ä—Å–µ –ù–∏–∫–æ–ª–∞—è –Ø–∫–∏–º–æ–≤–∞;
- —Å—Ç–∞—Ç—å—è [Monad transformers](https://eed3si9n.com/herding-cats/monad-transfomers.html) —Å —Ä–µ—Å—É—Ä—Å–∞ *herding cats* –Æ–¥–∂–∏–Ω–∞ –ô–æ–∫–æ—Ç—ã;
- –±–æ–ª–µ–µ —Ñ—É–Ω–¥–∞–º–µ–Ω—Ç–∞–ª—å–Ω–∞—è —Å—Ç–∞—Ç—å—è [Combining Monads](https://citeseerx.ist.psu.edu/document?repid=rep1&type=pdf&doi=abd8bfd9dafbbf27c10f4044c784198bfab99163) –î–µ–≤–∏–¥–∞ –ö–∏–Ω–≥–∞ –∏ –§–∏–ª–∏–ø–ø–∞ –í–∞–¥–ª–µ—Ä–∞.

–ß–∞—â–µ –≤—Å–µ–≥–æ —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¥–ª—è –Ω–∞–¥—Å—Ç—Ä–æ–π–∫–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ –ø–æ–±–æ—á–Ω—ã—Ö —ç—Ñ—Ñ–µ–∫—Ç–æ–≤, –≤—Ä–æ–¥–µ `Future` –∏–ª–∏ `IO`. –ï—Å–ª–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –±–æ–ª–µ–µ –æ–¥–Ω–æ–≥–æ —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–µ—Ä–∞, —Ç–æ —ç—Ç–æ –º–æ–∂–µ—Ç –≤—ã–∑–≤–∞—Ç—å –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—É—é –±–æ–ª—å, –∫–æ—Ç–æ—Ä—É—é –º–æ–∂–Ω–æ –ø–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å –ø–æ–ª–µ—á–∏—Ç—å, –Ω–∞–ø—Ä–∏–º–µ—Ä, —Å –ø–æ–º–æ—â—å—é –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ [Cats-MTL](https://typelevel.org/cats-mtl/getting-started.html). –î—Ä—É–≥–æ–µ —Ä–µ—à–µ–Ω–∏–µ –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ [ZIO](https://zio.dev/) ([—Ç—É—Ç](https://scalac.io/zio/) –∫—Ä–∞—Å–æ—á–Ω–∞—è —Ä–µ–∫–ª–∞–º–∞) ‚Äì –æ–¥–Ω–æ–∏–º—ë–Ω–Ω—ã–π —Ç–∏–ø –ø–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä—É–µ—Ç—Å—è –∫–∞–∫ *—É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä*, —É –∫–æ—Ç–æ—Ä–æ–≥–æ –∏–º–µ—é—Ç—Å—è –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å–æ –≤—Å–µ–º–∏ –Ω—É–∂–Ω—ã–º–∏ —ç—Ñ—Ñ–µ–∫—Ç–∞–º–∏. –≠—Ç–æ—Ç —Ç–∏–ø *–æ—á–µ–Ω—å —É–ø—Ä–æ—â—ë–Ω–Ω–æ* –º–æ–∂–Ω–æ –ø—Ä–µ–¥—Å—Ç–∞–≤–∏—Ç—å –∫–∞–∫ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –∫ `IO` —Å—Ä–∞–∑—É –¥–≤—É—Ö —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–µ—Ä–æ–≤: `ReaderT` –¥–ª—è –∏–Ω—ä–µ–∫—Ü–∏–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –∏ `EitherT` –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –æ–±—Ä–∞–±–æ—Ç–∫–æ–π –æ—à–∏–±–æ–∫:
```scala
type ZIO[R, E, X] = R => IO[E Either X] 
//                = ReaderT[[A] =>> EitherT[IO, E, A], R, X]
```
–ê–≤—Ç–æ—Ä—ã –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ —É—Ç–≤–µ—Ä–∂–¥–∞—é—Ç, —á—Ç–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä `ZIO` (–≤ —Å–æ–≤–æ–∫—É–ø–Ω–æ—Å—Ç–∏ ‚Äú—Ä–µ—Å—É—Ä—Å–∞–º–∏‚Äú –∏ ‚Äú–ø–æ—Ç–æ–∫–∞–º–∏‚Äù –æ—Ç—Ç—É–¥–∞ –∂–µ, –∞ —Ç–∞–∫–∂–µ –º–Ω–æ–≥–æ—á–∏—Å–ª–µ–Ω–Ω—ã–º–∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è–º–∏ —Å –¥—Ä—É–≥–∏–º–∏ –±–∏–±–ª–∏–æ—Ç–µ–∫–∞–º–∏) –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –≤—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –¥–ª—è –∫–æ–º—Ñ–æ—Ä—Ç–Ω–æ–π ‚Äú—á–∏—Å—Ç–æ–π‚Äù —Ä–∞–±–æ—Ç—ã —Å —ç—Ñ—Ñ–µ–∫—Ç–∞–º–∏, –∏ –Ω–µ —Ç—Ä–µ–±—É–µ—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–≥–æ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–µ—Ä–æ–≤, –∏–ª–∏ –∫–ª–∞—Å—Å–æ–≤ —Ç–∏–ø–æ–≤, –≤—Ä–æ–¥–µ —Ç–µ—Ö, —á—Ç–æ –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ Cats.
